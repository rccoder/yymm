+function(t){"use strict";var e={JSPATH:"BJUI/",PLUGINPATH:"BJUI/plugins/",IS_DEBUG:!1,KeyPressed:{ctrl:!1,shift:!1},keyCode:{ENTER:13,ESC:27,END:35,HOME:36,SHIFT:16,CTRL:17,TAB:9,LEFT:37,RIGHT:39,UP:38,DOWN:40,DELETE:46,BACKSPACE:8},eventType:{initUI:"bjui.initUI",beforeInitUI:"bjui.beforeInitUI",afterInitUI:"bjui.afterInitUI",ajaxStatus:"bjui.ajaxStatus",resizeGrid:"bjui.resizeGrid",beforeAjaxLoad:"bjui.beforeAjaxLoad",beforeLoadNavtab:"bjui.beforeLoadNavtab",beforeLoadDialog:"bjui.beforeLoadDialog",afterLoadNavtab:"bjui.afterLoadNavtab",afterLoadDialog:"bjui.afterLoadDialog",beforeCloseNavtab:"bjui.beforeCloseNavtab",beforeCloseDialog:"bjui.beforeCloseDialog",afterCloseNavtab:"bjui.afterCloseNavtab",afterCloseDialog:"bjui.afterCloseDialog"},pageInfo:{pageCurrent:"pageCurrent",pageSize:"pageSize",orderField:"orderField",orderDirection:"orderDirection"},alertMsg:{displayPosition:"topcenter",alertTimeout:6e3},ajaxTimeout:3e4,statusCode:{ok:200,error:300,timeout:301},keys:{statusCode:"statusCode",message:"message"},ui:{windowWidth:0,showSlidebar:!0,clientPaging:!0,overwriteHomeTab:!1},debug:function(t){this.IS_DEBUG&&("undefined"!=typeof console?console.log(t):alert(t))},loginInfo:{url:"login.html",title:"Login",width:420,height:260,mask:!0},loadLogin:function(){var e=this.loginInfo;t("body").dialog({id:"bjui-login",url:e.url,title:e.title,width:e.width,height:e.height,mask:e.mask})},init:function(i){var a=t.extend({},i);t.extend(e.statusCode,a.statusCode),t.extend(e.pageInfo,a.pageInfo),t.extend(e.alertMsg,a.alertMsg),t.extend(e.loginInfo,a.loginInfo),t.extend(e.ui,a.ui),a.JSPATH&&(this.JSPATH=a.JSPATH),a.PLUGINPATH&&(this.PLUGINPATH=a.PLUGINPATH),a.ajaxTimeout&&(this.ajaxTimeout=a.ajaxTimeout),this.IS_DEBUG=a.debug||!1,this.initEnv(),t.cookie&&t.cookie("bjui_theme")||!a.theme||t(this).theme("setTheme",a.theme)},initEnv:function(){t(window).resize(function(){var i=t(this).width();e.ui.windowWidth&&e.ui.windowWidth>600&&e.ui.windowWidth<i&&(i=e.ui.windowWidth),e.initLayout(i),setTimeout(function(){t(this).trigger(e.eventType.resizeGrid)},30)}),setTimeout(function(){var i=t(window).width();e.ui.windowWidth&&e.ui.windowWidth>600&&e.ui.windowWidth<i&&(i=e.ui.windowWidth),e.initLayout(i),t(document).initui()},10)},initLayout:function(i){var a,n,o,s,l,r,d,c,u,h,p,f,g=i-(e.ui.showSlidebar?t("#bjui-sidebar").width()+6:6),m=t(window).height()-t("#bjui-header").height()-t("#bjui-footer").outerHeight(),b=t("#bjui-navtab").find(".tabsPageHeader").height();e.ui.windowWidth&&t("#bjui-window").width(i),e.windowWidth=i,t("#bjui-container").height(m),t("#bjui-navtab").width(g),t("#bjui-leftside, #bjui-sidebar, #bjui-sidebar-s, #bjui-splitBar, #bjui-splitBarProxy").css({height:"100%"}),t("#bjui-navtab .tabsPageContent").height(m-b),setTimeout(function(){t("#bjui-navtab > .tabsPageContent > .navtabPage").resizePageH(),t("#bjui-navtab > .tabsPageContent > .navtabPage").find(".bjui-layout").resizePageH()},10),a=t("body").data("bjui.navbar.width"),n=t("#bjui-header"),o=n.find(".bjui-navbar-toggle"),s=n.find(".bjui-navbar-logo"),l=t("#bjui-navbar-collapse"),r=l.find(".bjui-navbar-right"),a||(a={logoW:s.outerWidth(),navW:r.outerWidth()},t("body").data("bjui.navbar.width",a)),a&&(i-a.logoW<a.navW?(o.show(),l.addClass("collapse menu")):(o.hide(),l.removeClass("collapse menu in"))),d=t("#bjui-hnav-navbar-box"),c=d.find("> #bjui-hnav-navbar"),u=d.prev(),h=d.next(),p=d.width(),f=0,c.find("> li").each(function(){var e=t(this);f+=e.outerWidth(),f>p?(h.show(),d.data("hnav.move",!0).data("hnav.liw",f)):(u.hide(),h.hide(),d.removeData("hnav.move"))})},regional:{},setRegional:function(t,i){e.regional[t]=i},getRegional:function(t){var i,a,n;if(String(t).indexOf(".")>=0){for(a=String(t).split("."),n=0;n<a.length;n++)i=i?i[a[n]]:e.regional[a[n]];return i}return e.regional[t]},doRegional:function(e,i){return t.each(i,function(t,i){e=e.replaceAll("#"+t+"#",i)}),e}};window.BJUI=e}(jQuery),+function(t){"use strict";t(function(){BJUI.setRegional("alertmsg",{title:{error:"错误提示",info:"信息提示",warn:"警告信息",correct:"成功信息",confirm:"确认信息"},btnMsg:{ok:"确定",yes:"是",no:"否",cancel:"取消"}}),BJUI.setRegional("dialog",{close:"关闭",maximize:"最大化",restore:"还原",minimize:"最小化",title:"弹出窗口"}),BJUI.setRegional("orderby",{asc:"升序",desc:"降序"}),BJUI.setRegional("pagination",{total:"总记录数/总页数",first:"首页",last:"末页",prev:"上一页",next:"下一页",jumpto:"输入跳转页码，回车确认",jump:"跳转",page:"页",refresh:"刷新"}),BJUI.setRegional("datagrid",{asc:"升序",desc:"降序",showhide:"显示/隐藏 列",filter:"过滤",clear:"清除",lock:"锁定列",unlock:"解除锁定",add:"添加",edit:"编辑",save:"保存",update:"更新",cancel:"取消",del:"删除",prev:"上一条",next:"下一条",refresh:"刷新",query:"查询","import":"导入","export":"导出",all:"全部","true":"是","false":"否",selectMsg:"未选中任何行！",editMsg:"请先保存编辑行！",saveMsg:"没有需要保存的行！",delMsg:"确定要删除该行吗？",delMsgM:"确定要删除选中行？"}),BJUI.setRegional("progressmsg","正在努力加载数据，请稍等..."),BJUI.setRegional("datepicker",{close:"关闭",prev:"上月",next:"下月",clear:"清空",ok:"确定",dayNames:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]}),BJUI.setRegional("navtabCM",{refresh:"刷新本标签",close:"关闭本标签",closeother:"关闭其他标签",closeall:"关闭所有标签"}),BJUI.setRegional("dialogCM",{refresh:"刷新本窗口",close:"关闭本窗口",closeother:"关闭其他窗口",closeall:"关闭所有窗口"}),BJUI.setRegional("upload",{upConfirm:"开始上传",upPause:"暂停上传",upCancel:"取消上传"}),BJUI.setRegional("statusCode_503","服务器当前负载过大或者正在维护！"),BJUI.setRegional("sessiontimeout","会话超时，请重新登陆！"),BJUI.setRegional("plhmsg","占位符对应的选择器无有效值！"),BJUI.setRegional("nocheckgroup",'未定义选中项的组名[复选框的"data-group"]！'),BJUI.setRegional("notchecked","未选中任何一项！"),BJUI.setRegional("selectmsg","请选择一个选项！"),BJUI.setRegional("validatemsg","提交的表单中 [{0}] 个字段有错误，请更正后再提交！"),BJUI.setRegional("uititle","B-JUI"),BJUI.setRegional("maintab","我的主页"),t.validator&&t.validator.config({defaultMsg:"{0}格式不正确",loadingMsg:"正在验证...",rules:{digits:[/^\d+$/,"请输入整数"],number:[/^[\-\+]?((([0-9]{1,3})([,][0-9]{3})*)|([0-9]+))?([\.]([0-9]+))?$/,"请输入有效的数字"],letters:[/^[a-z]+$/i,"{0}只能输入字母"],tel:[/^(?:(?:0\d{2,3}[\- ]?[1-9]\d{6,7})|(?:[48]00[\- ]?[1-9]\d{6}))$/,"电话格式不正确"],mobile:[/^1[3-9]\d{9}$/,"手机号格式不正确"],email:[/^[\w\+\-]+(\.[\w\+\-]+)*@[a-z\d\-]+(\.[a-z\d\-]+)*\.([a-z]{2,4})$/i,"邮箱格式不正确"],qq:[/^[1-9]\d{4,}$/,"QQ号格式不正确"],date:[/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/,"请输入正确的日期，例：yyyy-MM-dd"],time:[/^(2[0123]|(1|0?)[0-9]){1}:([0-5][0-9]){1}:([0-5][0-9]){1}$/,"请输入正确的时间，例：HH:mm:ss"],datetime:[/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(2[0123]|(1|0?)[0-9]){1}:([0-5][0-9]){1}:([0-5][0-9]){1}$/,"请输入正确的日期时间，例：yyyy-MM-dd HH:mm:ss"],ID_card:[/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[A-Z])$/,"请输入正确的身份证号码"],url:[/^(https?|ftp):\/\/[^\s]+$/i,"网址格式不正确"],postcode:[/^[1-9]\d{5}$/,"邮政编码格式不正确"],chinese:[/^[\u0391-\uFFE5]+$/,"请输入中文"],username:[/^\w{3,12}$/,"请输入3-12位数字、字母、下划线"],password:[/^[0-9a-zA-Z]{6,16}$/,"密码由6-16位数字、字母组成"],pattern:function(t,e){if(!e)return!0;var i=t.value.parseDate(e);return i?!0:this.renderMsg("错误的日期时间格式！",e)},accept:function(t,e){if(!e)return!0;var i=e[0];return"*"===i||new RegExp(".(?:"+(i||"png|jpg|jpeg|gif")+")$","i").test(t.value)||this.renderMsg("只接受{1}后缀",i.replace("|",","))}}}),t.validator&&t.validator.config({messages:{required:"{0}不能为空",remote:"{0}已被使用",integer:{"*":"请输入整数","+":"请输入正整数","+0":"请输入正整数或0","-":"请输入负整数","-0":"请输入负整数或0"},match:{eq:"{0}与{1}不一致",neq:"{0}与{1}不能相同",lt:"{0}必须小于{1}",gt:"{0}必须大于{1}",lte:"{0}必须小于或等于{1}",gte:"{0}必须大于或等于{1}"},range:{rg:"请输入{1}到{2}的数",gte:"请输入大于或等于{1}的数",lte:"请输入小于或等于{1}的数"},checked:{eq:"请选择{1}项",rg:"请选择{1}到{2}项",gte:"请至少选择{1}项",lte:"请最多选择{1}项"},length:{eq:"请输入{1}个字符",rg:"请输入{1}到{2}个字符",gte:"请至少输入{1}个字符",lte:"请最多输入{1}个字符",eq_2:"",rg_2:"",gte_2:"",lte_2:""}}})})}(jQuery),+function(){"use strict";BJUI.setRegional("alertmsg",{title:{error:"Error",info:"Info",warn:"Warning",correct:"Correct",confirm:"Confirm"},btnMsg:{ok:"OK",yes:"YES",no:"NO",cancel:"Cancel"}}),BJUI.setRegional("dialog",{close:"Close",maximize:"Maximize",restore:"Restore",minimize:"Minimize",title:"Popup window"}),BJUI.setRegional("orderby",{asc:"Asc",desc:"Desc"}),BJUI.setRegional("pagination",{first:"First page",last:"Last page",prev:"Prev page",next:"Next page",jumpto:"Jump page number",jump:"Jump"}),BJUI.setRegional("datagrid",{asc:"ASC",desc:"DESC",showhide:"Show/Hide columns",filter:"Filter",clear:"Clear",lock:"Lock",unlock:"Unlock",add:"Add",edit:"Edit",save:"Save",update:"Update",cancel:"Cancel",del:"Delete",prev:"Prev",next:"Next",refresh:"Refresh",query:"Query","import":"Import","export":"Export",all:"All","true":"True","false":"False",selectMsg:"Not selected any rows!",saveMsg:"No rows need to save!",editMsg:"Please save the edited row!",delMsg:"Sure you want to delete this row?",delMsgM:"Sure you want to delete selected rows?"}),BJUI.setRegional("progressmsg","Data loading, please waiting..."),BJUI.setRegional("datepicker",{close:"Close",prev:"Prev month",next:"Next month",clear:"Clear",ok:"OK",dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),BJUI.setRegional("navtabCM",{refresh:"Refresh navtab",close:"Close navtab",closeother:"Close other navtab",closeall:"Close all navtab"}),BJUI.setRegional("dialogCM",{refresh:"Refresh dialog",close:"Close dialog",closeother:"Close other dialog",closeall:"Close all dialog"}),BJUI.setRegional("upload",{upConfirm:"Start upload",upPause:"Pause upload",upCancel:"Cancel upload"}),BJUI.setRegional("statusCode_503","The current server load is too large or is down for maintenance!"),BJUI.setRegional("sessiontimeout","Session timeout, please login!"),BJUI.setRegional("plhmsg","Placeholder corresponding selector None Valid!"),BJUI.setRegional("nocheckgroup",'Undefined group name selected item [check box "data-group"]!'),BJUI.setRegional("notchecked","Unchecked any one!"),BJUI.setRegional("selectmsg","Please select one option!"),BJUI.setRegional("validatemsg","Submitted form data has [{0}] field an error, please after modified submitting!"),BJUI.setRegional("uititle","B-JUI"),BJUI.setRegional("maintab","My home"),window.FRAG={dialog:'<div class="bjui-dialog bjui-dialog-container" style="top:150px; left:300px;">    <div class="dialogHeader" onselectstart="return false;" oncopy="return false;" onpaste="return false;" oncut="return false;">        <a class="close" href="#close" title="#close#"><i class="fa fa-times-circle"></i></a>        <a class="maximize" href="#maximize" title="#maximize#"><i class="fa fa-plus-circle"></i></a>        <a class="restore" href="#restore" title="#restore#"><i class="fa fa-history"></i></a>        <a class="minimize" href="#minimize" title="#minimize#"><i class="fa fa-minus-circle"></i></a>        <h1><span><i class="fa fa-th-large"></i></span> <span class="title">#title#</span></h1>    </div>    <div class="dialogContent unitBox"></div>    <div class="resizable_h_l" tar="nw"></div>    <div class="resizable_h_r" tar="ne"></div>    <div class="resizable_h_c" tar="n"></div>    <div class="resizable_c_l" tar="w" style="height:100%;"></div>    <div class="resizable_c_r" tar="e" style="height:100%;"></div>    <div class="resizable_f_l" tar="sw"></div>    <div class="resizable_f_r" tar="se"></div>    <div class="resizable_f_c" tar="s"></div></div>',taskbar:'<div id="bjui-taskbar" style="left:0px; display:none;">    <div class="taskbarContent">        <ul></ul>    </div>    <div class="taskbarLeft taskbarLeftDisabled"><i class="fa fa-angle-double-left"></i></div>    <div class="taskbarRight"><i class="fa fa-angle-double-right"></i></div></div>',splitBar:'<div id="bjui-splitBar"></div>',splitBarProxy:'<div id="bjui-splitBarProxy"></div>',resizable:'<div id="bjui-resizable" class="bjui-resizable"></div>',alertBackground:'<div class="bjui-alertBackground"></div>',maskBackground:'<div class="bjui-maskBackground bjui-ajax-mask"></div>',maskProgress:'<div class="bjui-maskProgress bjui-ajax-mask"><i class="fa fa-cog fa-spin"></i>&nbsp;&nbsp;#msg#<div class="progressBg"><div class="progress"></div></div></div>',progressBar_custom:'<div id="bjui-progressBar-custom" class="progressBar"><i class="fa fa-cog fa-spin"></i> <span></span></div>',dialogMask:'<div class="bjui-dialogBackground"></div>',orderby:'<a href="javascript:;" class="order asc" data-order-direction="asc" title="#asc#"><i class="fa fa-angle-up"></i></a><a href="javascript:;" class="order desc" data-order-direction="desc" title="#desc#"><i class="fa fa-angle-down"></i></a>',slidePanel:'<div class="panel panel-default">    <div class="panel-heading">        <h4 class="panel-title"><a data-toggle="collapse" data-parent="#bjui-accordionmenu" href="##id#" class="#class#">#icon#&nbsp;#title#<b>#righticon#</b></a></h4>    </div>    <div id="#id#" class="panel-collapse collapse#bodyclass#">        <div class="panel-body">        </div>    </div></div>',pagination:'<ul class="pagination">    <li class="j-first">        <a class="first" href="javascript:;"><i class="fa fa-step-backward"></i> #first#</a>        <span class="first"><i class="fa fa-step-backward"></i> #first#</span>    </li>    <li class="j-prev">        <a class="previous" href="javascript:;"><i class="fa fa-backward"></i> #prev#</a>        <span class="previous"><i class="fa fa-backward"></i> #prev#</span>    </li>    #pageNumFrag#    <li class="j-next">        <a class="next" href="javascript:;">#next# <i class="fa fa-forward"></i></a>        <span class="next">#next# <i class="fa fa-forward"></i></span>    </li>    <li class="j-last">        <a class="last" href="javascript:;">#last# <i class="fa fa-step-forward"></i></a>        <span class="last">#last# <i class="fa fa-step-forward"></i></span>    </li>    <li class="jumpto"><span class="p-input"><input class="form-control input-sm-pages" type="text" size="2.6" value="#pageCurrent#" title="#jumpto#"></span><a class="goto" href="javascript:;" title="#jump#"><i class="fa fa-chevron-right"></i></a></li></ul>',gridPaging:'<ul class="pagination">    <li class="page-total">        <span title="#total#">#count#</span>    </li>    <li class="page-jumpto"><span class="page-input"><input class="form-control input-sm-pages" type="text" size="3.2" value="#pageCurrent#" title="#jumpto#"></span></li>    <li class="page-first btn-nav">        <a href="javascript:;" title="#first#"><i class="fa fa-step-backward"></i></a>    </li>    <li class="page-prev btn-nav">        <a href="javascript:;" title="#prev#"><i class="fa fa-backward"></i></a>    </li>    <li class="page-next btn-nav">        <a href="javascript:;" title="#next#"><i class="fa fa-forward"></i></a>    </li>    <li class="page-last btn-nav">        <a href="javascript:;" title="#last#"><i class="fa fa-step-forward"></i></a>    </li></ul>',gridPageNum:'<li class="page-num#active#"><a href="javascript:;">#num#</a></li>',gridMenu:'<div class="datagrid-menu-box">    <ul>        <li class="datagrid-li-asc"><a href="javascript:;"><span class="icon"><i class="fa fa-sort-amount-asc"></i></span><span class="title">#asc#</span></a></li>        <li class="datagrid-li-desc"><a href="javascript:;"><span class="icon"><i class="fa fa-sort-amount-desc"></i></span><span class="title">#desc#</span></a></li>        <li class="datagrid-li-filter"><a href="javascript:;"><span class="icon"><i class="fa fa-filter"></i></span><span class="title">#filter#</span><span class="arrow"></span></a></li>        <li class="datagrid-li-showhide"><a href="javascript:;"><span class="icon"><i class="fa fa-check-square-o"></i></span><span class="title">#showhide#</span><span class="arrow"></span></a></li>        <li class="datagrid-li-lock"><a href="javascript:;"><span class="icon"><i class="fa fa-lock"></i></span><span class="title">#lock#</span></a></li>        <li class="datagrid-li-unlock disable"><a href="javascript:;"><span class="icon"><i class="fa fa-unlock"></i></span><span class="title">#unlock#</span></a></li>    </ul></div>',gridFilter:'<div class="datagrid-filter-box"><fieldset><legend>#label#</legend><span class="filter-a"></span><span class="filter-and"><select data-toggle="selectpicker" data-container="true" data-width="100%"><option value="and">AND</option><option value="or">OR</option></select></span><span class="filter-b"></span><span class="filter-ok"><button type="button" class="btn-green ok" data-icon="check">#filter#</button><button type="button" class="btn-orange clear" data-icon="remove">#clear#</button></span></fieldset></div>',gridShowhide:'<li data-index="#index#" class="datagrid-col-check"><a href="javascript:;"><i class="fa fa-check-square-o"></i>#label#</a></li>',gridEditBtn:'<button type="button" class="btn-green edit" data-icon="edit">#edit#</button><button type="button" class="btn-green update" data-icon="edit">#update#</button><button type="button" class="btn-green save" data-icon="check">#save#</button><button type="button" class="btn-orange cancel" data-icon="undo">#cancel#</button><button type="button" class="btn-orange delete" data-icon="remove">#del#</button>',gridDialogEditBtns:'<ul>    <li class="pull-left"><button type="button" class="btn btn-orange prev" data-icon="arrow-up">#prev#</button></li>    <li class="pull-left"><button type="button" class="btn btn-orange next" data-icon="arrow-down">#next#</button></li>    <li><button type="button" class="btn btn-red cancel" data-icon="remove">#cancel#</button></li>    <li><button type="button" class="btn btn-default save" data-icon="save">#save#</button></li></ul>',alertBoxFrag:'<div id="bjui-alertMsgBox" class="bjui-alert"><div class="alertContent"><div class="#type#"><div class="alertInner"><h1><i class="fa #fa#"></i>#title#</h1><div class="msg">#message#</div></div><div class="toolBar"><ul>#btnFragment#</ul></div></div></div></div>',alertBtnFrag:'<li><button class="btn btn-#class#" rel="#callback#" type="button">#btnMsg#</button></li>',calendarFrag:'<div id="bjui-calendar">    <div class="main">        <a class="close" href="javascript:;" title="#close#"><i class="fa fa-times-circle"></i></a>        <div class="head">            <table width="100%" border="0" cellpadding="0" cellspacing="2">                <tr>                    <td width="20"><a class="prev" href="javascript:;" title="#prev#"><i class="fa fa-arrow-left"></i></a></td>                    <td><select name="year"></select></td>                    <td><select name="month"></select></td>                    <td width="20"><a class="next" href="javascript:;" title="#next#"><i class="fa fa-arrow-right"></i></a></td>                </tr>            </table>        </div>        <div class="body">            <dl class="dayNames"><dt>7</dt><dt>1</dt><dt>2</dt><dt>3</dt><dt>4</dt><dt>5</dt><dt>6</dt></dl>            <dl class="days"><!-- date list --></dl>            <div style="clear:both;height:0;line-height:0"></div>        </div>        <div class="foot">            <table class="time">                <tr>                    <td>                        <input type="text" class="hh" maxlength="2" data-type="hh" data-start="0" data-end="23">:<input                         type="text" class="mm" maxlength="2" data-type="mm" data-start="0" data-end="59">:<input                         type="text" class="ss" maxlength="2" data-type="ss" data-start="0" data-end="59">                    </td>                    <td><ul><li class="up" data-add="1">&and;</li><li class="down">&or;</li></ul></td>                </tr>            </table>            <button type="button" class="clearBtn btn btn-orange">#clear#</button>            <button type="button" class="okBtn btn btn-default">#ok#</button>        </div>        <div class="tm">            <ul class="hh">                <li>0</li>                <li>1</li>                <li>2</li>                <li>3</li>                <li>4</li>                <li>5</li>                <li>6</li>                <li>7</li>                <li>8</li>                <li>9</li>                <li>10</li>                <li>11</li>                <li>12</li>                <li>13</li>                <li>14</li>                <li>15</li>                <li>16</li>                <li>17</li>                <li>18</li>                <li>19</li>                <li>20</li>                <li>21</li>                <li>22</li>                <li>23</li>            </ul>            <ul class="mm">                <li>0</li>                <li>5</li>                <li>10</li>                <li>15</li>                <li>20</li>                <li>25</li>                <li>30</li>                <li>35</li>                <li>40</li>                <li>45</li>                <li>50</li>                <li>55</li>            </ul>            <ul class="ss">                <li>0</li>                <li>10</li>                <li>20</li>                <li>30</li>                <li>40</li>                <li>50</li>            </ul>        </div>    </div></div>',spinnerBtn:'<ul class="bjui-spinner"><li class="up" data-add="1">&and;</li><li class="down">&or;</li></ul>',lookupBtn:'<a class="bjui-lookup" href="javascript:;" data-toggle="lookupbtn"><i class="fa fa-search"></i></a>',dateBtn:'<a class="bjui-lookup" href="javascript:;" data-toggle="datepickerbtn"><i class="fa fa-calendar"></i></a>',navtabCM:'<ul id="bjui-navtabCM">    <li rel="reload"><span class="icon"><i class="fa fa-refresh"></i></span><span class="title">#refresh#</span></li>    <li rel="closeCurrent"><span class="icon"><i class="fa fa-remove"></i></span><span class="title">#close#</li>    <li rel="closeOther"><span class="icon"><i class="fa fa-remove"></i></span><span class="title">#closeother#</li>    <li rel="closeAll"><span class="icon"><i class="fa fa-remove"></i></span><span class="title">#closeall#</li></ul>',dialogCM:'<ul id="bjui-dialogCM">    <li rel="reload"><span class="icon"><i class="fa fa-refresh"></i></span><span class="title">#refresh#</span></li>    <li rel="closeCurrent"><span class="icon"><i class="fa fa-remove"></i></span><span class="title">#close#</span></li>    <li rel="closeOther"><span class="icon"><i class="fa fa-remove"></i></span><span class="title">#closeother#</span></li>    <li rel="closeAll"><span class="icon"><i class="fa fa-remove"></i></span><span class="title">#closeall#</span></li></ul>',externalFrag:'<iframe src="{url}" style="width:100%;height:{height};" frameborder="no" border="0" marginwidth="0" marginheight="0"></iframe>',uploadTemp:'<div id="{fileId}" class="item">    <div class="info">        <span class="up_filename">{fileName}</span><span class="up_confirm" title="#upConfirm#"><i class="fa fa-play-circle-o"></i></span><span class="up_pause" title="#upPause#"><span class="glyphicon glyphicon-pause"></span></span><span class="up_cancel" title="#upCancel#"><i class="fa fa-times-circle-o"></i></span>    </div>    <div class="preview"><span class="img"></span></div>    <div class="progress"><div class="bar"></div></div>    <span class="percent">{percent}</span>    <span class="filesize"><span class="uploadedsize">{uploadedSize}</span>/<span class="totalsize">{fileSize}</span></span></div>',uploadFrag:'<input class="bjui-upload-select-file" style="display:none;" type="file" name="fileselect[]" #multi# accept="#accept#"><a href="javascript:void(0)" class="btn btn-default bjui-upload-select">#btnTxt#</a><div class="queue"></div>',statusCode_503:"HTTP status 503, #statusCode_503#",sessionTimout:"#sessiontimeout#",alertPlhMsg:"#plhmsg#",alertNoCheckGroup:"#nocheckgroup#",alertNotChecked:"#notchecked#",alertSelectMsg:"#selectmsg#",validateErrorMsg:"#validatemsg#",uiTitle:"#uititle#",mainTabTitle:"#mynavtab#"}}(jQuery),+function(t){"use strict";t.fn.extend({ajaxUrl:function(e){var i=t(this);i.trigger(BJUI.eventType.beforeAjaxLoad),e.loadingmask&&i.trigger(BJUI.eventType.ajaxStatus),t.ajax({type:e.type||"GET",url:e.url,data:e.data||{},cache:!1,dataType:"html",timeout:BJUI.ajaxTimeout,success:function(a){var n=a.toJson(),o=i.find("> .bjui-ajax-mask");n[BJUI.keys.statusCode]?(n[BJUI.keys.statusCode]==BJUI.statusCode.error?(n[BJUI.keys.message]&&i.alertmsg("error",n[BJUI.keys.message]),i.closest(".bjui-layout").length||(i.closest(".navtab-panel").length?i.navtab("closeCurrentTab"):i.dialog("closeCurrent"))):n[BJUI.keys.statusCode]==BJUI.statusCode.timeout&&(i.closest(".bjui-dialog").length&&i.dialog("closeCurrent"),i.closest(".navtab-panel").length&&i.navtab("closeCurrentTab"),t("body").alertmsg("info",n[BJUI.keys.message]||BJUI.regional.sessiontimeout),BJUI.loadLogin()),o.fadeOut("normal",function(){t(this).remove()})):(i.empty().html(a).append(o).initui(),t.isFunction(e.callback)&&e.callback(a))},error:function(t,e,a){i.bjuiajax("ajaxError",t,e,a),i.closest(".bjui-layout").length||(i.closest(".navtab-panel").length?i.navtab("closeCurrentTab"):i.dialog("closeCurrent")),i.trigger("bjui.ajaxError")},statusCode:{503:function(t,e,a){i.alertmsg("error",FRAG.statusCode_503.replace("#statusCode_503#",BJUI.regional.statusCode_503)||a)}}})},loadUrl:function(e,i,a){t(this).ajaxUrl({url:e,data:i,callback:a})},doAjax:function(e){var i,a,n=t(this);return e.url?e.callback?(e.callback=e.callback.toFunc(),e.loadingmask&&(i=n.getPageTarget(),i.trigger(BJUI.eventType.ajaxStatus),a=i.find("> .bjui-ajax-mask")),e.type||(e.type="POST"),e.dataType||(e.dataType="json"),e.cache||(e.cache=!1),e.timeout=BJUI.ajaxTimeout,e.success=function(n){a?e.callback?t.when(e.callback(n)).done(function(){i.trigger("bjui.ajaxStop")}):i.trigger("bjui.ajaxStop"):e.callback(n)},e.error=e.error||function(t,e,o){n.bjuiajax("ajaxError",t,e,o),a&&i.trigger("bjui.ajaxError")},void t.ajax(e)):void BJUI.debug("The ajax callback is undefined!"):void BJUI.debug("The ajax url is undefined!")},getPageTarget:function(){var e;return e=this.closest(".bjui-layout").length?this.closest(".bjui-layout"):this.closest(".navtab-panel").length?t.CurrentNavtab:t.CurrentDialog},resizePageH:function(){return this.each(function(){if(!t(this).closest(".tab-content").length){var e=t(this),i=e.find("> .bjui-pageHeader"),a=e.find("> .bjui-pageContent"),n=e.find("> .bjui-pageFooter"),o=i.outerHeight()||0,s=n.outerHeight()||0;e.hasClass("navtabPage")&&e.is(":hidden")&&(e.show(),o=i.outerHeight()||0,s=n.outerHeight()||0,e.hide()),n.css("bottom")&&(s+=parseInt(n.css("bottom"))||0),0==s&&e.hasClass("dialogContent")&&(s=5),a.css({top:o,bottom:s})}})},getMaxIndexObj:function(e){var i=0,a=0;return e.each(function(e){var n=parseInt(t(this).css("zIndex"))||1;n>i&&(i=n,a=e)}),e.eq(a)},serializeJson:function(){var e={},i=this.serializeArray();return t.each(i,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},isTag:function(e){return e&&t(this).prop("tagName")?t(this)[0].tagName.toLowerCase()==e:!1},isBind:function(e){var i=t(this).data("events");return i&&e&&i[e]},log:function(t){return this.each(function(){console&&console.log("%s: %o",t,this)})}}),t.extend(String.prototype,{isPositiveInteger:function(){return new RegExp(/^[1-9]\d*$/).test(this)},isInteger:function(){return new RegExp(/^\d+$/).test(this)},isNumber:function(){return new RegExp(/^([-]{0,1}(\d+)[\.]+(\d+))|([-]{0,1}(\d+))$/).test(this)},includeChinese:function(){return new RegExp(/[\u4E00-\u9FA5]/).test(this)},trim:function(){return this.replace(/(^\s*)|(\s*$)|\r|\n/g,"")},startsWith:function(t){return 0===this.indexOf(t)},endsWith:function(t){var e=this.length-t.length;return e>=0&&this.lastIndexOf(t)===e},replaceSuffix:function(t){return this.replace(/\[[0-9]+\]/,"["+t+"]").replace("#index#",t)},replaceSuffix2:function(t){return this.replace(/\-(i)([0-9]+)$/,"-i"+t).replace("#index#",t)},trans:function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"')},encodeTXT:function(){return this.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll(" ","&nbsp;")},replaceAll:function(t,e){return this.replace(new RegExp(t,"gm"),e)},replacePlh:function(e){return e=e||t(document),this.replace(/{\/?[^}]*}/g,function(t){var i=e.find(t.replace(/[{}]+/g,""));return i&&i.val()?i.val():t})},replaceMsg:function(t){return this.replace(new RegExp("({.*})","g"),t)},replaceTm:function(t){return t?this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_-]*})","g"),function(e){return t[e.replace(/[{}]+/g,"")]}):this},replaceTmById:function(e){var i=e||t(document);return this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_-]*})","g"),function(t){var e=i.find("#"+t.replace(/[{}]+/g,""));return e.val()?e.val():t})},isFinishedTm:function(){return!new RegExp("{/?[^}]*}").test(this)},skipChar:function(t){return this&&0!==this.length?this.charAt(0)===t?this.substring(1).skipChar(t):this:""},isValidPwd:function(){return new RegExp(/^([_]|[a-zA-Z0-9]){6,32}$/).test(this)},isValidMail:function(){return new RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/).test(this.trim())},isSpaces:function(){var t,e;for(t=0;t<this.length;t+=1)if(e=this.charAt(t)," "!=e&&"\n"!=e&&"   "!=e&&"\r"!=e)return!1;return!0},isPhone:function(){return new RegExp(/(^([0-9]{3,4}[-])?\d{3,8}(-\d{1,6})?$)|(^\([0-9]{3,4}\)\d{3,8}(\(\d{1,6}\))?$)|(^\d{3,8}$)/).test(this)},isUrl:function(){return new RegExp(/^[a-zA-z]+:\/\/([a-zA-Z0-9\-\.]+)([-\w .\/?%&=:]*)$/).test(this)},isExternalUrl:function(){return this.isUrl()&&-1==this.indexOf("://"+document.domain)},toBool:function(){return"true"===this.toLowerCase()},toJson:function(){var t=this;try{return"object"==typeof t&&(t=t.toString()),t.trim().match("^{(.+:.+,*){1,}}$")?JSON.parse(this):this}catch(e){return this}},toObj:function(){var t=null;try{t=new Function("return "+this)()}catch(e){t=this,BJUI.debug('String toObj：Parse "String" to "Object" error! Your str is: '+this)}return t},toFunc:function(){var t,e,i;if(this&&0!=this.length){if(this.startsWith("function"))return new Function("return "+this)();for(t=this.split("."),e=window,i=0;i<t.length;i++)e=e[t[i]];return"function"==typeof e?e:void 0}},setUrlParam:function(t,e){var i,a,n,o,s,l="",r=this;if(-1==r.indexOf("?"))return r+"?"+t+"="+e;if(l=r.substr(r.indexOf("?")+1),a="",n="",o="0",-1!=l.indexOf("&")){i=l.split("&");for(s in i)i[s].split("=")[0]==t?(n=e,o="1"):n=i[s].split("=")[1],a=a+i[s].split("=")[0]+"="+n+"&";a=a.substr(0,a.length-1),"0"==o&&a==l&&(a=a+"&"+t+"="+e)}else-1!=l.indexOf("=")?(i=l.split("="),i[0]==t?(n=e,o="1"):n=i[1],a=i[0]+"="+n,"0"==o&&a==l&&(a=a+"&"+t+"="+e)):a=t+"="+e;return r.substr(0,r.indexOf("?"))+"?"+a}}),t.extend(Function.prototype,{toFunc:function(){return this}}),t.extend(Array.prototype,{remove:function(t){return 0>t?this:this.slice(0,t).concat(this.slice(t+1,this.length))},unique:function(){var t,e=new Array;for(this.sort(),t=0;t<this.length;t++)this[t]!=this[t+1]&&(e[e.length]=this[t]);return e},myIndexOf:function(t){if(!this||!this.length)return-1;for(var e,i=0;e=this[i];i++)if(e==t)return i;return-1},toJson:function(){var e={},i=this;return t.each(i,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e}}),t.isJson=function(e){var i=!0;try{i=t.parseJSON(e)}catch(a){return!1}return!!i}}(jQuery),+function(t){"use strict";function e(e){var i=arguments,n=e;return this.each(function(){var o=t(this),s=t.extend({},o.data(),"object"==typeof e&&e),l=o.data("bjui.basedrag");l||o.data("bjui.basedrag",l=new a(this,s)),"string"==typeof n&&t.isFunction(l[n])?([].shift.apply(i),i?l[n].apply(l,i):l[n]()):l.init()})}var i,a=function(e,i){this.$element=t(e),this.options=i};a.prototype.init=function(){var t=this;this.options.$obj=this.$element,this.options.obj&&(this.options.$obj=this.options.obj),this.options.event?this.start(this.options.event):this.$element.find(this.options.selector).bind("mousedown",function(e){t.start.apply(t,[e])})},a.prototype.start=function(){document.onselectstart=function(){return!1};var e=this;this.options.oleft=parseInt(this.$element.css("left"))||0,this.options.otop=parseInt(this.$element.css("top"))||0,t(document).bind("mouseup.bjui.basedrag",function(t){
e.stop.apply(e,[t])}).bind("mousemove.bjui.basedrag",function(t){e.drag.apply(e,[t])})},a.prototype.drag=function(e){var i,a,n,o;return e||(e=window.event),i=this.options,a=i.oleft+(e.pageX||e.clientX)-i.event.pageX,n=i.otop+(e.pageY||e.clientY)-i.event.pageY,1>n&&(n=0),"horizontal"==i.move?i.minW&&a>=parseInt(this.options.$obj.css("left"))+i.minW&&i.maxW&&a<=parseInt(this.options.$obj.css("left"))+i.maxW?this.$element.css("left",a):i.scop&&i.relObj&&(a-parseInt(i.relObj.css("left"))>i.cellMinW?this.$element.css("left",a):this.$element.css("left",a)):"vertical"==i.move?this.$element.css("top",n):(o=i.selector?this.options.$obj.find(i.selector):this.options.$obj,a>=2*-o.outerWidth()/3&&n>=0&&a+o.outerWidth()/3<t(window).width()&&n+o.outerHeight()<t(window).height()&&this.$element.css({left:a,top:n})),i.drag&&i.drag.apply(this.$element,[this.$element,e]),this.preventEvent(e)},a.prototype.stop=function(e){return t(document).unbind("mousemove.bjui.basedrag").unbind("mouseup.bjui.basedrag"),this.options.stop&&this.options.stop.apply(this.$element,[this.$element,e]),this.options.event&&this.destroy(),document.onselectstart=function(){return!0},this.preventEvent(e)},a.prototype.preventEvent=function(t){return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1},a.prototype.destroy=function(){this.$element.removeData("bjui.basedrag"),this.options.nounbind||this.$element.unbind("mousedown")},i=t.fn.basedrag,t.fn.basedrag=e,t.fn.basedrag.Constructor=a,t.fn.basedrag.noConflict=function(){return t.fn.basedrag=i,this}}(jQuery),+function(t){"use strict";function e(e){var a=arguments,n=e;return this.each(function(){var o=t(this),s=t.extend({},o.data(),"object"==typeof e&&e),l=o.data("bjui.slidebar");l||o.data("bjui.slidebar",l=new i(this,s)),"string"==typeof n&&t.isFunction(l[n])?([].shift.apply(a),a?l[n].apply(l,a):l[n]()):l.init()})}var i,a;t(function(){t("#bjui-leftside").after("<!-- Adjust the width of Left slide -->").after(FRAG.splitBar).after(FRAG.splitBarProxy)}),i=function(e,i){this.$element=t(e),this.$bar=this.$element.find("#bjui-sidebar"),this.$sbar=this.$element.find("#bjui-sidebar-s"),this.$lock=this.$bar.find("> .toggleCollapse > .lock"),this.$navtab=t("#bjui-navtab"),this.$collapse=this.$sbar.find(".collapse"),this.$split=t("#bjui-splitBar"),this.$split2=t("#bjui-splitBarProxy"),this.isfloat=!1,this.options=i},i.prototype.lock=function(){var e=this,i=e.$bar.outerWidth()+4,a=BJUI.windowWidth-t("#bjui-sidebar").width()-6;e.faLock(),e.hoverLock(),e.$sbar.animate({left:-10},20),e.$bar.removeClass("shadown"),e.isfloat=!1,e.$navtab.animate({left:i,width:a},500,function(){t(window).trigger(BJUI.eventType.resizeGrid)}),e.$split.show()},i.prototype.unlock=function(){var e=this,i=0-e.$bar.outerWidth()-0,a=BJUI.windowWidth-6;e.faUnLock(),e.hoverUnLock(),e.$navtab.animate({left:6,width:a},400),e.$bar.animate({left:i},500,function(){e.$sbar.animate({left:0},200),e.$split.hide(),t(window).trigger(BJUI.eventType.resizeGrid)}),e.isfloat=!1},i.prototype["float"]=function(){var t=this;t.$sbar.animate({left:-10},200),t.$bar.addClass("shadown").animate({left:0},500),t.isfloat=!0},i.prototype.hideFloat=function(){var t=this,e=0-t.$bar.outerWidth()-0;t.$bar.animate({left:e-10},500,function(){t.$sbar.animate({left:0},100)}),t.isfloat=!1},i.prototype.hoverLock=function(){var t=this;t.$lock.hover(function(){t.tipUnLock(),t.faUnLock()},function(){t.tipLock(),t.faLock()})},i.prototype.hoverUnLock=function(){var t=this;t.$lock.hover(function(){t.tipLock(),t.faLock()},function(){t.tipUnLock(),t.faUnLock()})},i.prototype.tipLock=function(){this.$lock.tooltip("destroy").tooltip({title:"保持锁定，始终显示导航栏",container:"body"})},i.prototype.tipUnLock=function(){this.$lock.tooltip("destroy").tooltip({title:"解除锁定，自动隐藏导航栏",container:"body"})},i.prototype.faLock=function(){this.$lock.find("> i").attr("class","fa fa-lock")},i.prototype.faUnLock=function(){this.$lock.find("> i").attr("class","fa fa-unlock-alt")},i.prototype.init=function(){var e=this;BJUI.ui.showSlidebar?e.hoverLock():e.unlock(),this.$lock.off("click.bjui.slidebar").on("click.bjui.slidebar",function(){e.isfloat?e.lock():e.unlock(),BJUI.ui.showSlidebar=!BJUI.ui.showSlidebar}),this.$collapse.hover(function(){e["float"](),e.$navtab.click(function(){e.isfloat&&e.hideFloat()})}),this.$split.mousedown(function(i){e.$split2.each(function(){var a=t(this);return setTimeout(function(){a.show()},100),a.css({visibility:"visible",left:e.$split.css("left")}).basedrag(t.extend(e.options,{obj:e.$bar,move:"horizontal",event:i,stop:function(){var i,a,n,o;t(this).css("visibility","hidden"),i=parseInt(t(this).css("left"))-parseInt(e.$split.css("left")),a=e.$bar.outerWidth()+i,n=parseInt(e.$navtab.css("left"))+i,o=e.$navtab.outerWidth()-i,e.$bar.css("width",a),e.$split.css("left",t(this).css("left")),e.$navtab.css({left:n,width:o})}})),!1})}),t("#bjui-hnav-navbar-box").length&&e.moveHnav()},i.prototype.moveHnav=function(){var e=t("#bjui-hnav-navbar-box"),i=e.find("> #bjui-hnav-navbar"),a=e.prev(),n=e.next();a.hover(function(){i.stop().animate({left:0},2e3,function(){a.hide()})},function(){i.stop(),e.data("hnav.move")&&n.show()}).on("click",function(){return i.stop().animate({left:0},"fast",function(){a.hide()}),!1}),n.hover(function(){i.stop().animate({left:e.width()-e.data("hnav.liw")-10},2e3,function(){n.hide()})},function(){i.stop(),"0px"!=i.css("left")&&a.show()}).on("click",function(){return i.stop().animate({left:e.width()-e.data("hnav.liw")-10},"fast",function(){n.hide()}),!1})},i.prototype.initHnav=function(){var e,i,a,n,o=this,s=o.$element.text().trim(),l=o.$element.parent(),r=t("#bjui-accordionmenu");e=l.find("> .items > ul.ztree"),i=l.find("> .items > ul.menu-items"),(e.length||i.length)&&(e.length&&(n=e),i.length&&(n=n?n.add(i):i,i.find("a").each(function(){var e=t(this),i=e.data("options");!e.data("icon.init")&&i&&"string"==typeof i&&(i=i.toObj(),i&&i.faicon&&(i.faicon=i.faicon.trim(),i.faicon.startsWith("fa-")&&(i.faicon=i.faicon.substr(3)),e.prepend('<i class="fa fa-'+i.faicon+'"></i>').data("icon.init",!0).attr("title",e.text())))})),r.empty(),n.each(function(e){var i,n,o,l=t(this),d=l.data("faicon"),c=(l.data("faiconClose"),d?d:"dot-circle-o");l.data("tit")&&(s=l.data("tit")),n=e?"collapsed":"",o=e?"":" in",i=FRAG.slidePanel.replaceAll("#id#","bjui-collapse"+e).replaceAll("#title#",s).replaceAll("#righticon#",'<i class="fa fa-angle-down"></i>').replaceAll("#class#",n).replaceAll("#bodyclass#",o),i=c?i.replaceAll("#icon#",'<i class="fa fa-'+c+'"></i>'):i.replaceAll("#icon#",""),a=t(i),a.find("> .panel-collapse > .panel-body").append(l.removeAttr("data-noinit")),r.append(a),e||a.collapse("show")}),t("#bjui-sidebar").initui(),l.addClass("active").data("bjui.slidebar.hnav.panels",r.find("> .panel")).siblings().removeClass("active"))},a=t.fn.slidebar,t.fn.slidebar=e,t.fn.slidebar.Constructor=i,t.fn.basedrag.noConflict=function(){return t.fn.slidebar=a,this},t(document).one(BJUI.eventType.afterInitUI,function(){t("#bjui-leftside").slidebar({minW:150,maxW:700})}),t(document).on("click.bjui.slidebar.data-api",'[data-toggle="slidebar"]',function(i){var a=t(this).parent(),n=t("#bjui-accordionmenu"),o=a.data("bjui.slidebar.hnav.panels");n.find("> .panel").detach(),o&&o.length?(n.append(o),a.addClass("active").siblings().removeClass("active")):e.call(t(this),"initHnav"),i.preventDefault()})}(jQuery),+function(t){"use strict";function e(e){var i=arguments,a=e;return this.each(function(){var n=t(this),s=t.extend({},o.DEFAULTS,n.data(),"object"==typeof e&&e),l=n.data("bjui.contextmenu");l||n.data("bjui.contextmenu",l=new o(this,s)),"string"==typeof a&&t.isFunction(l[a])?([].shift.apply(i),i?l[a].apply(l,i):l[a]()):l.init()})}var i,a,n,o,s;t(function(){var e=function(){i=t('<div id="bjui-contextmenu"></div>').hide(),a=t('<div id="bjui-contextmenuShadow"></div>').hide(),n=[],t("body").append("<!-- contextmenu -->").append(i).append(a)};e()}),o=function(e,i){this.$element=t(e),this.options=i},o.DEFAULTS={id:void 0,shadow:!0,bindings:{},ctrSub:null},o.prototype.init=function(){var t,e=this,i=this.options;i.id&&(n.push({id:i.id,shadow:i.shadow,bindings:i.bindings||{},ctrSub:i.ctrSub}),t=n.length-1,this.$element.on("contextmenu",function(a){return e.display(t,this,a,i),!1}))},o.prototype.display=function(e,o,s){var l,r,d=this,c=n[e],u=BJUI.regional[c.id],h=FRAG[c.id];t.each(u,function(t){h=h.replace("#"+t+"#",u[t])}),i.html(h),t.each(c.bindings,function(e,a){t('[rel="'+e+'"]',i).on("click",function(){d.hide(),a(t(o),t("#bjui-"+c.id))})}),l=s.pageX,r=s.pageY,t(window).width()<l+i.width()&&(l-=i.width()),t(window).height()<r+i.height()&&(r-=i.height()),i.css({left:l,top:r}).show(),c.shadow&&a.css({width:i.width(),height:i.height(),left:l+3,top:r+3}).show(),t(document).one("click",d.hide),t.isFunction(c.ctrSub)&&c.ctrSub(t(o),t("#bjui-"+c.id))},o.prototype.hide=function(){i.hide(),a.hide()},o.prototype.show=function(e){var i=this;e.items&&e.items.length&&i.$element.on("contextmenu",function(a){var n=!0;return e.exclude&&i.$element.find(e.exclude).each(function(){return this==a.target||t(this).find(a.target).length?void(n=!1):void 0}),n?(i.custom(e.items,a),!1):(a.stopPropagation(),!n)})},o.prototype.custom=function(e,n){var o,s,l,r,d,c;i.empty().html("<ul></ul>"),o=this,s=o.options,r=i.find("> ul"),t.each(e,function(e,i){var a="";i.icon&&(a='<i class="fa fa-'+i.icon+'"></i>'),"diver"==i.title?l=t('<li class="diver"></li>'):(l=t('<li><span class="icon">'+a+'</span><span class="title">'+i.title+"</span></li>"),i.func&&"string"==typeof i.func&&(i.func=i.func.toFunc()),i.func&&l.on("click",function(){o.hide(),i.func(o.$element,l)})),l.appendTo(r)}),d=n.pageX,c=n.pageY,t(window).width()<d+i.width()&&(d-=i.width()),t(window).height()<c+i.height()&&(c-=i.height()),i.css({left:d,top:c}).show(),s.shadow&&a.css({width:i.width(),height:i.height(),left:d+3,top:c+3}).show(),t(document).one("click",o.hide)},s=t.fn.contextmenu,t.fn.contextmenu=e,t.fn.contextmenu.Constructor=o,t.fn.contextmenu.noConflict=function(){return t.fn.contextmenu=s,this}}(jQuery),+function(t){"use strict";function e(e){var i=arguments,a=e;return this.each(function(){var n=t(this),o=t.extend({},g.DEFAULTS,"object"==typeof e&&e),s=n.data("bjui.navtab");s||n.data("bjui.navtab",s=new g(this,o)),"string"==typeof a&&t.isFunction(s[a])?([].shift.apply(i),i?s[a].apply(s,i):s[a]()):(s=new g(this,o),s.openTab())})}var i,a,n,o,s,l,r,d,c,u,h,p,f,g,m;t(function(){var e=function(){i=0,o=t("#bjui-navtab"),s=o.find(".navtab-tab"),l=o.find(".navtab-panel"),r=o.find(".tabsLeft"),d=o.find(".tabsRight"),c=o.find(".tabsMore"),u=o.find(".tabsMoreList"),h=s.find("li:first"),p=u.find("li:first"),r.click(function(){t(this).navtab("scrollPrev")}),d.click(function(){t(this).navtab("scrollNext")}),c.click(function(){u.show()}),t(document).on("click.bjui.navtab.switchtab",function(e){var i="I"==e.target.tagName?t(e.target).parent():t(e.target);c[0]!=i[0]&&u.hide()});var e,a;h.navtab("contextmenu",h).click(function(){t(this).navtab("switchTab","main")}).find("> a > span").html(function(t,i){return e=i.replace("#maintab#",BJUI.regional.maintab)}),a=t.extend({},g.DEFAULTS,h.data(),{id:"main",title:e}),h.data("initOptions",a).data("options",a),h.attr("data-url")&&t(document).one(BJUI.eventType.initUI,function(){h.removeAttr("data-url").navtab("reload",a)}),setTimeout(function(){h.navtab("switchTab","main")},50),p.click(function(){t(this).hasClass("active")?u.hide():t(this).navtab("switchTab","main")}).find("> a").html(function(t,e){return e.replace("#maintab#",BJUI.regional.maintab)})};e()}),g=function(e,i){this.$element=t(e),this.options=i,this.tools=this.TOOLS()},g.DEFAULTS={id:void 0,title:"New tab",url:void 0,type:"GET",data:{},loadingmask:!0,fresh:!1,autorefresh:!1,onLoad:null,beforeClose:null,onClose:null},g.prototype.TOOLS=function(){var e=this,c={getDefaults:function(){return g.DEFAULTS},getTabs:function(){return s.find("> li")},getPanels:function(){return l.find("> div")},getMoreLi:function(){return u.find("> li")},getTab:function(t){var e=this.indexTabId(t);return e>=0?this.getTabs().eq(e):void 0},getPanel:function(t){var e=this.indexTabId(t);return e>=0?this.getPanels().eq(e):void 0},getTabsW:function(t,e){return this.tabsW(this.getTabs().slice(t,e))},tabsW:function(e){var i=0;return e.each(function(){i+=t(this).outerWidth(!0)}),i},indexTabId:function(e){if(!e)return-1;var i=-1;return this.getTabs().each(function(a){return t(this).data("initOptions").id==e?void(i=a):void 0}),i},getLeft:function(){return s.position().left},getScrollBarW:function(){return o.width()-55},visibleStart:function(){var t,e=this.getLeft(),i=0,a=this.getTabs();for(t=0;t<a.size();t++){if(i+e>=0)return t;i+=a.eq(t).outerWidth(!0)}return 0},visibleEnd:function(){var t,e=this.getLeft(),i=0,a=this.getTabs();for(t=0;t<a.size();t++)if(i+=a.eq(t).outerWidth(!0),i+e>this.getScrollBarW())return t;return a.size()},scrollPrev:function(){var t=this.visibleStart();t>0&&this.scrollTab(-this.getTabsW(0,t-1))},scrollNext:function(){var t=this.visibleEnd();t<this.getTabs().size()&&this.scrollTab(-this.getTabsW(0,t+1)+this.getScrollBarW())},scrollTab:function(t){s.animate({left:t},200,function(){e.tools.ctrlScrollBtn()})},scrollCurrent:function(){var t=this.tabsW(this.getTabs()),e=this.getScrollBarW();e>=t?this.scrollTab(0):this.getLeft()<e-t?this.scrollTab(e-t):i<this.visibleStart()?this.scrollTab(-this.getTabsW(0,i)):i>=this.visibleEnd()&&this.scrollTab(e-this.getTabs().eq(i).outerWidth(!0)-this.getTabsW(0,i))},ctrlScrollBtn:function(){var t=this.tabsW(this.getTabs());this.getScrollBarW()>t?(r.hide(),d.hide(),s.parent().removeClass("tabsPageHeaderMargin")):(r.show().removeClass("tabsLeftDisabled"),d.show().removeClass("tabsRightDisabled"),s.parent().addClass("tabsPageHeaderMargin"),this.getLeft()>=0?r.addClass("tabsLeftDisabled"):this.getLeft()<=this.getScrollBarW()-t&&d.addClass("tabsRightDisabled"))},switchTab:function(o){var s=this.getTabs().removeClass("active").eq(o).addClass("active"),l=this.getPanels(),r=l.eq(o),d=e.options.onSwitch?e.options.onSwitch.toFunc():null;s.data("reloadFlag")?(l.hide(),r.show(),e.refresh(s.data("initOptions").id)):(l.hide(),r.find(".bjui-ajax-mask").length?r.show():(r.addClass("fade").removeClass("in").show(),t.support.transition?r.one("bsTransitionEnd",function(){r.addClass("in")}).emulateTransitionEnd(10):r.removeClass("fade"))),this.getMoreLi().removeClass("active").eq(o).addClass("active"),i=o,this.scrollCurrent(),a=s,t.CurrentNavtab=n=r,d&&d.apply(e),r.trigger("bjui.navtab.switch")},closeTab:function(t,a){var n,o=this.getTabs().eq(t),s=this.getMoreLi().eq(t),l=this.getPanels().eq(t),r=o.data("options"),d=r.beforeClose?r.beforeClose.toFunc():null,c=r.onClose?r.onClose.toFunc():null,u=!0;return d&&(u=d.apply(e,[l])),u?(o.remove(),s.remove(),l.trigger(BJUI.eventType.beforeCloseNavtab).remove(),f&&clearInterval(f),c&&c.apply(e),i>=t&&i--,a&&(n=this.indexTabId(a),n>0&&(i=n)),this.scrollCurrent(),void this.switchTab(i)):void e.tools.switchTab(t)},closeOtherTab:function(e){e=e||i,this.getTabs().each(function(i){i>0&&e!=i&&t(this).find("> .close").trigger("click")})},loadUrlCallback:function(t){t.find(":button.btn-close").click(function(){e.closeCurrentTab()})},reload:function(t,i){var a,n;i=i||t.data("reloadFlag"),a=t.data("options"),i&&(t.data("reloadFlag",!1),n=e.tools.getPanel(a.id),t.hasClass("external")?e.openExternal(a.url,n):e.tools.reloadTab(n,a))},reloadTab:function(t,i){var a=i.onLoad?i.onLoad.toFunc():null,n=i.autorefresh&&(isNaN(String(i.autorefresh))?15:i.autorefresh);t.trigger(BJUI.eventType.beforeLoadNavtab).ajaxUrl({type:i.type||"GET",url:i.url,data:i.data||{},loadingmask:i.loadingmask,callback:function(){e.tools.loadUrlCallback(t),a&&a.apply(e,[t]),f&&clearInterval(f),n&&(f=setInterval(function(){t.navtab("refresh")},1e3*n)),BJUI.ui.clientPaging&&t.data("bjui.clientPaging")&&t.pagination("setPagingAndOrderby",t)}})}};return c},g.prototype.contextmenu=function(t){var e=this;t.contextmenu({id:"navtabCM",bindings:{reload:function(t){e.refresh(t.data("initOptions").id)},closeCurrent:function(t){var i=t.data("initOptions").id;i?e.closeTab(i):e.closeCurrentTab()},closeOther:function(t){if(0==t.index())e.closeAllTab();else{var a=e.tools.indexTabId(t.data("initOptions").id);e.tools.closeOtherTab(a>0?a:i)}},closeAll:function(){e.closeAllTab()}},ctrSub:function(t,i){var a=i.find('[rel="reload"]'),n=i.find('[rel="closeCurrent"]');i.find('[rel="closeOther"]'),i.find('[rel="closeAll"]'),e.tools.getTabs(),0==t.index()&&(n.addClass("disabled"),t.data("url")||a.addClass("disabled"))}})},g.prototype.openTab=function(){var e,a,n,o,r,d,c,h=this,p=this.$element,f=this.options,g=this.tools;return!f.url&&f.href&&(f.url=f.href),f.url?(f.url=decodeURI(f.url).replacePlh(p.closest(".unitBox")),f.url.isFinishedTm()?(f.url=encodeURI(f.url),e=f.id?g.indexTabId(f.id):i,f.id||BJUI.ui.overwriteHomeTab||0!=e||(f.id="navtab",e=-1),e>=0?(f.id||delete f.id,a=g.getTabs().eq(e),n=g.getPanels().eq(e),o=a.data("initOptions"),r=t.extend({},o,f),(o.fresh||f.fresh||o.url!=f.url)&&h.reload(r),i=e):(d='<li><a href="javascript:" title="#title#"><span>#title#</span></a><span class="close">&times;</span></li>',a=t(d.replaceAll("#title#",f.title)),n=t('<div class="navtabPage unitBox"></div>'),c=t('<li><a href="javascript:" title="#title#">#title#</a></li>'.replaceAll("#title#",f.title)),a.appendTo(s),n.appendTo(l),c.appendTo(u),a.data("options",f).data("initOptions",f),f.external||f.url&&f.url.isExternalUrl()?(a.addClass("external"),this.openExternal(f.url,n)):(a.removeClass("external"),g.reloadTab(n,f)),i=g.getTabs().length-1,this.contextmenu(a),a.on("click",function(e){var i=t(e.target);if(i.hasClass("close"))h.closeTab(f.id);else{if(i.closest("li").hasClass("active"))return!1;h.switchTab(f.id)}}),c.on("click",function(){h.switchTab(f.id)})),g.switchTab(i),void g.scrollCurrent()):(p.alertmsg("error",f.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("Navtab Plugin: The new navtab's url is incorrect, url: "+f.url))):void BJUI.debug("Navtab Plugin: Error trying to open a navtab, url is undefined!")},g.prototype.closeTab=function(t){var e=this.tools.indexTabId(t);e>0&&this.tools.closeTab(e)},g.prototype.closeCurrentTab=function(t){i>0&&this.tools.closeTab(i,t)},g.prototype.closeAllTab=function(){this.tools.getTabs().find("> .close").each(function(){t(this).trigger("click")})},g.prototype.reloadFlag=function(t){var e,a,n=t.split(",");for(e=0;e<n.length;e++)a=this.tools.getTab(n[e].trim()),a&&(this.tools.indexTabId(n[e])==i?this.tools.reload(a,!0):a.data("reloadFlag",!0))},g.prototype.switchTab=function(t){var e=this.tools.indexTabId(t);this.tools.switchTab(e)},g.prototype.scrollPrev=function(){this.tools.scrollPrev()},g.prototype.scrollNext=function(){this.tools.scrollNext()},g.prototype.refresh=function(t){var e,i;e=t?"string"==typeof t?this.tools.getTab(t):t:a,e&&e.length&&(i=this.tools.getPanel(e.data("initOptions").id),i.removeData("bjui.clientPaging"),this.reload(e.data("initOptions")))},g.prototype.reload=function(e,a){var n,o,s,l=this,r=t.extend({},"object"==typeof e&&e),d=r.id?this.tools.getTab(r.id):this.tools.getTabs().eq(i);d&&(n=d.data("initOptions")||{},o=t.extend({},n,r),s=function(){n.title!=o.title&&d.find("> a").attr("title",o.title).find("> span").html(o.title),a||d.data("initOptions",o),d.data("options",o),l.tools.reload(d,!0)},r.reloadWarn?this.$element.alertmsg("confirm",r.reloadWarn,{okCall:function(){s()}}):s())},g.prototype.reloadForm=function(e,a){var n,o,s,l,r,d,c,u=t.extend({},"object"==typeof a&&a);if("string"==typeof a?(n=this.tools.getTab(a),o=this.tools.getPanel(a)):(n=u.id?this.tools.getTab(u.id):this.tools.getTabs().eq(i),o=u.id?this.tools.getPanel(u.id):this.tools.getPanels().eq(i)),n&&o){if(!n.hasClass("external")&&(s=o.find("#pagerForm"),l={},r={},s.attr("action")&&(u.url=s.attr("action")),s&&s.length)){if(r=s.serializeJson(),a&&a.type||(u.type=s.attr("method")||"POST"),e){d=BJUI.pageInfo;for(c in d)l[d[c]]=r[d[c]]}else l=r;u.data=t.extend({},u.data||{},l)}this.reload(u,!0)}},g.prototype.getCurrentPanel=function(){return this.tools.getPanels().eq(i)},g.prototype.checkTimeout=function(){var t=JSON.parse(n.html());t&&t[BJUI.keys.statusCode]==BJUI.statusCode.timeout&&this.closeCurrentTab()},g.prototype.openExternal=function(t,e){var i=e.closest(".navtab-panel").height();e.html(FRAG.externalFrag.replaceAll("{url}",t).replaceAll("{height}",i+"px"))},m=t.fn.navtab,t.fn.navtab=e,t.fn.navtab.Constructor=g,t.fn.navtab.noConflict=function(){return t.fn.navtab=m,this},t(document).on("click.bjui.navtab.data-api",'[data-toggle="navtab"]',function(i){var a=t(this),n=a.attr("href"),o=a.data(),s=o.options;s&&("string"==typeof s&&(s=s.toObj()),"object"==typeof s&&t.extend(o,s)),o.title||(o.title=a.text()),n&&!o.url&&(o.url=n),e.call(a,o),i.preventDefault()})}(jQuery),+function(t){"use strict";function e(e){var i=arguments,a=e;return this.each(function(){var n=t(this),o=t.extend({},s.DEFAULTS,"object"==typeof e&&e),l=n.data("bjui.dialog");l||n.data("bjui.dialog",l=new s(this,o)),"string"==typeof a&&t.isFunction(l[a])?([].shift.apply(i),i?l[a].apply(l,i):l[a]()):(l=new s(this,o),l.open())})}var i,a,n,o,s,l;t(function(){var e=function(){i=t("#bjui-resizable"),n="dialogShadow",o=s.ZINDEX,t("body").append("<!-- dialog resizable -->").append(FRAG.resizable)};e()}),s=function(e,i){this.$element=t(e),this.options=i,this.tools=this.TOOLS()},s.DEFAULTS={id:"dialog",title:"New Dialog",url:void 0,type:"GET",data:{},loadingmask:!0,width:500,height:300,minW:65,minH:40,max:!1,mask:!1,resizable:!0,drawable:!0,maxable:!0,minable:!0,fresh:!1,onLoad:null,beforeClose:null,onClose:null},s.ZINDEX=30,s.prototype.TOOLS=function(){var e=this,i={getDefaults:function(){return s.DEFAULTS},init:function(i){var a=e.options.width>e.options.minW?e.options.width:e.options.minW,o=e.options.height>e.options.minH?e.options.height:e.options.minH,s=t(window).width(),l=t(window).height(),r=e.options.max?0:(l-o)/2;a>s&&(a=s),o>l&&(o=l),i.height(o).width(a).show().css({left:(s-a)/2,top:0,opacity:.1}).animate({top:r>0?r:0,opacity:1}).addClass(n).find("> .dialogContent").height(o-t("> .dialogHeader",i).outerHeight()-6),t("body").find("> .bjui-dialog-container").not(i).removeClass(n)},reload:function(i,a){var n,o,s=i.find("> .dialogContent");a=a||i.data("initOptions"),n=a.onLoad?a.onLoad.toFunc():null,i.trigger(BJUI.eventType.beforeLoadDialog),a.url?s.ajaxUrl({type:a.type||"GET",url:a.url,data:a.data||{},loadingmask:a.loadingmask,callback:function(){n&&n.apply(e,[i]),BJUI.ui.clientPaging&&i.data("bjui.clientPaging")&&i.pagination("setPagingAndOrderby",i)}}):a.target&&(o=t(a.target).html()||i.data("bjui.dialog.target"),t(a.target).empty(),i.data("bjui.dialog.target",o),s.trigger(BJUI.eventType.beforeAjaxLoad).html(o).initui(),n&&n.apply(e,[i]))},resizeContent:function(e,i,a){var n=e.find("> .dialogContent");n.css({width:i-12,height:a-e.find("> .dialogHeader").outerHeight()-6}).resizePageH(),t(window).trigger(BJUI.eventType.resizeGrid)}};return i},s.prototype.open=function(){var e,i,n,s=this,l=s.options,r=t("body"),d=r.data(l.id);if(l.target&&t(l.target).length)l.url=void 0;else{if(!l.url&&l.href&&(l.url=l.href),!l.url)return void BJUI.debug("Dialog Plugin: Error trying to open a dialog, url is undefined!");if(l.url=decodeURI(l.url).replacePlh(s.$element.closest(".unitBox")),!l.url.isFinishedTm())return s.$element.alertmsg("error",l.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("Dialog Plugin: The new dialog's url is incorrect, url: "+l.url);l.url=encodeURI(l.url)}d?(e=d.data("initOptions")||l,this.switchDialog(d),d.is(":hidden")&&d.show(),(e.fresh||l.fresh||!e.url||e.url!=l.url)&&(s.reload(l),d.data("initOptions",l))):(i=BJUI.regional.dialog,n=FRAG.dialog.replace("#close#",i.close).replace("#maximize#",i.maximize).replace("#restore#",i.restore).replace("#minimize#",i.minimize).replace("#title#",i.title),d=t(n).data("options",l).data("initOptions",l).css("zIndex",o+=1).hide().appendTo(r),d.find("> .dialogHeader > h1 > span.title").html(l.title),this.tools.init(d),l.maxable?d.find("a.maximize").show():d.find("a.maximize").hide(),l.minable?d.find("a.minimize").show():d.find("a.minimize").hide(),l.max&&s.maxsize(d),l.mask?this.addMask(d):l.minable&&t.fn.taskbar&&this.$element.taskbar({id:l.id,title:l.title}),d.on("click",function(e){t(e.target).data("bjui.dialog")||a&&a[0]!=d[0]&&s.switchDialog(d)}).on("click",".btn-close",function(t){s.close(d),t.preventDefault()}).on("click",".dialogHeader > a",function(e){var i=t(this);i.hasClass("close")&&s.close(d),i.hasClass("minimize")&&s.minimize(d),i.hasClass("maximize")&&(s.switchDialog(d),s.maxsize(d)),i.hasClass("restore")&&s.restore(d),e.preventDefault(),e.stopPropagation()}).on("dblclick",".dialogHeader > h1",function(){l.maxable&&(d.find("> .dialogHeader > a.restore").is(":hidden")?d.find("a.maximize").trigger("click"):d.find("> .dialogHeader > a.restore").trigger("click"))}).on("mousedown.bjui.dialog.drag",".dialogHeader > h1",function(e){s.switchDialog(d),l.drawable&&!d.data("max")&&(d.data("bjui.dialog.task",!0),setTimeout(t.proxy(function(){d.data("bjui.dialog.task")&&s.drag(e,d)},s),150),e.preventDefault())}).on("mouseup.bjui.dialog.drag",".dialogHeader > h1",function(){d.data("bjui.dialog.task",!1)}).on("mousedown.bjui.dialog.resize",'div[class^="resizable"]',function(e){if(l.drawable&&!d.data("max")){var i=t(this);s.switchDialog(d),s.resizeInit(e,t("#bjui-resizable"),d,i),i.show(),e.preventDefault()}}).on("mouseup.bjui.dialog.resize",'div[class^="resizable"]',function(t){t.preventDefault()}),r.data(l.id,d),this.tools.reload(d,l)),t.CurrentDialog=a=d},s.prototype.addMask=function(e){var i=e.data("bjui.dialog.mask");e.wrap('<div style="z-index:'+o+'" class="bjui-dialog-wrap"></div>'),e.find("> .dialogHeader > a.minimize").hide(),i&&i.length||(i=t(FRAG.dialogMask),i.css("zIndex",1).show().insertBefore(e),e.data("bjui.dialog.mask",i))},s.prototype.refresh=function(e){var i,n,o;if(e&&"string"==typeof e)for(i=e.split(","),n=0;n<i.length;n++)o=t("body").data(i[n].trim()),o&&(o.removeData("bjui.clientPaging"),this.tools.reload(o));else a.removeData("bjui.clientPaging"),this.tools.reload(a)},s.prototype.reload=function(e,i){var a,n,o,s=this,l=t.extend({},"object"==typeof e&&e),r=l.id&&t("body").data(l.id)||s.getCurrent();r&&r.length&&(a=r.data("initOptions"),n=t.extend({},a,l),o=function(){var e=r.find("> .dialogContent");a.width!=n.width&&(n.max?(r.width(n.width),e.width(n.width)):r.animate({width:n.width},"normal",function(){e.width(n.width)})),a.height!=n.height&&(n.max?(r.height(n.height),e.height(n.height-r.find("> .dialogHeader").outerHeight()-6)):r.animate({height:n.height},"normal",function(){e.height(n.height-r.find("> .dialogHeader").outerHeight()-6).resizePageH()})),a.maxable!=n.maxable&&(n.maxable?r.find("a.maximize").show():r.find("a.maximize").hide()),a.minable!=n.minable&&(n.minable?r.find("a.minimize").show():r.find("a.minimize").hide()),a.max!=n.max&&n.max&&setTimeout(s.maxsize(r),10),a.mask!=n.mask&&(n.mask?(s.addMask(r),t.fn.taskbar&&s.$element.taskbar("closeDialog",n.id)):n.minable&&t.fn.taskbar&&s.$element.taskbar({id:n.id,title:n.title})),a.title!=n.title&&(r.find("> .dialogHeader > h1 > span.title").html(n.title),r.taskbar("changeTitle",n.id,n.title)),r.data("options",n),i||r.data("initOptions",n),s.tools.reload(r,n)},n.reloadWarn?r.alertmsg("confirm",n.reloadWarn,{okCall:function(){o()}}):o())},s.prototype.reloadForm=function(e,i){var a,n,o,s,l,r,d;if("string"==typeof i?(a=t("body").data(i),n=a.data("options")):"object"==typeof i&&(a=i.id&&t("body").data(i.id)||this.getCurrent()),a){if("object"==typeof i&&(i.title&&a.find("> .dialogHeader > h1 > span.title").html(i.title),n=t.extend({},i,a.data("options"))),o=a.find("#pagerForm"),s={},l={},o.attr("action")&&(n.url=o.attr("action")),o&&o.length){if(l=o.serializeJson(),i&&i.type||(n.type=o.attr("method")||"POST"),e){r=BJUI.pageInfo;for(d in r)s[r[d]]=l[r[d]]}else s=l;n.data=t.extend({},n.data||{},s)}this.reload(n,!0)}},s.prototype.getCurrent=function(){return a},s.prototype.switchDialog=function(e){var i,o=e.css("zIndex");a&&a!=e&&(i=a.css("zIndex"),a.css("zIndex",o),e.css("zIndex",i),t.CurrentDialog=a=e,t.fn.taskbar&&this.$element.taskbar("switchTask",e.data("options").id)),e.addClass(n),t("body").find("> .bjui-dialog-container").not(e).removeClass(n)},s.prototype.close=function(e){var i=this,n="string"==typeof e?t("body").data(e):e,l=n.data("bjui.dialog.mask"),r=n.data("options"),d=n.data("bjui.dialog.target"),c=r.beforeClose?r.beforeClose.toFunc():null,u=r.onClose?r.onClose.toFunc():null,h=!0;if(n&&r){if(c&&(h=c.apply(i,[n])),!h)return void i.switchDialog(n);r.target&&d&&t(r.target).html(d),l&&l.length?(l.remove(),n.unwrap()):t.fn.taskbar&&this.$element.taskbar("closeDialog",r.id),n.animate({top:-n.outerHeight(),opacity:.1},"normal",function(){var e,l;t("body").removeData(r.id),n.trigger(BJUI.eventType.beforeCloseDialog).remove(),u&&u.apply(i),e=t("body").find(".bjui-dialog-container"),l=void 0,e.length?l=i.$element.getMaxIndexObj(e):(o=s.ZINDEX,a=null),l&&l.is(":visible")&&i.switchDialog(l)})}},s.prototype.closeCurrent=function(){this.close(a)},s.prototype.checkTimeout=function(){var t=a.find("> .dialogContent"),e=JSON.parse(t.html());e&&e[BJUI.keys.statusCode]==BJUI.statusCode.timeout&&this.closeCurrent()},s.prototype.maxsize=function(e){var i,a;e.data("original",{top:e.css("top"),left:e.css("left"),width:e.css("width"),height:e.css("height")}).data("max",!0),e.find("> .dialogHeader > a.maximize").hide(),e.find("> .dialogHeader > a.restore").show(),i=t(window).width(),a=t(window).height()-t("#bjui-taskbar").height()-1,e.css({top:0,left:0,width:i,height:a}),this.tools.resizeContent(e,i,a)},s.prototype.restore=function(t){var e=t.data("original"),i=parseInt(e.width),a=parseInt(e.height);t.css({top:e.top,left:e.left,width:i,height:a}),this.tools.resizeContent(t,i,a),t.find("> .dialogHeader > a.maximize").show(),t.find("> .dialogHeader > a.restore").hide(),t.data("max",!1)},s.prototype.minimize=function(e){e.hide(),t.fn.taskbar&&this.$element.taskbar("minimize",e)},s.prototype.drag=function(e,i){t("#bjui-dialogProxy"),i.find("> .dialogContent").css("opacity",".3"),i.basedrag({selector:"> .dialogHeader",stop:function(){i.css({left:i.css("left"),top:i.css("top")}).find("> .dialogContent").css("opacity",1)},event:e,nounbind:!0})},s.prototype.resizeDialog=function(e,i,a){var n,o,s=parseInt(e.css("left")),l=parseInt(e.css("top")),r=parseInt(e.css("height")),d=parseInt(e.css("width"));n="n"==a||"nw"==a?parseInt(i.css("top"))-l:r-parseInt(i.css("height")),0>l&&(l=0),i.css({top:l,left:s,width:d+2,height:r+1}).find("> .dialogContent").css("width",d-10),"w"!=a&&"e"!=a&&(o=i.find("> .dialogContent"),o.css({height:r-i.find("> .dialogHeader").outerHeight()-6}).resizePageH()),t(window).trigger(BJUI.eventType.resizeGrid)},s.prototype.resizeInit=function(e,i,a,n){var o=this,s=n.attr("tar");t("body").css("cursor",s+"-resize"),i.css({top:a.css("top"),left:a.css("left"),height:a.outerHeight(),width:a.css("width")}).show(),this.options.dragCurrent||(this.options.dragCurrent={$resizable:i,$dialog:a,target:s,oleft:parseInt(i.css("left"))||0,owidth:parseInt(i.css("width"))||0,otop:parseInt(i.css("top"))||0,oheight:parseInt(i.css("height"))||0,ox:e.pageX||e.screenX,oy:e.pageY||e.clientY},t(document).on("mouseup.bjui.dialog.resize",t.proxy(o.resizeStop,o)),t(document).on("mousemove.bjui.dialog.resize",t.proxy(o.resizeStart,o)))},s.prototype.resizeStart=function(e){var i,a,n,o,s,l,r=this.options.dragCurrent;r&&(e||(e=window.event),i=(e.pageX||e.screenX)-r.ox,a=(e.pageY||e.clientY)-r.oy,n=r.$dialog.data("bjui.dialog.mask"),(n&&n.length||!((e.pageY||e.clientY)<=0||(e.pageY||e.clientY)>=t(window).height()-r.$dialog.find("> .dialogHeader").outerHeight()))&&(o=r.target,s=r.owidth,l=r.oheight,"n"!=o&&"s"!=o&&(s+=o.indexOf("w")>=0?-i:i),s>=this.options.minW&&(o.indexOf("w")>=0&&r.$resizable.css("left",r.oleft+i),"n"!=o&&"s"!=o&&r.$resizable.css("width",s)),
"w"!=o&&"e"!=o&&(l+=o.indexOf("n")>=0?-a:a),l>=this.options.minH&&(o.indexOf("n")>=0&&r.$resizable.css("top",r.otop+a),"w"!=o&&"e"!=o&&r.$resizable.css("height",l))))},s.prototype.resizeStop=function(){var e=this.options.dragCurrent;return e?(t(document).off("mouseup.bjui.dialog.resize"),t(document).off("mousemove.bjui.dialog.resize"),this.options.dragCurrent=null,this.resizeDialog(e.$resizable,e.$dialog,e.target),t("body").css("cursor",""),void e.$resizable.hide()):!1},l=t.fn.dialog,t.fn.dialog=e,t.fn.dialog.Constructor=s,t.fn.dialog.noConflict=function(){return t.fn.dialog=l,this},t(document).on("click.bjui.dialog.data-api",'[data-toggle="dialog"]',function(i){var a=t(this),n=a.attr("href"),o=a.data(),s=o.options;s&&("string"==typeof s&&(s=s.toObj()),"object"==typeof s&&t.extend(o,s)),o.title||(o.title=a.text()),n&&!o.url&&(o.url=n),e.call(a,o),i.preventDefault()})}(jQuery),+function(t){"use strict";function e(e){var i=arguments,a=e;return this.each(function(){var n=t(this),o=t.extend({},u.DEFAULTS,n.data(),"object"==typeof e&&e),s=n.data("bjui.taskbar");s?s.options.id!=o.id&&n.data("bjui.taskbar",s=new u(this,o)):n.data("bjui.taskbar",s=new u(this,o)),"string"==typeof a&&t.isFunction(s[a])?([].shift.apply(i),i?s[a].apply(s,i):s[a]()):s.init()})}var i,a,n,o,s,l,r,d,c,u,h;t(function(){var e=function(){i=t("#bjui-resizable"),a=t(FRAG.taskbar),n=a.find(".taskbarContent"),o=n.find("> ul"),s=a.find(".taskbarLeft"),l=a.find(".taskbarRight"),r="disabled",d="selected",c="taskbarMargin",t("body").append("<!-- dialog task bar -->").append(a),s.click(function(){t(this).taskbar("scrollLeft")}),l.click(function(){t(this).taskbar("scrollRight")})};e()}),u=function(e,i){this.$element=t(e),this.$task=null,this.options=i,this.tools=this.TOOLS()},u.DEFAULTS={id:void 0,title:void 0},u.prototype.init=function(){var e,i=this,a=o.find("#"+this.options.id);this.show(),a.length?a.find("> div > span.title").html(this.options.title):(e='<li id="#taskid#"><div class="taskbutton"><span><i class="fa fa-th-large"></i></span> <span class="title">#title#</span></div><div class="close"><i class="fa fa-times-circle"></i></div></li>',a=t(e.replace("#taskid#",this.options.id).replace("#title#",this.options.title)),a.appendTo(o)),this.contextmenu(a),this.switchTask(a),this.tools.scrollTask(a),a.click(function(e){if(t(e.target).closest("div").hasClass("close")||t(e.target).hasClass("close"))a.dialog("close",i.options.id);else{var n=t("body").data(i.options.id);a.hasClass("selected")?n.find(".dialogHeader a.minimize").trigger("click"):n.is(":hidden")?i.restoreDialog(n):(n.trigger("click"),a.addClass(d)),i.scrollCurrent(a)}return!1})},u.prototype.TOOLS=function(){var e={scrollCurrent:function(){var t,e,i,a=this.tasksW(this.getTasks());a>this.getTaskBarW()?(t=this,e=o.find("> li:last-child"),i=this.getTaskBarW()-e.position().left-e.outerWidth(!0),o.animate({left:i},200,function(){t.ctrlScrollBtn()})):this.ctrlScrollBtn()},getTaskBarW:function(){return n.width()-(s.is(":hidden")?s.width()+2:0)-(l.is(":hidden")?l.width()+2:0)},scrollTask:function(t){var e,i=this;t.position().left+this.getLeft()+t.outerWidth()>this.getBarWidth()?(e=this.getTaskBarW()-t.position().left-t.outerWidth(!0)-2,o.animate({left:e},200,function(){i.ctrlScrollBtn()})):t.position().left+this.getLeft()<0&&(e=this.getLeft()-(t.position().left+this.getLeft()),o.animate({left:e},200,function(){i.ctrlScrollBtn()}))},ctrlScrollBtn:function(){var t=this.tasksW(this.getTasks());this.getTaskBarW()>t?(n.removeClass(c),l.hide(),s.hide(),this.getTasks().eq(0).length&&this.scrollTask(this.getTasks().eq(0))):(n.addClass(c),l.show().removeClass(r),s.show().removeClass(r),this.getLeft()>=0&&s.addClass(r),this.getLeft()<=this.getTaskBarW()-t&&l.addClass(r))},getLeft:function(){return o.position().left},visibleStart:function(){var t,e=this.getLeft(),i=this.getTasks();for(t=0;t<i.size();t++)if(i.eq(t).position().left+i.eq(t).outerWidth(!0)+e>=0)return i.eq(t);return i.eq(0)},visibleEnd:function(){var t,e=this.getLeft(),i=this.getTasks();for(t=0;t<i.size();t++)if(i.eq(t).position().left+i.eq(t).outerWidth(!0)+e>this.getBarWidth())return i.eq(t);return i.eq(i.size()-1)},getTasks:function(){return o.find("> li")},tasksW:function(e){var i=0;return e.each(function(){i+=t(this).outerWidth(!0)}),i},getBarWidth:function(){return a.innerWidth()},getCurrent:function(){return o.find("li."+d)}};return e},u.prototype.contextmenu=function(e){var i=this;e.contextmenu({id:"dialogCM",bindings:{reload:function(t){t.dialog("refresh",i.options.id)},closeCurrent:function(t){var e=t.isTag("li")?t:i.tools.getCurrent();e.find(".close").trigger("click")},closeOther:function(e){var i=o.find("> li").not(e);i.each(function(){t(this).find(".close").trigger("click")})},closeAll:function(){var e=i.tools.getTasks();e.each(function(){t(this).find(".close").trigger("click")})}},ctrSub:function(t,e){var a=e.find('[rel="closeCurrent"]'),n=e.find('[rel="closeOther"]');i.tools.getCurrent().length?1==i.tools.getTasks().size()&&n.addClass(r):(a.addClass(r),n.addClass(r))}})},u.prototype.closeDialog=function(t){var e="string"==typeof t?this.getTask(t):t;e&&e.length&&(e.remove(),0==this.tools.getTasks().size()&&this.hide(),this.tools.scrollCurrent(),this.$element.removeData("bjui.taskbar"))},u.prototype.minimize=function(e){var a=this,n="string"==typeof e?t("body").data("dialog"):e,o=this.getTask(n.data("options").id);i.css({top:n.css("top"),left:n.css("left"),height:n.css("height"),width:n.css("width")}).show().animate({top:t(window).height()-60,left:o.position().left,width:o.outerWidth(),height:o.outerHeight()},250,function(){t(this).hide(),a.inactive(o)})},u.prototype.restoreDialog=function(e){var a=this.getTask(e.data("options").id);i.css({top:t(window).height()-60,left:a.position().left,height:a.outerHeight(),width:a.outerWidth()}).show().animate({top:e.css("top"),left:e.css("left"),width:e.css("width"),height:e.css("height")},250,function(){t(this).hide(),e.show()}),this.switchTask(a)},u.prototype.inactive=function(t){var e="string"==typeof t?this.getTask(t):t;e.removeClass(d)},u.prototype.scrollLeft=function(){var t=this.tools.visibleStart();this.tools.scrollTask(t)},u.prototype.scrollRight=function(){var t=this.tools.visibleEnd();this.tools.scrollTask(t)},u.prototype.scrollCurrent=function(t){this.tools.scrollTask(t)},u.prototype.switchTask=function(t){this.tools.getCurrent().removeClass(d);var e="string"==typeof t?this.getTask(t):t;e.addClass(d)},u.prototype.getTask=function(t){return o.find("#"+t)},u.prototype.changeTitle=function(t,e){var i=this.getTask(t);i&&e&&i.find(".title").html(e)},u.prototype.show=function(){a.is(":hidden")&&a.show().animate({bottom:0},500)},u.prototype.hide=function(){a.is(":visible")&&a.animate({bottom:-50},500,function(){a.hide()})},h=t.fn.taskbar,t.fn.taskbar=e,t.fn.taskbar.Constructor=u,t.fn.taskbar.noConflict=function(){return t.fn.taskbar=h,this}}(jQuery),+function(t){"use strict";function e(e){var i=arguments,a=e;return this.each(function(){var o=t(this),s=t.extend({},n.DEFAULTS,o.data(),"object"==typeof e&&e),l=o.data("bjui.bjuiajax");l||o.data("bjui.bjuiajax",l=new n(this,s)),"string"==typeof a&&t.isFunction(l[a])&&([].shift.apply(i),i?l[a].apply(l,i):l[a]())})}var i,a,n=function(e,i){this.$element=t(e),this.options=i,this.tools=this.TOOLS()};n.DEFAULTS={reload:!0,loadingmask:!0},n.NAVTAB="navtab",n.prototype.TOOLS=function(){var e=this,i={getPagerForm:function(e,i){var a,n,o=e.isTag("form")?e[0]:e.find("#pagerForm:first")[0],s=t.extend({},BJUI.pageInfo);if(e.data("bjui.clientPaging")&&(i=t.extend({},e.data("bjui.clientPaging"),i),e.data("bjui.clientPaging",i)),o)for(a in s)n="",i&&i[a]&&(n=i[a]),o[s[a]]?n&&(o[s[a]].value=n):t('<input type="hidden" name="'+s[a]+'" value="'+n+'">').appendTo(t(o));return o},getTarget:function(){return e.$element.closest(".navtab-panel").length?n.NAVTAB:"dialog"}};return i},n.prototype.ajaxForm=function(e){var i,a,n=this,o=this.$element,s=e&&e.callback,l=o.attr("enctype");e=t.extend({},n.options,"object"==typeof e&&e),s&&(s=s.toFunc()),i=function(e){s?s.apply(n,[e,o]):t.proxy(n.ajaxCallback(e),n)},a=function(){var a={loadingmask:e.loadingmask,type:o.attr("method"),url:o.attr("action"),callback:i,error:t.proxy(n.ajaxError,n)};l&&"multipart/form-data"==l?window.FormData?t.extend(a,{data:new FormData(o[0]),contentType:!1,processData:!1}):t.extend(a,{data:o.serializeArray(),files:o.find(":file"),iframe:!0,processData:!1}):t.extend(a,{data:o.serializeArray()}),o.doAjax(a)},e.confirmMsg?o.alertmsg("confirm",e.confirmMsg,{okCall:a}):a()},n.prototype.ajaxDone=function(t){var e=this.$element;t[BJUI.keys.statusCode]==BJUI.statusCode.error?t[BJUI.keys.message]&&e.alertmsg("error",t[BJUI.keys.message]):t[BJUI.keys.statusCode]==BJUI.statusCode.timeout?(e.alertmsg("info",t[BJUI.keys.message]||FRAG.sessionTimout),BJUI.loadLogin()):t[BJUI.keys.message]&&e.alertmsg("correct",t[BJUI.keys.message])},n.prototype.ajaxError=function(t,e,i){var a=t.responseText.trim();a.startsWith("{")?this.ajaxDone(a.toObj()):this.$element.alertmsg("error","<div>Http status: "+t.status+" "+t.statusText+"</div><div>ajaxOptions: "+e+" </div><div>thrownError: "+i+" </div><div>"+a+"</div>")},n.prototype.ajaxCallback=function(t){var e=this,i=e.$element,a=i.closest(".bjui-layout");e.ajaxDone(t),t[BJUI.keys.statusCode]==BJUI.statusCode.ok&&(a&&a.length?e.divCallback(t,a):e.tools.getTarget()==n.NAVTAB?e.navtabCallback(t):e.dialogCallback(t))},n.prototype.divCallback=function(t,e){var i,a,n,o,s=this;t.tabid&&setTimeout(function(){s.$element.navtab("reloadFlag",t.tabid)},100),t.dialogid&&setTimeout(function(){s.$element.dialog("refresh",t.dialogid)},100),t.divid&&setTimeout(function(){s.$element.bjuiajax("refreshDiv",t.divid)},100),s.options.reload&&(i=s.tools.getPagerForm(e),a=null,n=null,i?(a=i.attr("action"),n=i.attr("method")||"GET"):(a=e.data("url"),n=e.data("type")||"GET"),a&&e.ajaxUrl({url:a,type:n})),s.options.reloadNavtab&&setTimeout(function(){s.$element.navtab("refresh")},100),t.forward&&(o=function(){e.ajaxUrl({url:t.forward})},t.forwardConfirm?s.$element.alertmsg("confirm",t.forwardConfirm,{okCall:function(){o()}}):o())},n.prototype.navtabCallback=function(e){var i,a=this;e.tabid&&setTimeout(function(){a.$element.navtab("reloadFlag",e.tabid)},100),e.dialogid&&setTimeout(function(){a.$element.dialog("refresh",e.dialogid)},100),e.divid&&setTimeout(function(){a.$element.bjuiajax("refreshDiv",e.divid)},100),e.datagrid&&setTimeout(function(){t.each(e.datagrid.join(","),function(e,i){t("#"+i.trim()).datagrid("refresh")})},100),e.closeCurrent&&!e.forward?a.$element.navtab("closeCurrentTab"):a.options.reload&&setTimeout(function(){a.$element.navtab("refresh")},100),e.forward&&(i=function(){a.$element.navtab("reload",{url:e.forward})},e.forwardConfirm?a.$element.alertmsg("confirm",e.forwardConfirm,{okCall:function(){i()},cancelCall:function(){e.closeCurrent&&a.$element.navtab("closeCurrentTab")}}):i())},n.prototype.dialogCallback=function(t){var e,i=this;t.tabid&&setTimeout(function(){i.$element.navtab("reloadFlag",t.tabid)},100),t.dialogid&&setTimeout(function(){i.$element.dialog("refresh",t.dialogid)},100),t.divid&&setTimeout(function(){i.$element.bjuiajax("refreshDiv",t.divid)},100),t.closeCurrent&&!t.forward?i.$element.dialog("closeCurrent"):i.options.reload&&setTimeout(function(){i.$element.dialog("refresh")},100),i.options.reloadNavtab&&setTimeout(function(){i.$element.navtab("refresh")},100),t.forward&&(e=function(){i.$element.dialog("reload",{url:t.forward})},t.forwardConfirm?i.$element.alertmsg("confirm",t.forwardConfirm,{okCall:function(){e()}}):e())},n.prototype.pageCallback=function(e,i){var a=this,o=t.extend({},n.DEFAULTS,e),s=i||null,l=null;s&&s.length?(l=a.tools.getPagerForm(s,o),l&&(t.extend(o,t(l).data()),a.reloadDiv(s,{type:t(l).attr("method")||"POST",url:t(l).attr("action"),data:t(l).serializeArray(),loadingmask:o.loadingmask}))):a.tools.getTarget()==n.NAVTAB?(s=t.CurrentNavtab,l=a.tools.getPagerForm(s,o),l&&t.extend(o,t(l).data()),a.$element.navtab("reloadForm",!1,o)):(s=t.CurrentDialog,l=a.tools.getPagerForm(s,o),l&&t.extend(o,t(l).data()),a.$element.dialog("reloadForm",!1,o))},n.prototype.doSearch=function(e){var i,a=this,o=a.$element,s=null,l={pageCurrent:1},r=o.closest(".bjui-layout"),d=e.isValid;return e=t.extend({},n.DEFAULTS,"object"==typeof e&&e),e.url||(e.url=o.attr("action")),e.url?(e.url=decodeURI(e.url).replacePlh(o.closest(".unitBox")),e.url.isFinishedTm()?(e.url=encodeURI(e.url),i=function(){var i,d,c,u;if(r&&r.length){if(s=a.tools.getPagerForm(r,l),i=o.serializeJson(),d={},e.clearQuery){c=BJUI.pageInfo;for(u in c)d[c[u]]=i[c[u]];i=d}a.reloadDiv(r,{type:o.attr("method")||"POST",url:e.url,data:i,loadingmask:e.loadingmask})}else a.tools.getTarget()==n.NAVTAB?(r=t.CurrentNavtab,s=a.tools.getPagerForm(r,l),o.navtab("reloadForm",e.clearQuery,e)):(r=t.CurrentDialog,s=a.tools.getPagerForm(r,l),o.dialog("reloadForm",e.clearQuery,e))},void(d?i():t.validator?o.isValid(function(t){t&&i()}):i())):(o.alertmsg("error",e.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("The submit form action is incorrect: "+e.url))):void BJUI.debug("Error trying to submit form action: action url is undefined!")},n.prototype.doLoad=function(e){var i=this,a=i.$element,o=e.target?t(e.target):null;return e=t.extend({},n.DEFAULTS,"object"==typeof e&&e),e.url?(e.url=decodeURI(e.url).replacePlh(a.closest(".unitBox")),e.url.isFinishedTm()?(e.url=encodeURI(e.url),o&&o.length?void(o&&o.length&&(o.removeData("bjui.clientPaging"),i.reloadDiv(o,e))):void BJUI.debug("Not set loaded 'ajax' content container, like [data-target].")):(a.alertmsg("error",e.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("The ajax link incorrect: "+e.url))):void BJUI.debug("Error trying to open a ajax link: The url is undefined!")},n.prototype.refreshLayout=function(e){var a=this,o=(a.$element,e.target?t(e.target):null);return e=t.extend({},n.DEFAULTS,"object"==typeof e&&e),o&&o.length?void(o&&o.length&&(o.removeData("bjui.clientPaging"),a.reloadDiv(o,t.extend({},o.data("options")||{},e)))):(i&&clearInterval(i),void BJUI.debug("Not set loaded 'ajax' content container, like [data-target]."))},n.prototype.reloadDiv=function(t,e){var a=e.autorefresh&&(isNaN(String(e.autorefresh))?15:e.autorefresh);t.addClass("bjui-layout").data("options",e).ajaxUrl({type:e.type,url:e.url,data:e.data,loadingmask:e.loadingmask,callback:function(){BJUI.ui.clientPaging&&t.data("bjui.clientPaging")&&t.pagination("setPagingAndOrderby",t),e.callback&&e.callback.apply(this,[t]),i&&clearInterval(i),a&&(i=setInterval(function(){t.bjuiajax("refreshLayout",e)},1e3*a))}})},n.prototype.refreshDiv=function(t){var e,i;if(t&&"string"==typeof t)for(e=t.split(","),i=0;i<e.length;i++)this.refreshLayout({target:"#"+e[i]})},n.prototype.doAjax=function(e){var i,a,o=this,s=o.$element;return e=t.extend({},n.DEFAULTS,"object"==typeof e&&e),e.url?(e.url=decodeURI(e.url).replacePlh(s.closest(".unitBox")),e.url.isFinishedTm()?(e.url=encodeURI(e.url),i=e.callback&&e.callback.toFunc(),a=function(){s.doAjax({type:e.type,url:e.url,data:e.data,callback:i?i:t.proxy(function(t){o.ajaxCallback(t)},o)})},void(e.confirmMsg?s.alertmsg("confirm",e.confirmMsg,{okCall:function(){a()}}):a())):(s.alertmsg("error",e.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("The ajax url is incorrect: "+e.url))):void BJUI.debug("Error trying to open a ajax link: url is undefined!")},n.prototype.doExport=function(e){var i,a,o=this,s=o.$element,l=e.target?t(e.target):null;return e.url?(e.url=decodeURI(e.url).replacePlh(s.closest(".unitBox")),e.url.isFinishedTm()?(a=function(){l&&l.length||(l=o.tools.getTarget()==n.NAVTAB?t.CurrentNavtab:t.CurrentDialog),i=o.tools.getPagerForm(l),i&&(e.url=encodeURI(e.url+(-1==e.url.indexOf("?")?"?":"&")+t(i).serialize())),t.fileDownload(e.url,{failCallback:function(t){t.trim().startsWith("{")&&(t=t.toObj()),o.ajaxDone(t)}})},void(e.confirmMsg?s.alertmsg("confirm",e.confirmMsg,{okCall:function(){a()}}):a())):(s.alertmsg("error",e.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("The ajax url is incorrect: "+e.url))):void BJUI.debug("Error trying to open a ajax link: url is undefined!")},n.prototype.doExportChecked=function(e){var i,a=this,o=a.$element,s=e.target?t(e.target):null;return e.url?(e.url=decodeURI(e.url).replacePlh(o.closest(".unitBox")),e.url.isFinishedTm()?(i=function(){var i,o;return e.group?(s&&s.length||(s=a.tools.getTarget()==n.NAVTAB?t.CurrentNavtab:t.CurrentDialog),i=[],o=s.find(":checkbox[name="+e.group+"]:checked"),0==o.length?void a.$element.alertmsg("error",FRAG.alertNotChecked.replace("#notchecked#",BJUI.regional.notchecked)):(o.each(function(){i.push(t(this).val())}),e.url=e.url.setUrlParam(e.idname?e.idname:"ids",i.join(",")),void t.fileDownload(e.url,{failCallback:function(t){t.trim().startsWith("{")&&(t=t.toObj()),a.ajaxDone(t)}}))):void a.$element.alertmsg("error",e.warn||FRAG.alertNoCheckGroup.replace("#nocheckgroup#",BJUI.regional.nocheckgroup))},void(e.confirmMsg?o.alertmsg("confirm",e.confirmMsg,{okCall:function(){i()}}):i())):(o.alertmsg("error",e.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("The ajax url is incorrect: "+e.url))):void BJUI.debug("Error trying to open a export link: url is undefined!")},n.prototype.doAjaxChecked=function(e){var i,a=this,o=a.$element,s=e.target?t(e.target):null;return e=t.extend({},n.DEFAULTS,"object"==typeof e&&e),e.url?(e.url=decodeURI(e.url).replacePlh(o.closest(".unitBox")),e.url.isFinishedTm()?(i=function(){var i,l,r;return e.group?(s&&s.length||(s=a.tools.getTarget()==n.NAVTAB?t.CurrentNavtab:t.CurrentDialog),i=[],l=s.find(":checkbox[name="+e.group+"]:checked"),r=e.callback&&e.callback.toFunc(),0==l.length?void o.alertmsg("error",FRAG.alertNotChecked.replace("#notchecked#",BJUI.regional.notchecked)):(l.each(function(){i.push(t(this).val())}),e.url=e.url.setUrlParam(e.idname?e.idname:"ids",i.join(",")),void o.doAjax({type:e.type,url:e.url,data:e.data,callback:r?r:t.proxy(function(t){a.ajaxCallback(t)},a)}))):void o.alertmsg("error",e.warn||FRAG.alertNoCheckGroup.replace("#nocheckgroup#",BJUI.regional.nocheckgroup))},void(e.confirmMsg?o.alertmsg("confirm",e.confirmMsg,{okCall:function(){i()}}):i())):(o.alertmsg("error",e.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("The ajax url is incorrect: "+e.url))):void BJUI.debug("Error trying to open a del link: url is undefined!")},a=t.fn.bjuiajax,t.fn.bjuiajax=e,t.fn.bjuiajax.Constructor=n,t.fn.bjuiajax.noConflict=function(){return t.fn.bjuiajax=a,this},t(document).on("submit.bjui.bjuiajax.data-api",'form[data-toggle="ajaxform"]',function(i){var a=t(this),n=a.data();e.call(a,"ajaxForm",n),i.preventDefault()}),t(function(){t.validator?t(document).on(BJUI.eventType.initUI,function(i){t(i.target).find('form[data-toggle="ajaxsearch"]').each(function(){var i=t(this),a=i.data();a.isValid=!0,i.validator({valid:function(){e.call(i,"doSearch",a)}})})}):t(document).on("submit.bjui.bjuiajax.data-api",'form[data-toggle="ajaxsearch"]',function(i){var a=t(this),n=a.data();e.call(a,"doSearch",n),i.preventDefault()})}),t(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="reloadsearch"]',function(i){var a,n=t(this),o=n.closest("form");o&&o.length&&(a=o.data(),a.clearQuery=n.data("clearQuery")||!0,e.call(o,"doSearch",a),i.preventDefault())}),t(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="ajaxload"]',function(i){var a=t(this),n=a.data();n.url||(n.url=a.attr("href")),e.call(a,"doLoad",n),i.preventDefault()}),t(document).on(BJUI.eventType.initUI,function(i){var a=t(i.target).find('[data-toggle="autoajaxload"]');a.each(function(){var i=t(this),a=i.data();a.target=this,e.call(i,"doLoad",a)})}),t(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="refreshlayout"]',function(){var i=t(this),a=i.data();e.call(i,"refreshLayout",a)}),t(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="doajax"]',function(i){var a=t(this),n=a.data();n.url||(n.url=a.attr("href")),e.call(a,"doAjax",n),i.preventDefault()}),t(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="doexport"]',function(i){var a=t(this),n=a.data();n.url||(n.url=a.attr("href")),e.call(a,"doExport",n),i.preventDefault()}),t(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="doexportchecked"]',function(i){var a=t(this),n=a.data();n.url||(n.url=a.attr("href")),e.call(a,"doExportChecked",n),i.preventDefault()}),t(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="doajaxchecked"]',function(i){var a=t(this),n=a.data();n.url||(n.url=a.attr("href")),e.call(a,"doAjaxChecked",n),i.preventDefault()})}(jQuery),+function(t){"use strict";function e(e){var i=arguments,a=e;return this.each(function(){var n=t(this),s=t.extend({},o.DEFAULTS,n.data(),"object"==typeof e&&e),l=new o(this,s);"string"==typeof a&&t.isFunction(l[a])&&([].shift.apply(i),i?l[a].apply(l,i):l[a]())})}var i,a,n,o,s;t(function(){var e=function(){i=t(FRAG.alertBoxFrag).hide().html(""),a=t(FRAG.alertBackground).hide().html(""),t("body").append("<!-- alert msg box -->").append(i).append("<!-- alert msg box mask bg -->").append(a)};e()}),o=function(e,i){this.$element=t(e),this.options=i,this.tools=this.TOOLS(),this.clearTime=null},o.DEFAULTS={displayPosition:"topcenter",displayMode:"slide",autoClose:null,alertTimeout:3e3,mask:null,types:{error:"error",info:"info",warn:"warn",correct:"correct",confirm:"confirm"},fas:{error:"fa-times-circle",info:"fa-info-circle",warn:"fa-exclamation-circle",correct:"fa-check-circle",confirm:"fa-question-circle"}},o.prototype.TOOLS=function(){var e=this,o=e.options,s={getTitle:function(t){return o.title||BJUI.regional.alertmsg.title[t]},keydownOk:function(t){return t.which==BJUI.keyCode.ENTER?(t.data.target.trigger("click"),!1):!0},keydownEsc:function(t){t.which==BJUI.keyCode.ESC&&t.data.target.trigger("click")},openPosition:function(){var t=BJUI.alertMsg.displayPosition,e=BJUI.alertMsg.displayMode,a=460,n=i.outerHeight(),s={},l={};switch(t?o.displayPosition&&"topcenter"!=o.displayPosition&&(t=o.displayPosition):t=o.displayPosition,e?o.displayMode&&"silde"!=o.displayMode&&(e=o.displayMode):e=o.displayMode,t){case"topleft":s={top:0-n,left:0,"margin-left":0},l={top:0};break;case"topcenter":s={top:0-n},l={top:0};break;case"topright":s={top:0-n,left:"auto",right:0,"margin-left":0},l={top:0};break;case"middleleft":s={top:"50%",left:0-a,"margin-left":0,"margin-top":0-n/2},l={left:0};break;case"middlecenter":s={top:"0","margin-top":0-n/2},l={top:"50%"};break;case"middleright":s={top:"50%",left:"auto",right:0-a,"margin-top":0-n/2},l={right:0};break;case"bottomleft":s={top:"auto",left:0,bottom:0-n,"margin-left":0},l={bottom:0};break;case"bottomcenter":s={top:"auto",bottom:0-n},l={bottom:0};break;case"bottomright":s={top:"auto",left:"auto",right:0,bottom:0-n,"margin-left":0},l={bottom:0}}"slide"==e?i.css(s).show().animate(l,500):"fade"==e?(s.opacity=.1,i.css(s).css(l).show().animate({opacity:1},500)):i.css(s).css(l).show()},closePosition:function(){var e=BJUI.alertMsg.displayPosition,n=BJUI.alertMsg.displayMode,s=460,l=i.outerHeight(),r={};switch(e?o.displayPosition&&"topcenter"!=o.displayPosition&&(e=o.displayPosition):e=o.displayPosition,n?o.displayMode&&"silde"!=o.displayMode&&(n=o.displayMode):n=o.displayMode,e){case"topleft":r={top:0-l};break;case"topcenter":r={top:0-l};break;case"topright":r={top:0-l};break;case"middleleft":r={left:0-s};break;case"middlecenter":r={top:0-l};break;case"middleright":r={right:0-s};break;case"bottomleft":r={bottom:0-l};break;case"bottomcenter":r={bottom:0-l};break;case"bottomright":r={bottom:0-l}}"slide"==n?i.animate(r,500,function(){a.hide(),t(this).hide().empty()}):"fade"==n?i.animate({opacity:0},500,function(){a.hide(),t(this).hide().empty()}):(i.hide().remove(),a.hide())},open:function(s,l,r){var d,c,u,h,p,f,g=this,m="",b=BJUI.alertMsg.alertTimeout;if(r)for(u=0;u<r.length;u++)h=r[u].call?"callback":"",p=r[u].cls?r[u].cls:"default",f=r[u].cls&&"green"==r[u].cls?"check":"close",m+=FRAG.alertBtnFrag.replace("#btnMsg#",'<i class="fa fa-'+f+'"></i> '+r[u].name).replace("#callback#",h).replace("#class#",p);d=t(FRAG.alertBoxFrag.replace("#type#",s).replace("#fa#",o.fas[s]).replace("#title#",this.getTitle(s)).replace("#message#",l).replace("#btnFragment#",m)).hide().appendTo("body"),i&&i.length&&i.remove(),i=d,g.openPosition(),n&&(clearTimeout(n),n=null),null==o.mask&&o.types.info!=s&&o.types.correct!=s&&a.show(),null==o.autoClose&&(o.types.info==s||o.types.correct==s)&&(b?o.alertTimeout&&3e3!=o.alertTimeout&&(b=o.alertTimeout):b=o.alertTimeout,n=setTimeout(function(){g.close()},b)),c=i.find(".btn"),c.each(function(i){t(this).on("click",t.proxy(function(){e.tools.close();var t=r[i].call;"string"==typeof t&&(t=t.toFunc()),"function"==typeof t&&t.call()},e)),r[i].keyCode==BJUI.keyCode.ENTER&&t(document).on("keydown.bjui.alertmsg.ok",{target:c.eq(i)},g.keydownOk),r[i].keyCode==BJUI.keyCode.ESC&&t(document).on("keydown.bjui.alertmsg.esc",{target:c.eq(i)},g.keydownEsc)})},alert:function(e,i,a){var n,s;t.extend(o,"object"==typeof a&&a),n=t.extend({},{okName:BJUI.regional.alertmsg.btnMsg.ok,okCall:null},o),s=[{name:n.okName,call:n.okCall,cls:"default",keyCode:BJUI.keyCode.ENTER}],this.open(e,i,s)},close:function(){t(document).off("keydown.bjui.alertmsg.ok").off("keydown.bjui.alertmsg.esc"),this.closePosition()}};return s},o.prototype.error=function(t,e){this.tools.alert(this.options.types.error,t,e)},o.prototype.info=function(t,e){this.tools.alert(this.options.types.info,t,e)},o.prototype.warn=function(t,e){this.tools.alert(this.options.types.warn,t,e)},o.prototype.ok=function(t,e){this.tools.alert(this.options.types.correct,t,e)},o.prototype.correct=function(t,e){this.tools.alert(this.options.types.correct,t,e)},o.prototype.confirm=function(e,i){var a,n;t.extend(this.options,"object"==typeof i&&i),a=t.extend({},{okName:BJUI.regional.alertmsg.btnMsg.ok,okCall:null,cancelName:BJUI.regional.alertmsg.btnMsg.cancel,cancelCall:null},this.options),n=[{name:a.okName,call:a.okCall,cls:"green",keyCode:BJUI.keyCode.ENTER},{name:a.cancelName,call:a.cancelCall,cls:"red",keyCode:BJUI.keyCode.ESC}],this.tools.open(this.options.types.confirm,e,n)},s=t.fn.alertmsg,t.fn.alertmsg=e,t.fn.alertmsg.Constructor=o,t.fn.alertmsg.noConflict=function(){return t.fn.alertmsg=s,this},t(document).on("click.bjui.alertmsg.data-api",'[data-toggle="alertmsg"]',function(i){var a,n=t(this),o=n.data(),s=o.options;return s&&("string"==typeof s&&(s=s.toObj()),"object"==typeof s&&t.extend(o,s)),(a=o.type)?(e.call(n,a,o.msg||a,o),void i.preventDefault()):!1})}(jQuery),+function(t){"use strict";function e(e){var i=arguments,n=e;return this.each(function(){var o=t(this),s=t.extend({},a.DEFAULTS,o.data(),"object"==typeof e&&e),l=o.data("bjui.pagination");l||o.data("bjui.pagination",l=new a(this,s)),"string"==typeof n&&t.isFunction(l[n])?([].shift.apply(i),i?l[n].apply(l,i):l[n]()):l.init()})}var i,a=function(e,i){this.$element=t(e),this.options=i,this.tools=this.TOOLS()};a.DEFAULTS={first:"li.j-first",prev:"li.j-prev",next:"li.j-next",last:"li.j-last",nums:"li.j-num > a",jump:"li.jumpto",pageNumFrag:'<li class="#liClass#"><a href="javascript:;">#pageNum#</a></li>',total:0,pageSize:10,pageNum:10,pageCurrent:1,callback:function(){return!1}},a.prototype.TOOLS=function(){var t=this.options,e={pageNums:function(){return Math.ceil(t.total/t.pageSize)},getInterval:function(){var e=Math.ceil(t.pageNum/2),i=this.pageNums(),a=i-t.pageNum,n=this.getCurrentPage()>e?Math.max(Math.min(this.getCurrentPage()-e,a),0):0,o=this.getCurrentPage()>e?Math.min(this.getCurrentPage()+e,i):Math.min(t.pageNum,i);return{start:n+1,end:o+1}},getCurrentPage:function(){var e=parseInt(t.pageCurrent);return isNaN(e)?1:e},hasPrev:function(){return this.getCurrentPage()>1},hasNext:function(){return this.getCurrentPage()<this.pageNums()}};return e},a.prototype.init=function(){function e(e,a){e.on("click",function(e){var n={pageCurrent:a,pageSize:i.options.pageSize};i.setClientPaging(n),t(this).bjuiajax("pageCallback",n,i.$element.closest(".bjui-layout")),e.preventDefault()})}var i,a,n,o,s,l,r,d,c,u,h,p;for(BJUI.ui.clientPaging&&!this.getClientPaging()&&this.setClientPaging({pageCurrent:this.options.pageCurrent,pageSize:this.options.pageSize}),i=this,a=this.options,n=this.tools,o=n.getInterval(),s="",l=FRAG.pagination,r=BJUI.regional.pagination,d=o.start;d<o.end;d++)s+=a.pageNumFrag.replaceAll("#pageNum#",d).replaceAll("#liClass#",d==n.getCurrentPage()?"selected j-num":"j-num");l=l.replaceAll("#pageNumFrag#",s).replaceAll("#pageCurrent#",n.getCurrentPage()).replaceAll("#first#",r.first).replaceAll("#last#",r.last).replaceAll("#prev#",r.prev).replaceAll("#next#",r.next).replaceAll("#jumpto#",r.jumpto).replaceAll("#jump#",r.jump),this.$element.html(l),c=this.$element.find(a.first),u=this.$element.find(a.prev),h=this.$element.find(a.next),p=this.$element.find(a.last),n.hasPrev()?(c.add(u).find("> span").hide(),e(u,n.getCurrentPage()-1),e(c,1)):c.add(u).addClass("disabled").find("> a").hide(),n.hasNext()?(h.add(p).find("> span").hide(),e(h,n.getCurrentPage()+1),e(p,n.pageNums())):h.add(p).addClass("disabled").find("> a").hide(),this.$element.find(a.nums).each(function(i){e(t(this),i+o.start)}),this.$element.find(a.jump).each(function(){var e=t(this).find(":text"),n=t(this).find(".goto");n.on("click",function(){var n=e.val(),o={pageCurrent:n,pageSize:a.pageSize};n&&n.isPositiveInteger()&&(i.setClientPaging(o),t(this).bjuiajax("pageCallback",o,i.$element.closest(".bjui-layout")))}),e.keyup(function(t){t.keyCode==BJUI.keyCode.ENTER&&n.trigger("click")})})},a.prototype.changePagesize=function(){var t=this,e=t.$element.val(),i={pageSize:e};isNaN(e)||(t.setClientPaging(i),t.$element.bjuiajax("pageCallback",i,t.$element.closest(".bjui-layout")))},a.prototype.orderBy=function(){var e=this;e.$element.css({cursor:"pointer"}).click(function(){var i=t(this).data("orderField"),a=t(this).data("orderDirection"),n={orderField:i,orderDirection:a};e.setClientPaging(n),t(this).bjuiajax("pageCallback",n,e.$element.closest(".bjui-layout"))})},a.prototype.destroy=function(){this.$element.removeData("bjui.pagination").empty()},a.prototype.getTarget=function(){var e,i=this;return e=i.$element.closest(".bjui-layout").length?i.$element.closest(".bjui-layout"):i.$element.closest(".navtab-panel").length?t.CurrentNavtab:t.CurrentDialog},a.prototype.getClientPaging=function(){return this.getTarget().data("bjui.clientPaging")},a.prototype.setClientPaging=function(e){if(BJUI.ui.clientPaging){var i=this.getTarget();i.data("bjui.clientPaging",t.extend({},i.data("bjui.clientPaging")||{},e))}},a.prototype.setClientOrder=function(t){if(BJUI.ui.clientPaging){var e=this.getClientPaging();e&&e.orderField||this.setClientPaging(t)}},a.prototype.setPagingAndOrderby=function(t){var e=t.data("bjui.clientPaging");t.find('[data-toggle="pagination"]').pagination("destroy").pagination(e),e.pageSize&&t.find('select[data-toggle-change="changepagesize"]').selectpicker("val",e.pageSize),e.orderField&&t.find('th[data-order-field="'+e.orderField+'"]').addClass(e.orderDirection).siblings().removeClass("asc desc")},i=t.fn.pagination,t.fn.pagination=e,t.fn.pagination.Constructor=a,t.fn.pagination.noConflict=function(){return t.fn.pagination=i,this},t(document).on(BJUI.eventType.initUI,function(i){var a=t(i.target).find('[data-toggle="pagination"]');a.length&&e.call(a)}),t(document).on("change.bjui.pagination.data-api",'select[data-toggle-change="changepagesize"]',function(i){var a=t(this);a.data(),e.call(a,"changePagesize"),i.preventDefault()})}(jQuery),+function($){"use strict";function LZ(t){return(0>t||t>9?"":"0")+t}function formatDate(t,e){var i,a,n,o,s,l,r,d,c,u,h,p;for(e+="",i="",a=0,n="",o="",s=t.getYear()+"",l=t.getMonth()+1,r=t.getDate(),d=t.getDay(),c=t.getHours(),u=t.getMinutes(),h=t.getSeconds(),p={},s.length<4&&(s=""+(s-0+1900)),p.y=""+s,p.yyyy=s,p.yy=s.substring(2,4),p.M=l,p.MM=LZ(l),p.MMM=MONTH_NAMES[l-1],
p.NNN=MONTH_NAMES[l+11],p.d=r,p.dd=LZ(r),p.E=DAY_NAMES[d+7],p.EE=DAY_NAMES[d],p.H=c,p.HH=LZ(c),p.h=0==c?12:c>12?c-12:c,p.hh=LZ(p.h),p.K=c>11?c-12:c,p.k=c+1,p.KK=LZ(p.K),p.kk=LZ(p.k),p.a=c>11?"PM":"AM",p.m=u,p.mm=LZ(u),p.s=h,p.ss=LZ(h);a<e.length;){for(n=e.charAt(a),o="";e.charAt(a)==n&&a<e.length;)o+=e.charAt(a++);i+=null!=p[o]?p[o]:o}return i}function _isInteger(t){return new RegExp(/^\d+$/).test(t)}function _getInt(t,e,i,a){var n,o;for(n=a;n>=i;n--){if(o=t.substring(e,e+n),o.length<i)return null;if(_isInteger(o))return o}return null}function parseDate(t,e){var i,a,n,o,s,l,r,d,c,u,h,p,f,g,m,b,v;for(t+="",e+="",i=0,a=0,n="",o="",r=new Date(1900,0,1),d=r.getYear(),c=r.getMonth()+1,u=1,h=r.getHours(),p=r.getMinutes(),f=r.getSeconds(),g="";a<e.length;){for(n=e.charAt(a),o="";e.charAt(a)==n&&a<e.length;)o+=e.charAt(a++);if("yyyy"==o||"yy"==o||"y"==o){if("yyyy"==o&&(s=4,l=4),"yy"==o&&(s=2,l=2),"y"==o&&(s=2,l=4),d=_getInt(t,i,s,l),null==d)return 0;i+=d.length,2==d.length&&(d=d>70?1900+(d-0):2e3+(d-0))}else if("MMM"==o||"NNN"==o){for(c=0,m=0;m<MONTH_NAMES.length;m++)if(b=MONTH_NAMES[m],t.substring(i,i+b.length).toLowerCase()==b.toLowerCase()&&("MMM"==o||"NNN"==o&&m>11)){c=m+1,c>12&&(c-=12),i+=b.length;break}if(1>c||c>12)return 0}else if("EE"==o||"E"==o){for(m=0;m<DAY_NAMES.length;m++)if(v=DAY_NAMES[m],t.substring(i,i+v.length).toLowerCase()==v.toLowerCase()){i+=v.length;break}}else if("MM"==o||"M"==o){if(c=_getInt(t,i,o.length,2),null==c||1>c||c>12)return 0;i+=c.length}else if("dd"==o||"d"==o){if(u=_getInt(t,i,o.length,2),null==u||1>u||u>31)return 0;i+=u.length}else if("hh"==o||"h"==o){if(h=_getInt(t,i,o.length,2),null==h||1>h||h>12)return 0;i+=h.length}else if("HH"==o||"H"==o){if(h=_getInt(t,i,o.length,2),null==h||0>h||h>23)return 0;i+=h.length}else if("KK"==o||"K"==o){if(h=_getInt(t,i,o.length,2),null==h||0>h||h>11)return 0;i+=h.length}else if("kk"==o||"k"==o){if(h=_getInt(t,i,o.length,2),null==h||1>h||h>24)return 0;i+=h.length,h--}else if("mm"==o||"m"==o){if(p=_getInt(t,i,o.length,2),null==p||0>p||p>59)return 0;i+=p.length}else if("ss"==o||"s"==o){if(f=_getInt(t,i,o.length,2),null==f||0>f||f>59)return 0;i+=f.length}else if("a"==o){if("am"==t.substring(i,i+2).toLowerCase())g="AM";else{if("pm"!=t.substring(i,i+2).toLowerCase())return 0;g="PM"}i+=2}else{if(t.substring(i,i+o.length)!=o)return 0;i+=o.length}}if(i!=t.length)return 0;if(2==c)if(0==d%4&&0!=d%100||0==d%400){if(u>29)return 0}else if(u>28)return 0;return(4==c||6==c||9==c||11==c)&&u>30?0:(12>h&&"PM"==g?h=h-0+12:h>11&&"AM"==g&&(h-=12),new Date(d,c-1,u,h,p,f))}function replaceTmEval(data){return data.replace(RegExp("({[A-Za-z0-9_+-]*})","g"),function($1){return eval("("+$1.replace(/[{}]+/g,"")+")")})}var MONTH_NAMES=new Array("January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),DAY_NAMES=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat");Date.prototype.formatDate=function(t){return formatDate(this,t)},String.prototype.parseDate=function(t){return this.length<t.length&&(t=t.slice(0,this.length)),parseDate(this,t)},Date.prototype.formatDateTm=function(t){var e,i,a,n,o=this.getFullYear(),s=this.getMonth()+1,l=this.getDate(),r=t.replaceAll("%y",o).replaceAll("%M",s).replaceAll("%d",l);return r=replaceTmEval(r),e=1900,i=0,a=1,n=r.split("-"),n.length>0&&(e=n[0]),n.length>1&&(i=n[1]-1),n.length>2&&(a=n[2]),new Date(e,i,a).formatDate("yyyy-MM-dd")}}(jQuery),+function(t){"use strict";function e(e){var i=arguments,a=e;return this.each(function(){var n=t(this),o=t.extend({},k.DEFAULTS,n.data(),"object"==typeof e&&e),s=n.data("bjui.datepicker");s||n.data("bjui.datepicker",s=new k(this,o)),"string"==typeof a&&t.isFunction(s[a])?([].shift.apply(i),i?s[a].apply(s,i):s[a]()):s.init()})}var i,a,n,o,s,l,r,d,c,u,h,p,f,g,m,b,v,y,k,x;t(function(){var e=function(){var e,k,x=BJUI.regional.datepicker,C=FRAG.calendarFrag.replace("#close#",x.close).replace("#prev#",x.prev).replace("#next#",x.next).replace("#clear#",x.clear).replace("#ok#",x.ok);i=t(C).hide(),t("body").append("<!-- datepicker -->").append(i),a=i.find("> .main"),n=i.find("a.prev"),o=i.find("a.next"),s=i.find("select[name=year]"),l=i.find("select[name=month]"),r=i.find(".time"),d=r.find(":text"),c=r.find("ul > li"),u=r.find(".hh"),h=r.find(".mm"),p=r.find(".ss"),f=a.find("> .tm"),g=i.find(".close"),m=a.find("> .body > .days"),b=a.find("> .body > .dayNames"),v=i.find(".clearBtn"),y=i.find(".okBtn"),e="",k=BJUI.regional.datepicker,t.each(k.dayNames,function(t,i){e+="<dt>"+i+"</dt>"}),b.html(e),t.each(k.monthNames,function(t,e){var i=t+1;l.append('<option value="'+i+'">'+e+"</option>")}),i.on("selectstart",function(){return!1})};e()}),k=function(e,i){this.$element=t(e),this.options=i,this.tools=this.TOOLS(),this.$dateBtn=null;var a=new Date;this.options.minDate=a.formatDateTm(this.options.minDate),this.options.maxDate=a.formatDateTm(this.options.maxDate),this.events={focus_time:"focus.bjui.datepicker.time",click_prev:"click.bjui.datepicker.prev",click_next:"click.bjui.datepicker.next",click_ok:"click.bjui.datepicker.ok",click_days:"click.bjui.datepicker.days",click_clear:"click.bjui.datepicker.clear",click_close:"click.bjui.datepicker.close",click_tm:"click.bjui.datepicker.tm",click_spinner:"click.bjui.datepicker.spinner",mousedown_sp:"mousedown.bjui.datepicker.spinner",mouseup_sp:"mouseup.bjui.datepicker.spinner",change_ym:"change.bjui.datepicker.ym",click_time:"click.bjui.datepicker.time",keydown_time:"keydown.bjui.datepicker.time",keyup_time:"keyup.bjui.datepicker.time"}},k.DEFAULTS={pattern:"yyyy-MM-dd",minDate:"1900-01-01",maxDate:"2099-12-31",mmStep:1,ssStep:1},k.EVENTS={afterChange:"afterchange.bjui.datepicker"},k.prototype.TOOLS=function(){var e=this,a={changeTmMenu:function(t){f.removeClass("hh").removeClass("mm").removeClass("ss"),t&&(f.addClass(t),d.removeClass("slt").filter("."+t).addClass("slt"))},clickTmMenu:function(i,a){f.find("> ul").hide().filter("."+a).show().find("> li").off(e.events.click_tm).on(e.events.click_tm,function(){var e=t(this),a=parseInt(e.text())<10?"0"+e.text():e.text();i.val(a)})},keydownInt:function(t){return t.keyCode>=48&&t.keyCode<=57||t.keyCode==BJUI.keyCode.DELETE||t.keyCode==BJUI.keyCode.BACKSPACE?void 0:!1},changeTm:function(t,e){var i=parseInt(t.val()),a=parseInt(t.data("start"))||0,n=parseInt(t.data("end")),o=parseInt(t.data("step")||1),s=e?e.data("add")?e.data("add"):-1:0,l=i;1==s?n-o>=i&&(l=i+o):-1==s?i>=a+o&&(l=i-o):i>n?l=n:a>i&&(l=a),10>l&&(l="0"+l),t.val(l)},closeCalendar:function(n){a.changeTmMenu(),n&&(t(document).off(e.events.click_close),i.hide())},get:function(t){return e.options[t]},getDays:function(t,e){return 2==e?t%4||!(t%100)&&t%400?28:29:/4|6|9|11/.test(e)?30:31},minMaxDate:function(t){var e=t.split("-").length-1,i="y-M-d";return 1==e?i="y-M":0==e&&(i="y"),t.parseDate(i)},getMinDate:function(){return this.minMaxDate(e.options.minDate)},getMaxDate:function(){var t,i=e.options.maxDate,a=i.split("-").length-1,n=this.minMaxDate(i);return 2>a&&(t=this.getDays(n.getFullYear(),n.getMonth()+1),n.setDate(t),0==a&&n.setMonth(11)),n},getDateWrap:function(t){var i,a,n;return t||(t=this.parseDate(e.sDate)||new Date),i=t.getFullYear(),a=t.getMonth()+1,n=this.getDays(i,a),{year:i,month:a,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),days:n,date:t}},changeDate:function(t,i,a){var n=new Date(t,i-1,a||1);return e.sDate=this.formatDate(n),n},changeDateTime:function(t,i,a,n,o,s){var l=new Date(t,i-1,a,n,o,s);return e.sDate=this.formatDate(l),l},changeDay:function(t,e){e||(e=0);var i=this.getDateWrap();return this.changeDate(i.year,i.month+parseInt(e),t)},changeMonth:function(t){var e=s.get(0).selectedIndex,i=s.find("option").length,a=1*l.val()+t;0==a?0==e?a=1:(a=12,e--,s.get(0).selectedIndex=e):13==a&&(e==i-1?a=12:(a=1,e++,s.get(0).selectedIndex=e)),l.val(a).change()},parseDate:function(t){return t?t.parseDate(e.options.pattern):null},formatDate:function(t){return t.formatDate(e.options.pattern)},hasHour:function(){return-1!=e.options.pattern.indexOf("H")},hasMinute:function(){return-1!=e.options.pattern.indexOf("m")},hasSecond:function(){return-1!=e.options.pattern.indexOf("s")},hasTime:function(){return this.hasHour()||this.hasMinute()||this.hasSecond()},hasDate:function(){var t,i=["y","M","d","E"];for(t=0;t<i.length;t++)if(-1!=e.options.pattern.indexOf(i[t]))return!0;return!1},afterChange:function(t){e.$element.trigger(k.EVENTS.afterChange,{value:t})}};return a},k.prototype.addBtn=function(){var e,i,a=this,n=a.$element;this.$dateBtn||this.options.addbtn||n.parent().hasClass("wrap_bjui_btn_box")||(this.$dateBtn=t(FRAG.dateBtn),this.$element.css({paddingRight:"15px"}).wrap('<span class="wrap_bjui_btn_box"></span>'),e=this.$element.parent(),i=this.$element.addClass("form-control").innerHeight(),e.css({position:"relative",display:"inline-block"}),this.$dateBtn.css({height:i,lineHeight:i+"px"}).appendTo(e),this.$dateBtn.on("selectstart",function(){return!1}))},k.prototype.init=function(){var e,i,a,r,d,c,f,b;for(this.$element.val()&&(this.sDate=this.$element.val().trim()),e=this,this.options,i=this.tools,a=i.getDateWrap(),r=i.getMinDate(),d=i.getMaxDate(),c=r.getFullYear(),f=d.getFullYear(),s.empty(),b=c;f>=b;b++)s.append('<option value="'+b+'"'+(a.year==b?" selected":"")+">"+b+"</option>");l.val(a.month),s.add(l).off(this.events.change_ym).on(this.events.change_ym,function(){var t,n;i.hasTime()?(t=m.find(".slt"),n=i.changeDateTime(s.val(),l.val(),t.data("day"),a.hour,a.minute,a.second),e.create(i.getDateWrap(n),r,d)):(t=m.find(".slt"),n=i.changeDate(s.val(),l.val(),t.data("day")),e.create(i.getDateWrap(n),r,d))}),n.off(this.events.click_prev).on(this.events.click_prev,function(){e.tools.changeMonth(-1)}),o.off(this.events.click_prev).on(this.events.click_prev,function(){e.tools.changeMonth(1)}),v.off(this.events.click_clear).on(this.events.click_clear,function(){e.$element.val(""),i.closeCalendar(!0)}),y.off(this.events.click_ok).on(this.events.click_ok,function(){var t,a=m.find("dd.slt");return a.hasClass("disabled")?!1:(t=i.changeDay(a.data("day"),a.data("month")),i.hasTime()&&(t.setHours(parseInt(u.val())),t.setMinutes(parseInt(h.val())),t.setSeconds(parseInt(p.val()))),i.closeCalendar(!0),e.$element.val(i.formatDate(t)).focus(),void i.afterChange(t))}),g.off(this.events.click_close).on(this.events.click_close,function(){i.closeCalendar(!0)}),t(document).on(this.events.click_close,function(a){var n=t(a.target);a.target!=e.$element.get(0)&&(n.closest("#calendar").length||("datepicker"==n.data("toggle")||"datepickerbtn"==n.parent().data("toggle")||"datepickerbtn"==n.data("toggle")?i.closeCalendar(!1):i.closeCalendar(!0)))}),this.create(a,r,d)},k.prototype.create=function(e,n,o){var s,l,g,b,v,y,k,x=this,C=this.options,w=this.tools,$=new Date(e.year,e.month-1,1),j=$.getDay(),T="";if(j>0)for($.setMonth($.getMonth()-1),s=w.getDateWrap($),l=s.days-j+1;l<=s.days;l++)g=new Date(e.year,e.month-2,l),b=g>=n&&o>=g?"":" disabled",T+='<dd class="other'+b+'" data-month="-1" data-day="'+l+'">'+l+"</dd>";for(l=1;l<=e.days;l++)g=new Date(e.year,e.month-1,l),b=g>=n&&o>=g?"":"disabled",l==e.day&&(b+=" slt"),T+='<dd class="'+b+'" data-day="'+l+'">'+l+"</dd>";for(l=1;l<=42-j-e.days;l++)g=new Date(e.year,e.month,l),b=g>=n&&o>=g?"":" disabled",T+='<dd class="other'+b+'" data-month="1" data-day="'+l+'">'+l+"</dd>";v=m.html(T).find("dd"),v.not(".disabled").off(this.events.click_days).on(this.events.click_days,function(){var e,i=t(this);w.hasTime()?(v.removeClass("slt"),i.addClass("slt")):(e=w.changeDay(i.data("day"),i.data("month")),w.closeCalendar(!0),x.$element.val(w.formatDate(e)).focus(),w.afterChange(e))}),w.hasDate()?a.removeClass("nodate"):a.addClass("nodate"),w.hasTime()?(r.show(),u.val(e.hour<10?"0"+e.hour:e.hour).off(this.events.focus_time).on(this.events.focus_time,function(){w.changeTmMenu("hh")}),y=parseInt(e.minute/C.mmStep)*C.mmStep,h.val(10>y?"0"+y:y).data("step",C.mmStep).off(this.events.focus_time).on(this.events.focus_time,function(){w.changeTmMenu("mm")}),p.val(w.hasSecond()?e.second<10?"0"+e.second:e.second:"00").data("step",C.ssStep).off(this.events.focus_time).on(this.events.focus_time,function(){w.changeTmMenu("ss")}),i.off("click").on("click",function(e){t(e.target).closest(".time").length||(f.find("> ul").hide(),w.changeTmMenu())}),d.off(this.events.keydown_time).on(this.events.keydown_time,w.keydownInt).each(function(){var e=t(this);e.off(x.events.keyup_time).on(x.events.keyup_time,function(){w.changeTm(e)})}).off(this.events.click_time).on(this.events.click_time,function(){w.clickTmMenu(t(this),t(this).data("type"))}),k=null,c.off(this.events.click_spinner).on(this.events.click_spinner,function(e){var i=t(this);d.filter(".slt").each(function(){w.changeTm(t(this),i)}),e.preventDefault()}).off(this.events.mousedown_sp).on(this.events.mousedown_sp,function(){var e=t(this);k=setInterval(function(){d.filter(".slt").each(function(){w.changeTm(t(this),e)})},150)}).off(this.events.mouseup_sp).on(this.events.mouseup_sp,function(){clearTimeout(k)}),w.hasHour()||u.attr("disabled",!0),w.hasMinute()||h.attr("disabled",!0),w.hasSecond()||p.attr("disabled",!0)):r.hide(),this.show()},k.prototype.show=function(){var e=this.$element.offset(),a=e.top+this.$element.get(0).offsetHeight,n=i.outerHeight(!0);a>n&&a>t(window).height()-n&&(a=e.top-n),i.css({left:e.left,top:a}).show().click(function(t){t.stopPropagation()})},x=t.fn.datepicker,t.fn.datepicker=e,t.fn.datepicker.Constructor=k,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=x,this},t(document).on(BJUI.eventType.initUI,function(i){var a=t(i.target).find('[data-toggle="datepicker"]');a.length&&(a.data("nobtn")||e.call(a,"addBtn"))}),t(document).on("click.bjui.datepicker.data-api",'[data-toggle="datepickerbtn"]',function(i){var a=t(this).prevAll('[data-toggle="datepicker"]');a&&a.is(":text")&&(e.call(a,a.data()),i.preventDefault())}),t(document).on("click.bjui.datepicker.data-api",'[data-toggle="datepicker"]',function(i){var a=t(this);a.data("onlybtn")||a.is(":text")&&(e.call(a,a.data()),i.preventDefault())})}(jQuery),+function(t){"use strict";function e(e){var i=arguments,n=e;return this.each(function(){var o=t(this),s=t.extend({},a.DEFAULTS,o.data(),"object"==typeof e&&e),l=o.data("bjui.ajaxtab");l||o.data("bjui.ajaxtab",l=new a(this,s)),"string"==typeof n&&t.isFunction(l[n])?([].shift.apply(i),i?l[n].apply(l,i):l[n]()):l.init()})}var i,a=function(e,i){this.$element=t(e),this.options=i};a.DEFAULTS={url:void 0,target:void 0,reload:!1},a.prototype.init=function(){var t,e=this.options;return e.url?(e.url=decodeURI(e.url).replacePlh(this.$element.closest(".unitBox")),e.url.isFinishedTm()?(e.url=encodeURI(e.url),e.target?void(e.reload?this.load():(t=this.$element.data("bjui.ajaxtab.reload"),t?this.$element.tab("show"):this.load())):void BJUI.debug("Ajaxtab Plugin: Attribute 'target' is not defined!")):(this.$element.alertmsg("error",e.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("Ajaxtab Plugin: The new ajaxtab's url is incorrect, url: "+e.url))):void BJUI.debug("Ajaxtab Plugin: Error trying to open a tab, url is undefined!")},a.prototype.load=function(){var e=this.$element,i=this.options;t(i.target).ajaxUrl({url:i.url,data:{},callback:function(){e.data("bjui.ajaxtab.reload",!0).tab("show")}})},i=t.fn.ajaxtab,t.fn.ajaxtab=e,t.fn.ajaxtab.Constructor=a,t.fn.ajaxtab.noConflict=function(){return t.fn.ajaxtab=i,this},t(document).on("click.bjui.ajaxtab.data-api",'[data-toggle="ajaxtab"]',function(i){var a=t(this),n=a.data();n.url||(n.url=a.attr("href")),e.call(a,n),i.preventDefault()})}(jQuery),+function(t){function e(e){var a=arguments,n=e;return this.each(function(){var o=t(this),s=t.extend({},i.DEFAULTS,o.data(),"object"==typeof e&&e),l=o.data("bjui.datagrid");l||o.data("bjui.datagrid",l=new i(this,s)),"string"==typeof n&&t.isFunction(l[n])?([].shift.apply(a),a?l[n].apply(l,a):l[n]()):l.init()})}var i=function(e,i){this.$element=t(e),this.options=i,this.tools=this.TOOLS(),this.datanames={tbody:"bjui.datagrid.tbody.dom",td_html:"bjui.datagrid.td.html",changeData:"bjui.datagrid.tr.changeData"},this.classnames={s_checkbox:"datagrid-checkbox",s_linenumber:"datagrid-linenumber",s_edit:"datagrid-column-edit",s_lock:"datagrid-lock",s_menu:"datagrid-menu-box",s_filter:"datagrid-filter-box",s_showhide:"datagrid-showhide-box",th_cell:"datagrid-cell",th_menu:"datagrid-column-menu",btn_menu:"datagrid-column-menu-btn",th_col:"datagrid-col",th_field:"datagrid-col-field",th_sort:"datagrid-sortable",th_resize:"datagrid-resize-head",th_resizemark:"datagrid-column-resizemark",tr_edit:"datagrid-edit-tr",tr_add:"datagrid-add-tr",tr_selected:"datagrid-selected-tr",td_edit:"datagrid-edit-td",td_changed:"datagrid-changed",td_linenumber:"datagrid-linenumber-td",td_checkbox:"datagrid-checkbox-td",li_asc:"datagrid-li-asc",li_desc:"datagrid-li-desc",li_filter:"datagrid-li-filter",li_showhide:"datagrid-li-showhide",li_lock:"datagrid-li-lock",li_unlock:"datagrid-li-unlock"}};i.DEFAULTS={gridTitle:"",columns:null,data:null,dataUrl:null,loadType:"POST",dataType:"json",local:"remote",fieldSortable:!0,filterThead:!0,sortAll:!1,filterAll:!1,filterMult:!0,linenumberAll:!1,showLinenumber:!0,showCheckboxcol:!1,showEditbtnscol:!1,showTfoot:!1,showToolbar:!1,toolbarItem:"",toolbarCustom:"",columnResize:!0,columnMenu:!0,columnShowhide:!0,columnFilter:!0,columnLock:!0,paging:!0,pagingAlign:"center",editUrl:null,editCallback:null,editMode:"inline",editDialogOp:null,inlineEditMult:!0,saveAll:!0,addLocation:"first",delUrl:null,delType:"POST",delPK:null,delConfirm:!0,delCallback:null,jsonPrefix:"",contextMenuH:!0,contextMenuB:!1,hScrollbar:!1,fullGrid:!1,importOption:null,exportOption:null,beforeEdit:null,beforeDelete:null,afterSave:null,afterDelete:null},i.renderItem=function(e,i){if(!i||!i.length)return"";var a="";return t.each(i,function(t,i){return"undefined"!=typeof i[e]?(a=i[e],!1):void 0}),a},i.prototype.TOOLS=function(){var e=this,i=e.options,a={getPageCount:function(t,e){return Math.ceil(e/t)},getPageInterval:function(t,e,i){var a=Math.ceil(i/2),n=t-i,o=e>a?Math.max(Math.min(e-a,n),0):0,s=e>a?Math.min(e+a,t):Math.min(i,t);return s-o==i&&(s+=1),i>s&&(s+=1),{start:o+1,end:s}},getRight:function(i){var a=0,n=i.data("index"),o=e.$tbody.find("> tr:first > td:lt("+(n+1)+")");return o&&o.length||(o=e.$colgroupH.find("> col:lt("+(n+1)+")")),o.each(function(){var e=t(this),i=e.is(":hidden")?0:e.outerWidth();a+=i}),a},getRight4Lock:function(i){var a=0,n=e.$lockTbody.find("> tr:first > td:eq("+i+")"),o=n&&n.prevAll().add(n);return o&&o.length||(o=e.$lockColgroupH.filter(":lt("+(i+1)+")")),o.each(function(){var e=t(this),i=e.is(":hidden")?0:e.outerWidth();a+=i}),a},beforeEdit:function(t,a){var n=i.beforeEdit;return n&&("string"==typeof n&&(n=n.toFunc()),"function"==typeof n)?n.call(e,t,a):!0},afterSave:function(t,a){var n=i.afterSave;n&&("string"==typeof n&&(n=n.toFunc()),"function"==typeof n&&n.call(e,t,a))},afterDelete:function(){var t=i.afterDelete;t&&("string"==typeof t&&(t=t.toFunc()),"function"==typeof t&&t.call(e))},setColspan:function(t,e){t.colspan&&(t.colspan=t.colspan+e-1),t.index=t.index+e-1,t.parent&&this.setColspan(t.parent,e)},columns2Arr:function(i,a,n,o){var s=this;return a||(a=[]),n||(n=0),a[n]||(a[n]=[]),t.each(i,function(t,i){var l,r=a[n].length;return o&&(i.parent=o),i.columns?(l=i.columns.length,n&&i.parent&&s.setColspan(i.parent,l),i.index=e.columnModel.length+l-1,i.colspan=l,i.quicksort=!1,a[n][r++]=i,s.columns2Arr(i.columns,a,n+1,i)):(i.rowspan=n,i.index=e.columnModel.length,i.menu="undefined"==typeof i.menu?!0:i.menu,i.lock="undefined"==typeof i.lock?!0:i.lock,i.hide="undefined"==typeof i.hide?!1:i.hide,i.edit="undefined"==typeof i.edit?!0:i.edit,i.add="undefined"==typeof i.add?!0:i.add,i.quicksort="undefined"==typeof i.quicksort?!0:i.quicksort,a[n][r++]=i,e.columnModel.push(i),void 0)}),a},createTrsByData:function(i,n){var o;e.$tbody||(e.$tbody=t("<tbody></tbody>")),i&&(o=i.list?i.list:i,e.paging.total=o.length,"object"==typeof i&&(i[BJUI.pageInfo.total]&&(e.paging.total=parseInt(i[BJUI.pageInfo.total])),i[BJUI.pageInfo.pageSize]&&(n&&e.paging.pageSize!=i[BJUI.pageInfo.pageSize]&&e.$selectpage.trigger("bjui.datagrid.paging.pageSize",i[BJUI.pageInfo.pageSize]),e.paging.pageSize=parseInt(i[BJUI.pageInfo.pageSize]))),e.paging.pageCount=a.getPageCount(e.paging.pageSize,e.paging.total),e.paging.pageCurrent>e.paging.pageCount&&(e.paging.pageCurrent=e.paging.pageCount),this.initTbody(o,n)),e.init_tbody||e.$tbody.appendTo(e.$element),e.init_thead||e.initThead()},initTbody:function(a,n){var o,s=this,l=e.allData,r=i.dataType||"json",d=e.columnModel,c=e.hiddenFields,u=(e.regional,[]),h=e.attach,p=e.paging,f=0,g=p.pageSize,m=function(){if(r=r.toLowerCase(),a&&(l=e.allData=a),l.length?"local"==i.local?(f=p.pageSize*(p.pageCurrent-1),g=f+p.pageSize,p.total!=l.length&&(p.total=l.length),f>l.length&&(f=p.pageSize*(p.pageCount-1))):l.length>p.pageSize&&(g=p.pageSize):g=0,g>l.length&&(g=l.length),"array"==r&&a&&a.length&&"array"==t.type(a[0])){var m,b=f,v=g,y=[];"local"==i.local&&(b=0,v=l.length);for(var k=b;v>k;k++)o={},m=0,t.each(l[k],function(e,i){var a,n=i;d[m]&&d[m].gridNumber&&m++,d[m]&&d[m].gridCheckbox&&m++,"string"==typeof n&&(n='"'+n+'"'),d[m]&&!d[m].gridEdit?(a='{"'+d[m].name+'":'+n+"}",t.extend(o,JSON.parse(a))):(d[m]&&d[m].gridEdit&&m++,m>=d.length&&c&&c[e-d.length]&&(a='{"'+c[e-d.length]+'":'+n+"}",t.extend(o,JSON.parse(a)))),m++}),y.push(o);l=e.allData=y}for(var k=f;g>k;k++)o=t.extend({},e.allData[k],h),u.push(o);s.createTrs(u,n),e.data=u};n&&e.$boxM?e.$boxM.show().trigger("bjui.ajaxEnd").trigger("bjui.ajaxStart",[50,m]):m()},createTrs:function(a,n){var o=e.columnModel,s=e.paging,l=BJUI.doRegional(FRAG.gridEditBtn,e.regional);n&&(t.each(o,function(t,i){i.locked&&(e.colLock(i.th,!1),i.lock_refresh=!0)}),e.$tbody.empty(),e.$lockTableH&&e.$lockTableH.empty(),e.$lockTableB&&e.$lockTableB.empty()),t.each(a,function(r,d){var c,u=t("<tr></tr>"),h=i.linenumberAll?(s.pageCurrent-1)*s.pageSize+(r+1):r+1;t.extend(d,{gridNumber:h,gridIndex:r}),t.each(o,function(i,o){var s,h=o.name||"datagrid-noname",p=d[h],f="",g="";if("undefined"==typeof p&&(p=""),s=p,o.align&&(f=' align="'+o.align+'"'),o.gridCheckbox&&(p='<div><input type="checkbox" data-toggle="icheck" name="datagrid.checkbox" value="true"></div>'),o.gridEdit&&(p=l,g=' class="'+e.classnames.s_edit+'"'),o.calc){o.calc_count||(o.calc_count=a.length);var m=p&&String(p).isNumber()?1*p:0;"sum"==o.calc||"avg"==o.calc?o.calc_sum=(o.calc_sum||0)+m:"max"==o.calc?o.calc_max=o.calc_max?o.calc_max<m?m:o.calc_max:m:"min"==o.calc&&(o.calc_min=o.calc_min?o.calc_min>m?m:o.calc_min:m)}if(c=t("<td"+f+g+"><div>"+p+"</div></td>"),c.data("val",p).appendTo(u),o.gridNumber&&c.addClass(e.classnames.td_linenumber),o.gridCheckbox&&c.addClass(e.classnames.td_checkbox),n&&o.hidden&&c.css("display","none"),o.items&&!o.render&&(o.render=t.datagrid.renderItem),o.render&&"string"==typeof o.render&&(o.render=o.render.toFunc()),o.render&&"function"==typeof o.render){var b="";if(o.items){"string"==typeof o.items&&(o.render.trim().startsWith("[")?o.render=o.render.toObj():o.render=o.render.toFunc()),o.renderTds||(o.renderTds=[]);var v=function(i,a){t.when(o.items.call(e)).then(function(n){o.items=n,b=o.render.call(e,a,n),i.html(b),t.each(o.renderTds,function(t,i){b=o.render.call(e,i.text(),n),i.html(b),t==o.renderTds.length-1&&(o.renderTds=null)}),e.delayRender--})};"function"==typeof o.items?0==r?(e.delayRender||(e.delayRender=0),e.delayRender++,v(c,s)):o.renderTds.push(c):(b=o.render.call(e,s,o.items),c.html(b))}else b=o.render.call(e,s),c.html(b)}}),u.appendTo(e.$tbody),n&&u.initui()}),n&&(e.initEvents(),i.editMode&&e.edit(),e.$paging&&e.$paging.trigger("bjui.datagrid.paging.jump"),t.each(o,function(t,i){i.lock_refresh&&(e.colLock(i.th,!0),delete i.lock_refresh)})),e.$boxM&&e.$boxM.trigger("bjui.ajaxStop").hide()},loadData:function(a,n){var o=this,s=i.dataUrl,l=i.dataType||"json";e.columnModel;e.$tbody&&e.$boxM.show().trigger("bjui.ajaxStart",[50]),l=l.toLowerCase(),"array"==l&&(l="text"),t.ajax({url:s,data:a||{},type:i.loadType,cache:i.cache||!1,dataType:l,success:function(e){if("xml"==l){var i,a=[];t(e).find("row").each(function(){i={},t(this).find("cell").each(function(e){var a=t(this),n=a.text(),o=a.attr("name");i[o]=n}),a.push(i)}),a&&o.createTrsByData(a,n)}else"json"==l?o.createTrsByData(e,n):o.createTrsByData(e.toObj(),n)}})},appendColumns:function(){e.linenumberColumn={name:"gridNumber",gridNumber:!0,width:30,minWidth:30,label:"No.",align:"center",menu:!1,edit:!1,quicksort:!1},e.checkboxColumn={name:"gridCheckbox",gridCheckbox:!0,width:40,minWidth:40,label:"Checkbox",align:"center",menu:!1,edit:!1,quicksort:!1},e.editBtnsColumn={name:"gridEdit",gridEdit:!0,width:110,minWidth:110,label:"Edit",align:"center",menu:!1,edit:!1,hide:!1,quicksort:!1}},createThead:function(){var a,n,o,s,l,r,d,c=this,u=i.columns,h=[];c.appendColumns(),i.showCheckboxcol&&(u.unshift(e.checkboxColumn),"lock"==i.showCheckboxcol&&(e.checkboxColumn.initLock=!0)),i.showLinenumber&&(u.unshift(e.linenumberColumn),"lock"==i.showLinenumber&&(e.linenumberColumn.initLock=!0)),i.showEditbtnscol&&u.push(e.editBtnsColumn),h=c.columns2Arr(u,h),e.columnModel[e.columnModel.length-(i.showEditbtnscol?2:1)].lock=!1,i.hiddenFields&&(e.hiddenFields=i.hiddenFields),e.$thead=t("<thead></thead>"),t.each(h,function(c,u){var p,f=t('<tr style="height:25px;"></tr>');t.each(u,function(c,u){a=u.label||u.name,n=u.align?' align="'+u.align+'"':"",o=u.width?' width="'+u.width+'"':"",s=u.colspan?' colspan="'+u.colspan+'"':"",l=h.length-u.rowspan>1?' rowspan="'+(h.length-u.rowspan)+'"':"",r='<div class="'+e.classnames.th_resizemark+'"></div>',d="",u.gridCheckbox&&(a='<input type="checkbox" data-toggle="icheck">'),u.colspan&&(n=' align="center"'),u.thalign&&(n=' align="'+u.thalign+'"'),u.menu&&i.columnMenu&&(d=' class="'+e.classnames.th_menu+'"'),p=t("<th"+d+o+n+s+l+'><div><div class="datagrid-space"></div><div class="datagrid-label">'+a+'</div><div class="'+e.classnames.th_cell+'">'+r+"</div></div></th>"),p.data("index",u.index).appendTo(f),p.find("> div").css("height",h.length-u.rowspan>1?24*(h.length-u.rowspan)+"px":"24px"),l||p.addClass("single-row"),u.gridNumber&&p.addClass(e.classnames.td_linenumber),i.fieldSortable&&u.quicksort&&p.addClass("datagrid-quicksort-th"),u.th=p}),f.appendTo(e.$thead)}),e.$thead.appendTo(e.$element)},createTbody:function(){var t=this,a=i.data;e.columnModel;a?("string"==typeof a&&(a=a.trim().startsWith("[")||a.trim().startsWith("{")?a.toObj():a.toFunc()),"function"==typeof a&&(a=a.call()),t.createTrsByData(a)):i.dataUrl&&t.loadData()},setBoxbH:function(t){var a,n=t||i.height,o=0;100>n||(isNaN(n)&&(n=e.$grid.height()),e.$boxT&&(a=e.$boxT.outerHeight(),n-=a,o+=a),e.$toolbar&&(a=e.$toolbar.outerHeight(),n-=a,o+=a),e.$box_paging&&(n-=e.$box_paging.outerHeight()),e.$boxF&&(n-=e.$boxF.outerHeight()),o+=e.$tableH.outerHeight(),n-=e.$boxH.outerHeight(),0>n&&(n=0),e.$boxB.height(n),e.$boxM.height(n).css({top:o}))},fixedH:function(t){this.setBoxbH(t)},showSubMenu:function(i,a,n){var o,s,l=a.outerWidth(),r=n.data("width")||n.outerWidth(),d=e.$boxH.width(),c=function(i,a,n){o=a.offset().left-e.$grid.offset().left-1,s={left:"50%"},i.removeClass("active"),a.hasClass("position-right")||l+r>d-o?(n.css({left:"auto",right:"100%"}),s={right:"50%"}):n.css({left:"100%",right:"auto"}),s.opacity=.2,n.stop().animate(s,"fast",function(){t(this).hide()})};i.hover(function(){if(n.appendTo(i),i.hasClass(e.classnames.li_filter)&&n.is(":visible"))return!1;var t=i.siblings("."+e.classnames.li_filter);t.length&&t.hasClass("active")&&c(t,a,t.find("> ."+e.classnames.s_filter)),o=a.offset().left-e.$grid.offset().left-1,s={left:"100%"},a.hasClass("position-right")||l+r>d-o?(n.css({left:"auto",right:"50%"}),s={right:"100%"}):n.css({left:"50%",right:"auto"}),s.opacity=1,i.addClass("active"),n.show().stop().animate(s,"fast")},function(){return i.hasClass(e.classnames.li_filter)?!1:void c(i,a,n)}),i.on("bjui.datagrid.th.submenu.hide",function(e,i,a){c(t(this),i,a)})},locking:function(t){var i=t.data("index"),a=e.columnModel[i],n=a.lock,o=a.locked,s=e.$menu,l=s.find("> ul"),r=l.find("> li."+e.classnames.li_lock),d=r.next();o?(r.addClass("disable"),d.removeClass("disable")):(d.addClass("disable"),r.removeClass("disable")),n?(r.show().off("click").on("click",function(){r.hasClass("disable")||(s.hide().data("bjui.datagrid.menu.btn").removeClass("active"),e.colLock(t,!0))}),d.show().off("click").on("click",function(){d.hasClass("disable")||(s.hide().data("bjui.datagrid.menu.btn").removeClass("active"),e.colLock(t,!1))})):(r.hide().off("click"),d.hide().off("click"))},createShowhide:function(){var i;e.$showhide||(e.col_showhide_count=e.columnModel.length,i=t('<ul class="'+e.classnames.s_showhide+'" role="menu"></ul>'),t.each(e.columnModel,function(a,n){(n.gridNumber||n.gridCheckbox||n.gridEdit)&&e.col_showhide_count--;var o=t(FRAG.gridShowhide.replaceAll("#index#",n.index).replaceAll("#label#",n.label||"")).toggleClass("nodisable",!!(n.gridNumber||n.gridCheckbox||n.gridEdit)),s=function(a){o.click(function(){if(t(this).hasClass("disable"))return!1;var n=t(this),o=!n.find("i").hasClass("fa-check-square-o");a.index;n.toggleClass("datagrid-col-check").find("i").attr("class","fa fa"+(o?"-check":"")+"-square-o"),e.showhideColumn(a.th,o),a.gridNumber||a.gridCheckbox||a.gridEdit||(e.col_showhide_count=o?e.col_showhide_count+1:e.col_showhide_count-1),1==e.col_showhide_count?i.find("> li.datagrid-col-check").addClass("disable"):i.find("> li.disable").removeClass("disable"),i.find("> li.nodisable").removeClass("disable")})};s(n),o.appendTo(i),n.hide&&o.trigger("click")}),i.appendTo(e.$grid),i.data("width",i.outerWidth()),e.$showhide=i)},showhide:function(t,i){var a=t.index,n=t.th,o=e.$tbody.find("> tr"),s=i?"":"none",l=function(t){var e=t.colspan;i?e++:e--,e?t.th.css("display",""):t.th.css("display","none"),t.th.attr("colspan",e),t.colspan=e,t.parent&&l(t.parent)};"undefined"==typeof t.hidden&&(t.hidden=!1),t.hidden!=!i&&(t.hidden=!i,n.css("display",s),o.find("> td:eq("+a+")").css("display",s),e.$colgroupH.find("> col").eq(a).css("display",s),e.$colgroupB.find("> col").eq(a).css("display",s),e.$thead.find("> tr.datagrid-filter > th:eq("+a+")").css("display",s),e.$boxF&&(e.$tableF.find("> thead > tr > th:eq("+a+")").css("display",s),e.$colgroupF.find("> col").eq(a).css("display",s)),t.calc&&e.$tfoot&&e.$tfoot.trigger("bjui.datagrid.tfoot.resizeH"),t.parent&&l(t.parent))},jumpPage:function(t,a){var n,o=e.allData;t&&(e.paging.pageCurrent=t),a&&(e.paging.pageSize=a,e.paging.pageCount=this.getPageCount(a,e.paging.total),e.paging.pageCurrent>e.paging.pageCount&&(e.paging.pageCurrent=e.paging.pageCount)),"remote"==i.local?(n=this.getRemoteFilterData(!0),this.loadData(n,!0)):this.initTbody(o,!0)},quickSort:function(t){if(e.isDom){if("local"==i.local)return;i.sortAll=!0}if(e.$tbody.find("> tr."+e.classnames.tr_edit).length)return void e.$tbody.alertmsg("info",BJUI.getRegional("datagrid.editMsg"));var a,n,o=t.th,s=e.data,l=e.allData,r=t.name,d=t.type,c=e.$thead.find("> tr > th.datagrid-quicksort-th");r||(r="datagrid-noname");var u=function(e){e.sort(function(e,i){var a=typeof e[r],n=typeof i[r];return"boolean"==d||"number"==d||(a="number"==n)||(a="boolean"==n)?t.sortAsc?e[r]-i[r]:i[r]-e[r]:t.sortAsc?String(e[r]).localeCompare(i[r]):String(i[r]).localeCompare(e[r])})};c.find("> div > .datagrid-label > i").remove(),t.sortAsc?(n="desc",t.sortAsc=!1):(n="asc",t.sortAsc=!0),o.find("> div > .datagrid-label").prepend('<i class="fa fa-long-arrow-'+(t.sortAsc?"up":"down")+'"></i>'),i.sortAll?"remote"==i.local?(a={},a[BJUI.pageInfo.orderField]=r,a[BJUI.pageInfo.orderDirection]=n,a[BJUI.pageInfo.pageSize]=e.paging.pageSize,a[BJUI.pageInfo.pageCurrent]=e.paging.pageCurrent,this.loadData(a,!0)):(u(l),this.initTbody(l,!0)):(u(s),this.createTrs(s,!0))},quickFilter:function(a,n){
if(e.isDom){if("remote"!=i.local)return void BJUI.debug("Datagrid Plugin: Please change the local option is remote!");if(!i.dataUrl)return void BJUI.debug("Datagrid Plugin: Not Set the dataUrl option!")}var o,s=this,l=(a.th,e.data),r=e.allData,d=a.name,c=function(t,e,i){var n=!1;switch(t){case"=":n=String(e)==String(i);break;case"!=":n=String(e)!=String(i);break;case">":n=parseFloat(i)>parseFloat(e);break;case"<":n=parseFloat(i)<parseFloat(e);break;case"like":n="select"==a.type?String(e)==String(i):String(i).indexOf(String(e))>=0}return n},u=function(e,i){var a=function(e){var a=0;return t.each(i,function(t,i){var n=i.datas;return a++,n?(i.model.isFiltered=!0,i.model.th.trigger("bjui.datagrid.th.filter",[!0]),void(n.andor?"and"==n.andor?c(n.operatorA,n.valA,e[t])&&c(n.operatorB,n.valB,e[t])&&a--:"or"==n.andor&&(c(n.operatorA,n.valA,e[t])||c(n.operatorB,n.valB,e[t]))&&a--:n.operatorB?c(n.operatorB,n.valB,e[t])&&a--:c(n.operatorA,n.valA,e[t])&&a--)):(a--,i.model.isFiltered=!1,i.model.th.trigger("bjui.datagrid.th.filter",[!1]),i.model.quickfilter&&i.model.quickfilter.trigger("bjui.datagrid.thead.clearfilter"),!0)}),!a};return t.grep(e,function(t,e){return a(t)})};e.filterDatas||(e.filterDatas={}),i.filterMult?e.filterDatas[d]={datas:n,model:a}:(e.filterDatas={},e.filterDatas[d]={datas:n,model:a}),"remote"!=i.local&&r&&(e.oldAllData?r=e.oldAllData.concat():e.oldAllData=r.concat()),i.filterAll?"remote"==i.local?s.loadData(s.getRemoteFilterData(),!0):(o=u(r,e.filterDatas),e.paging.pageCurrent=1,e.paging.pageCount=this.getPageCount(e.paging.pageSize,o.length),this.initTbody(o,!0)):e.isDom?s.loadData(s.getRemoteFilterData(),!0):(o=u(l,e.filterDatas),this.createTrs(o,!0))},getRemoteFilterData:function(a){var n=[];return e.filterDatas&&!t.isEmptyObject(e.filterDatas)&&(t.each(e.filterDatas,function(t,e){return e.datas?(e.model.isFiltered=!0,e.model.th.trigger("bjui.datagrid.th.filter",[!0]),i.jsonPrefix&&(t=i.jsonPrefix+"."+t),e.datas.andor&&n.push({name:"andor",value:e.datas.andor}),e.datas.operatorA&&(n.push({name:t,value:e.datas.valA}),n.push({name:t+".operator",value:e.datas.operatorA})),void(e.datas.operatorB&&(n.push({name:t,value:e.datas.valB}),n.push({name:t+".operator",value:e.datas.operatorB})))):(e.model.isFiltered=!1,e.model.th.trigger("bjui.datagrid.th.filter",[!1]),e.model.quickfilter&&e.model.quickfilter.trigger("bjui.datagrid.thead.clearfilter"),!0)}),a||(e.paging.pageCurrent=1)),n.push({name:BJUI.pageInfo.pageSize,value:e.paging.pageSize}),n.push({name:BJUI.pageInfo.pageCurrent,value:e.paging.pageCurrent}),n},setDomData:function(i){var a=e.columnModel,n={},o=i.attr("data-hidden-datas"),s=e.attach;return i.find("> td").each(function(e){var i=t(this),o=a[e],s=i.attr("data-val")||i.text();o.name?n[o.name]=s:n["datagrid-noname"+e]=s}),o&&(o=o.toObj()),t.extend(n,s,{gridNumber:i.index()+1},o),i.data("initData",n),n},initEditInputs:function(){var i=e.columnModel;return e.inputs=[],t.each(i,function(i,a){var n=a.name,o="",s="",l=[],r="";if(a)if(a.attrs&&"object"==typeof a.attrs&&t.each(a.attrs,function(t,e){r+=" "+t+"="+e}),a==e.linenumberColumn||a==e.checkboxColumn||a==e.editBtnsColumn)e.inputs.push("");else if(n)if(a.rule?o=' data-rule="'+a.label+"："+a.rule+'"':"date"==a.type&&(o=' data-rule="pattern('+(a.pattern||"yyyy-MM-dd")+')"'),a.type)switch(a.type){case"date":a.pattern||(a.pattern="yyyy-MM-dd"),s=' data-pattern="'+a.pattern+'"',e.inputs.push('<input type="text" name="'+n+'" data-toggle="datepicker"'+s+o+r+">");break;case"select":if(!a.items)return;t.each(a.items,function(e,i){t.each(i,function(t,e){l.push('<option value="'+t+'">'+e+"</option>")})}),e.inputs.push('<select name="'+n+'" data-toggle="selectpicker"'+o+r+' data-width="100%">'+l.join("")+"</select>");break;case"boolean":e.inputs.push('<input type="checkbox" name="'+n+'" data-toggle="icheck"'+o+r+' value="true">');break;case"lookup":e.inputs.push('<input type="text" name="'+n+'" data-toggle="lookup" data-custom-event="true"'+o+r+">");break;case"spinner":e.inputs.push('<input type="text" name="'+n+'" data-toggle="spinner"'+o+r+">");break;case"textarea":e.inputs.push('<textarea data-toggle="autoheight" rows="1"'+o+r+"></textarea>");break;default:e.inputs.push('<input type="text" name="'+n+'"'+o+r+">")}else e.inputs.push('<input type="text" name="'+n+'"'+o+r+">");else e.inputs.push("")}),e.inputs},contextmenuH:function(){var i=this;e.$tableH.on("contextmenu",function(a){e.$showhide||i.createShowhide();var n=a.pageX,o=a.pageY;t(window).width()<n+e.$showhide.width()&&(n-=e.$showhide.width()),t(window).height()<o+e.$showhide.height()&&(o-=e.$showhide.height()),e.$menu&&e.$grid.trigger("click.bjui.datagrid.filter"),e.$showhide.appendTo("body").css({left:n,top:o,opacity:1,"z-index":9999}).show(),t(document).on("click",function(i){var a=t(i.target).closest("."+e.classnames.s_showhide);a.length||e.$showhide.css({left:"50%",top:0,opacity:.2,"z-index":""}).hide().appendTo(e.$grid)}),a.preventDefault(),a.stopPropagation()})},contextmenuB:function(t,i){t.contextmenu("show",{exclude:"input, .bootstrap-select",items:[{icon:"refresh",title:BJUI.getRegional("datagrid.refresh"),func:function(t,i){e.refresh()}},{title:"diver"},{icon:"plus",title:BJUI.getRegional("datagrid.add"),func:function(t,i){e.add()}},{icon:"edit",title:BJUI.getRegional("datagrid.edit"),func:function(t,a){var n=t;i&&(n=e.$tbody.find("> tr:eq("+n.index()+")")),e.doEditRow(n)}},{icon:"undo",title:BJUI.getRegional("datagrid.cancel"),func:function(t,a){var n=t;i&&(n=e.$tbody.find("> tr:eq("+n.index()+")")),n.hasClass(e.classnames.tr_edit)||(n=e.$tbody.find("> tr."+e.classnames.tr_edit)),e.doCancelEditRow(n)}},{icon:"remove",title:BJUI.getRegional("datagrid.del"),func:function(t,a){var n=t;i&&(n=e.$tbody.find("> tr:eq("+n.index()+")")),e.delRows(n)}}]})}};return a},i.prototype.createTable=function(){var t=this,e=t.options,i=t.tools;e.columns&&i.createThead(),(e.data||e.dataUrl)&&i.createTbody()},i.prototype.setColumnModel=function(){var e=this,i=e.options,a=e.$thead.find("> tr"),n=[],o=[],s=a.length;if(!e.isDom){e.tools.appendColumns();var l,r=s>1?' rowspan="'+s+'"':"";i.showCheckboxcol&&(e.columnModel.push(e.checkboxColumn),"lock"==i.showCheckboxcol&&(e.checkboxColumn.initLock=!0),l=t("<th"+r+'><input type="checkbox" data-toggle="icheck"></th>'),l.prependTo(a.first()),r&&l.data("datagrid.column",e.checkboxColumn)),i.showLinenumber&&(e.columnModel.unshift(e.linenumberColumn),"lock"==i.showLinenumber&&(e.linenumberColumn.initLock=!0),l=t('<th class="datagrid-linenumber-td"'+r+">No.</th>"),l.prependTo(a.first()),r&&l.data("datagrid.column",e.linenumberColumn)),i.showEditbtnscol&&(e.columnModel[l.index()]=e.editBtnsColumn,l=t("<th"+r+">Edit</th>"),l.appendTo(a.first()),r&&l.data("datagrid.column",e.editBtnsColumn))}a.length&&1==s?(a.height(25),a.find("> th").each(function(a){var n=t(this).addClass("single-row"),o=n.data("options"),s=n.attr("width")||n.outerWidth(),l=n.html();e.columnModel.length&&e.columnModel[a]?o=e.columnModel[a]:(o&&"string"==typeof o&&(o=o.toObj()),"object"!=typeof o&&(o={}),o.index=a,o.label=l,o.width="undefined"==typeof o.width?s:o.width,o.menu="undefined"==typeof o.menu?!0:o.menu,o.lock="undefined"==typeof o.lock?!0:o.lock,o.hide="undefined"==typeof o.hide?!1:o.hide,o.edit="undefined"==typeof o.edit?!0:o.edit,o.add="undefined"==typeof o.add?!0:o.add,o.quicksort="undefined"==typeof o.quicksort?!0:o.quicksort,e.columnModel[a]=o),o.th=n,n.html('<div><div class="datagrid-space"></div><div class="datagrid-label">'+l+'</div><div class="'+e.classnames.th_cell+'"><div class="'+e.classnames.th_resizemark+'"></div></div></div>'),o.menu&&i.columnMenu&&n.addClass(e.classnames.th_menu),i.fieldSortable&&o.quicksort&&n.addClass("datagrid-quicksort-th"),o.align&&n.attr("align",o.align),n.data("index",a).find("> div").css("height","24px")})):a.each(function(a){var s=[],l=[],r=-1,d=0;n.length&&(s=n.concat(),l=o.concat()),n=[],o=[],t(this).height(25).find("> th").each(function(a){var c=t(this),u=c.data("options")||c.data("datagrid.column")||{},h=parseInt(c.attr("colspan")||0),p=parseInt(c.attr("rowspan")||0),f=c.attr("width")||c.outerWidth(),g=c.html();if(u&&"string"==typeof u&&(u=u.toObj()),"object"!=typeof u&&(u={}),-[1]||1!=h||(h=0),u.label=g,u.th=c,u.gridCheckbox&&(u.label="Checkbox"),r++,h){u.colspan=h;for(var m=s.length?s[r]:r,b=m;m+h>b;b++)n[d++]=b,o[d-1]=u;r+=h-1,c.data("index",r),s.length&&(u.parent=l[r])}p&&1!=p||c.addClass("single-row"),h?c.html('<div style="height:'+(p?24*p:24)+'px;"><div class="datagrid-space"></div><div class="datagrid-label">'+g+'</div><div class="'+e.classnames.th_cell+'"><div class="'+e.classnames.th_resizemark+'"></div></div></div>'):(u.width="undefined"==typeof u.width?f:u.width,u.menu="undefined"==typeof u.menu?!0:u.menu,u.lock="undefined"==typeof u.lock?!0:u.lock,u.hide="undefined"==typeof u.hide?!1:u.hide,u.edit="undefined"==typeof u.edit?!0:u.edit,u.add="undefined"==typeof u.add?!0:u.add,u.quicksort="undefined"==typeof u.quicksort?!0:u.quicksort,c.html('<div style="height:'+(p?24*p:24)+'px;"><div class="datagrid-space"></div><div class="datagrid-label">'+g+'</div><div class="'+e.classnames.th_cell+'"><div class="'+e.classnames.th_resizemark+'"></div></div></div>'),u.menu&&i.columnMenu&&c.addClass(e.classnames.th_menu),i.fieldSortable&&u.quicksort&&c.addClass("datagrid-quicksort-th"),u.align&&c.attr("align",u.align),s.length?(u.index=s[r],u.parent=l[r],e.columnModel[s[r]]=u):(u.index=r,e.columnModel[r]=u),c.data("index",u.index))})})},i.prototype.init=function(){if(this.$element.isTag("table")&&!this.$element.data("bjui.datagrid.init")){var e,i,a=this,n=a.tools,o=a.$element.parent();a.options.options&&("string"==typeof a.options.options&&(a.options.options=a.options.options.toObj()),t.extend(a.options,"object"==typeof a.options.options&&a.options.options)),a.parentH=o.height(),e=a.options,a.$element.data("bjui.datagrid.init",!0),e.width||(i=o.width()),String(e.width).endsWith("%")&&(i=Math.round(o.width()*parseInt(String(e.width).replace("%",""))/100)),e.height=e.height||300,a.isDom=!1,a.columnModel=[],a.inputs=[],a.$grid=t('<div class="bjui-datagrid"></div>').width(e.width).height(e.height),a.$boxH=t('<div class="datagrid-box-h"></div>'),a.$boxB=t('<div class="datagrid-box-b"></div>'),a.$boxM=t('<div class="datagrid-box-m"></div>').appendTo(a.$grid),a.regional=BJUI.regional.datagrid,a.$element.before(a.$grid),"string"==typeof e.paging&&(e.paging=e.paging.toObj()),a.paging=t.extend({},{pageSize:30,selectPageSize:"30,60,90",pageCurrent:1,total:0,showPagenum:5},"object"==typeof e.paging&&e.paging),a.attach={gridNumber:0,gridCheckbox:"#checkbox#",gridEdit:"#edit#"},a.$thead=a.$element.find("> thead"),a.$tbody=a.$element.find("> tbody"),a.$tbody&&a.$tbody.find("> tr").length&&(a.isDom=!0),e.columns?("string"==typeof e.columns&&(e.columns.trim().startsWith("[")?e.columns=e.columns.toObj():e.columns=e.columns.toFunc()),"function"==typeof e.columns&&(e.columns=e.columns.call()),a.$thead=null,n.createThead()):a.$thead&&a.$thead.length&&a.$thead.find("> tr").length&&a.setColumnModel(),a.initTop(),a.$grid.data("bjui.datagrid.table",a.$element.clone()),a.isDom?(n.appendColumns(),a.$tbody.find("> tr > td").each(function(){var e=t(this),i=e.html();e.html("<div>"+i+"</div>")}),a.paging.total?a.paging.pageCount=n.getPageCount(a.paging.pageSize,a.paging.total):(a.paging.total=a.$tbody.find("> tr").length,a.paging.pageCount=1),a.paging.pageCurrent=1,a.initThead()):(a.$tbody=null,(e.data||e.dataUrl)&&n.createTbody())}},i.prototype.refresh=function(){var e=this,i=e.options,a=e.tools,n=(e.isDom,BJUI.pageInfo),o=e.paging,s={};return i.dataUrl?(s[n.pageSize]=o.pageSize,s[n.pageCurrent]=o.pageCurrent,a.loadData(s,!0),e.filterDatas=null,t.each(e.columnModel,function(t,e){e.th.trigger("bjui.datagrid.th.filter",[!1]),e.isFiltered=!1,e.quickfilter&&e.quickfilter.trigger("bjui.datagrid.thead.clearfilter")}),void e.$thead.find("> tr > th.datagrid-quicksort-th").find("> div > .datagrid-label > i").remove()):i.data&&i.data.length?void a.initTbody(e.allData,!0):void BJUI.debug("Datagrid Plugin: Not Set the dataUrl option!")},i.prototype.destroy=function(){var t=this,e=t.$grid.data("bjui.datagrid.table");e&&(t.$element.html(e.html()).insertBefore(t.$grid),t.$grid.remove())},i.prototype.initTop=function(){var e,i=this,a=i.options,n=(i.regional,!1),o='<div class="btn-group" role="group"></div>',s='<button type="button" class="btn" data-icon=""></button>';if(a.gridTitle&&(i.$boxT=t('<div class="datagrid-title">'+a.gridTitle+"</div>"),i.$boxT.appendTo(i.$grid)),a.showToolbar&&(a.toolbarItem||a.toolbarCustom)){if(i.$toolbar=t('<div class="datagrid-toolbar"></div'),a.toolbarItem&&(n=!0,a.toolbarItem.indexOf("all")>=0&&(a.toolbarItem="add, edit, cancel, save, |, del, |, refresh, |, import, export"),t.each(a.toolbarItem.split(","),function(n,l){return l=l.trim().toLocaleLowerCase(),e&&"|"!=l||(e=t(o).appendTo(i.$toolbar),"|"!=l)?void("add"==l?i.$toolbar_add=t(s).attr("data-icon","plus").addClass("btn-blue").text(BJUI.getRegional("datagrid.add")).appendTo(e).on("click",function(t){i.add()}):"edit"==l?i.$toolbar_edit=t(s).attr("data-icon","edit").addClass("btn-green").text(BJUI.getRegional("datagrid.edit")).appendTo(e).on("click",function(e){var n=i.$tbody.find("> tr."+i.classnames.tr_selected);n.length?a.inlineEditMult?i.doEditRow(n):i.$lastSelect?i.doEditRow(i.$lastSelect):i.doEditRow(n.first()):t(this).alertmsg("info",BJUI.getRegional("datagrid.selectMsg"))}):"cancel"==l?i.$toolbar_calcel=t(s).attr("data-icon","undo").addClass("btn-orange").text(BJUI.getRegional("datagrid.cancel")).appendTo(e).on("click",function(t){i.doCancelEditRow(i.$tbody.find("> tr."+i.classnames.tr_edit))}):"save"==l?i.$toolbar_save=t(s).attr("data-icon","save").addClass("btn-default").text(BJUI.getRegional("datagrid.save")).appendTo(e).on("click",function(t){i.doSaveEditRow()}):"del"==l?i.$toolbar_del=t(s).attr("data-icon","times").addClass("btn-red").text(BJUI.getRegional("datagrid.del")).appendTo(e).on("click",function(e){var a=i.$tbody.find("> tr."+i.classnames.tr_selected);a.length?i.delRows(a):t(this).alertmsg("info",BJUI.getRegional("datagrid.selectMsg"))}):"refresh"==l?i.$toolbar_refresh=t(s).attr("data-icon","refresh").addClass("btn-green").text(BJUI.getRegional("datagrid.refresh")).appendTo(e).on("click",function(t){i.refresh()}):"import"==l?i.$toolbar_add=t(s).attr("data-icon","sign-in").addClass("btn-blue").text(BJUI.getRegional("datagrid.import")).appendTo(e).on("click",function(t){if(a.importOption){var e=a.importOption;"string"==typeof e&&(e=e.toObj()),e.options&&e.options.url&&("dialog"==e.type?i.$grid.dialog(e.options):"navtab"==e.type?i.$grid.navtab(e.options):i.$grid.bjuiajax("doAjax",e.options))}}):"export"==l&&(i.$toolbar_add=t(s).attr("data-icon","sign-out").addClass("btn-green").text(BJUI.getRegional("datagrid.export")).appendTo(e).on("click",function(e){if(a.exportOption){var n=a.exportOption;"string"==typeof n&&(n=n.toObj()),n.options&&n.options.url&&("dialog"==n.type?i.$grid.dialog(n.options):"navtab"==n.type?i.$grid.navtab(n.options):"file"==n.type?t.fileDownload(n.options.url,{failCallback:function(t,e){t.trim().startsWith("{")&&(t=t.toObj()),i.$grid.bjuiajax("ajaxDone",t)}}):i.$grid.bjuiajax("doAjax",n.options))}}))):!0})),a.toolbarCustom){var l,r=t('<div style="display:inline-block;"></div>');if("string"==typeof a.toolbarCustom){var d=t(a.toolbarCustom);d&&d.length?l=d:(d=d.toFunc(),d&&(l=d.call(i),"string"==typeof l&&(l=t(l))))}else"function"==typeof a.toolbarCustom?(l=a.toolbarCustom.call(i),"string"==typeof l&&(l=t(l))):l=a.toolbarCustom;l&&l.length&&"string"!=typeof l&&(n&&r.css("margin-left","5px"),r.appendTo(i.$toolbar),l.appendTo(r))}i.$toolbar.appendTo(i.$grid)}},i.prototype.initThead=function(){var e,i=this,a=i.options,n=i.tools,o=i.columnModel,s=[],l=i.$tbody.find("> tr:first-child > td");i.init_thead=!0,i.$colgroupH=t("<colgroup></colgroup>"),i.$tableH=t('<table class="table table-bordered"></table>').append(i.$thead),i.$trsH=i.$thead.find("> tr"),i.table_width=0,t.each(i.columnModel,function(t,a){e=a.width?a.width:l.eq(t).outerWidth()||50,s.push('<col style="width:'+e+'px;">'),a.width=e,i.table_width+=e}),i.$thead.before(i.$colgroupH.append(s.join(""))),i.$grid.append(i.$boxH.append(t('<div class="datagrid-wrap-h"></div>').append(i.$tableH)));var r=i.$trsH.find("> th");r.filter(".datagrid-quicksort-th").on("click.bjui.datagrid.quicksort",function(e){var a=t(e.target);a.closest("."+i.classnames.th_cell).length||i.isResize||n.quickSort(o[t(this).data("index")])}),r.filter(".datagrid-column-menu").on("bjui.datagrid.th.filter",function(e,a){var n=t(this),o=n.find("> div > ."+i.classnames.th_cell+"> ."+i.classnames.btn_menu+"> .btn");a?(n.addClass("filter-active"),o.find("> i").attr("class","fa fa-filter")):(n.removeClass("filter-active"),o.find("> i").attr("class","fa fa-bars"))}),a.contextMenuH&&n.contextmenuH(),i.initTbody(),a.columnResize&&i.colResize(),a.columnMenu&&i.colMenu(),a.paging&&i.initPaging(),a.editMode&&i.edit(),i.resizeGrid();var d=function(){a.showTfoot&&i.initTfoot(),i.initLock(),i.$grid.initui(),a.height&&n.fixedH(),setTimeout(function(){i.fixedWidth("init")},500),i.initEvents()};a.filterThead?i.delayRender?i.delayFilterTimeout=setInterval(function(){i.delayRender||(clearInterval(i.delayFilterTimeout),i.filterInThead(),d())},100):(i.filterInThead(),d()):d()},i.prototype.fixedWidth=function(e){var i,a,n,o=this,s=o.options,l=0,r=o.columnModel,d=r.length;if(!e||!o.initFixedW){o.initFixedW=!0;var c=function(){o.$boxH.find("> div").css("width",""),o.$boxB.find("> div").css("width",""),o.$boxF&&o.$boxF.find("> div").css("width",""),o.$pagingCon&&o.$pagingCon.css("width",""),i=o.$boxB.find("> div").width(),i&&(o.$boxB.find("> div").width(i),o.$boxH.find("> div").width(i),o.$boxF&&o.$boxF.find("> div").width(i),o.table_width>i?o.$pagingCon&&o.$pagingCon.width(i):o.$pagingCon&&o.$pagingCon.width(o.table_width))},u=function(){i&&i<o.table_width&&(r[d-1]==o.editBtnsColumn&&(l+=o.editBtnsColumn.width,d--),r[0]==o.linenumberColumn&&(l+=o.linenumberColumn.width,d--),r[0]!=o.checkboxColumn&&r[1]!=o.checkboxColumn||(l+=o.checkboxColumn.width,d--),a=parseInt((i-o.table_width-l)/d),a?a--:a=-1,t.each(r,function(t,e){return e==o.linenumberColumn||e==o.checkboxColumn||e==o.editBtnsColumn?!0:(n=e.width+a,0>=n&&(n=1),o.$colgroupH.find("> col:eq("+e.index+")").width(n),o.$colgroupB.find("> col:eq("+e.index+")").width(n),o.$colgroupF&&o.$colgroupF.find("> col:eq("+e.index+")").width(n),void(e.new_width=n))}))};s.fullGrid?(c(),u()):c()}},i.prototype.initTbody=function(){var e=this,i=e.options,a=(e.tools,e.$tbody.find("> tr")),n=(a.find("> td"),"0");e.init_tbody=!0,e.$colgroupB=e.$colgroupH.clone(),e.$tableB=e.$element,e.$tableB.removeAttr("data-toggle width").empty().append(e.$tbody),e.$tbody.before(e.$colgroupB),e.$grid.append(e.$boxB.append(t('<div class="datagrid-wrap-b"></div>').append(e.$tableB))),-[1]||(n="auto"),i.fullGrid&&(n="100%"),e.$tableH.width(n),e.$tableB.width(n),e.$tableB.addClass("table table-bordered").removeClass("table-hover"),e.$boxB.scroll(function(){e.$boxH.find("> div").prop("scrollLeft",this.scrollLeft),e.$boxF&&e.$boxF.find("> div").prop("scrollLeft",this.scrollLeft),e.$lockB&&e.$lockB.prop("scrollTop",this.scrollTop)}),e.isDom&&(i.showLinenumber&&e.showLinenumber(i.showLinenumber),i.showCheckboxcol&&e.showCheckboxcol(i.showCheckboxcol),i.showEditbtnscol&&e.showEditCol(i.showEditbtnscol),e.$grid.data(e.datanames.tbody,e.$tbody.clone()))},i.prototype.initEvents=function(e){var i=this,a=i.options,n=i.$tbody.find("> tr");e||(e=n),e.on("click.bjui.datagrid.tr",function(e,a){var n,o=t(this),s=o.index(),l=i.$tbody.find("> tr."+i.classnames.tr_selected),r=i.$lastSelect;i.$lockTbody&&i.$lockTbody.find("> tr");if(a)n=a.is(":checked"),n||(i.$lastSelect=o),i.selectedRows(o,!n);else{if(o.hasClass(i.classnames.tr_edit))return;BJUI.KeyPressed.ctrl||BJUI.KeyPressed.shift?(window.getSelection?window.getSelection().removeAllRanges():document.selection.empty(),BJUI.KeyPressed.ctrl?(o.hasClass(i.classnames.tr_selected)||(i.$lastSelect=o),i.selectedRows(o)):BJUI.KeyPressed.shift&&(r||(r=i.$lastSelect=o),r.length&&(i.selectedRows(null),r.index()!=s?r.index()>s?i.selectedRows(o.nextUntil(r).add(o).add(r),!0):i.selectedRows(o.prevUntil(r).add(o).add(r),!0):i.selectedRows(s)))):l.length>1&&o.hasClass(i.classnames.tr_selected)?(i.selectedRows(l.not(o)),i.$lastSelect=o):(l.length&&l[0]!=this&&i.selectedRows(null),o.hasClass(i.classnames.tr_selected)||(i.$lastSelect=o),i.selectedRows(o))}}).on("mouseenter.bjui.datagrid",function(e){var a=t(this),n=a.index();a.addClass("datagrid-hover"),i.$lockTbody&&i.$lockTbody.find("> tr:eq("+n+")").addClass("datagrid-hover")}).on("mouseleave.bjui.datagrid",function(e){var a=t(this),n=a.index();a.removeClass("datagrid-hover"),i.$lockTbody&&i.$lockTbody.find("> tr:eq("+n+")").removeClass("datagrid-hover")}).on("bjui.datagrid.tr.delete",function(e){var a,n=t(this),o=n.index(),s=i.data,l=i.allData,r=i.$lockTbody&&i.$lockTbody.find("> tr");i.isDom||(a=s[o].gridIndex,i.data=s.remove(o),i.allData=l.remove(a)),i.columnModel[0]==i.linenumberColumn&&(n.nextAll().each(function(){var e=t(this).find("> td:eq(0)"),i=parseInt(e.text());e.text(i-1)}),r&&r.eq(o).trigger("bjui.datagrid.tr.delete",[o])),n.remove()}),a.contextMenuB&&e.each(function(){i.tools.contextmenuB(t(this))}),e.each(function(){var e=t(this);e.find("> td."+i.classnames.td_checkbox).find("input").on("ifClicked",function(){e.trigger("click.bjui.datagrid.tr",[t(this)])})}),i.checkboxColumn&&i.checkboxColumn.th&&i.checkboxColumn.th.find("input").on("ifChanged",function(){var e=t(this).is(":checked"),a=i.$tbody.find("> tr");i.selectedRows(a,e)})},i.prototype.initTfoot=function(){var e=this,i=e.options,a=e.tools,n=e.columnModel,o=t("<tr></tr>");e.$boxF=t('<div class="datagrid-box-f"></div>'),e.$colgroupF=e.$colgroupH.clone(),e.$tableF=e.$tableH.clone().empty(),e.$tableF.append(e.$colgroupF),e.$boxF.append(t('<div class="datagrid-wrap-h"></div>').append(e.$tableF)),e.$boxF.insertAfter(e.$boxB),e.$tfoot=t("<thead></thead>"),t.each(n,function(e,i){var a=t("<th><div></div></th>");if(i.calc){var n='<div><div class="datagrid-calcbox">#tit#</div>#number#</div>';"avg"==i.calc?a.html(n.replace("#tit#",i.calcTit||"AVG").replace("#number#",(i.calc_sum/i.calc_count).toFixed(i.calcDecimal||2))):"count"==i.calc?a.html(n.replace("#tit#",i.calcTit||"COUNT").replace("#number#",i.calc_count)):"sum"==i.calc?a.html(n.replace("#tit#",i.calcTit||"SUM").replace("#number#",i.calc_sum)):"max"==i.calc?a.html(n.replace("#tit#",i.calcTit||"MAX").replace("#number#",i.calc_max)):"min"==i.calc&&a.html(n.replace("#tit#",i.calcTit||"MIN").replace("#number#",i.calc_min))}i.hidden&&a.css("display","none"),a.appendTo(o)}),e.$tfoot.append(o).appendTo(e.$tableF),e.$tfoot.on("bjui.datagrid.tfoot.resizeH",function(){a.setBoxbH(i.height)})},i.prototype.selectedRows=function(e,i){var a=this,n=a.$lockTbody&&a.$lockTbody.find("> tr"),o=a.$tbody.find("> tr"),s=function(t){"undefined"==typeof i&&(i=!0),o.eq(t).toggleClass(a.classnames.tr_selected,i).find("> td."+a.classnames.td_checkbox+" input").iCheck(i?"check":"uncheck"),n&&n.eq(t).toggleClass(a.classnames.tr_selected,i).find("> td."+a.classnames.td_checkbox+" input").iCheck(i?"check":"uncheck")};null==e?(o.removeClass(a.classnames.tr_selected).find("> td."+a.classnames.td_checkbox+" input").iCheck("uncheck"),n&&n.removeClass(a.classnames.tr_selected).find("> td."+a.classnames.td_checkbox+" input").iCheck("uncheck")):"object"==typeof e?e.each(function(){var e=t(this),o=e.index();"undefined"!=typeof i?s(o):(e.toggleClass(a.classnames.tr_selected).trigger("bjui.datagrid.tr.selected").find("> td."+a.classnames.td_checkbox+" input").iCheck(e.hasClass(a.classnames.tr_selected)?"check":"uncheck"),n&&n.eq(o).toggleClass(a.classnames.tr_selected).trigger("bjui.datagrid.tr.selected").find("> td."+a.classnames.td_checkbox+" input").iCheck(e.hasClass(a.classnames.tr_selected)?"check":"uncheck"))}):isNaN(e)?t.each(e.split(","),function(t,e){s(parseInt(e.trim()))}):isNaN(e)||s(parseInt(e)),a.$lastSelect&&!a.$lastSelect.hasClass(a.classnames.tr_selected)&&(a.$lastSelect=null),a.$element.data("selectedTrs",a.$tbody.find("> tr."+a.classnames.tr_selected))},i.prototype.initLock=function(){var e=this;e.columnModel;e.col_lock_count=0,t.each(e.columnModel,function(t,i){i.initLock&&e.col_lock_count++}),e.col_lock_count&&e.doLock()},i.prototype.colLock=function(e,i){var a,n,o,s=this;if("number"==t.type(e)){if(n=parseInt(e),0>n||n>s.columnModel.length-1)return;o=s.columnModel[n],a=o.th}else a=e,n=a.data("index"),o=s.columnModel[n];o!=s.editBtnsColumn&&o.index!=s.columnModel.length-1&&("undefined"==typeof o.locked&&(o.locked=!1),o.locked!=i&&(o.initLock=i,i?s.col_lock_count++:s.col_lock_count--,s.col_lock_count<0&&(s.col_lock_count=0),s.doLock()))},i.prototype.fixedLockItem=function(e){var i=this,a=i.columnModel,n=i.$thead.find("> tr.datagrid-filter > th"),o=i.$lockTbody&&i.$lockTbody.find("> tr");e?(n&&n.length&&i.$lockThead.find("> tr.datagrid-filter > th:visible").each(function(){var e=t(this),i=e.index(),a=n.eq(i);a.clone().html("").insertAfter(a),a.show().insertAfter(e),e.remove()}),o&&o.length&&o.filter("."+i.classnames.tr_edit).each(function(){var e=t(this),n=e.index();e.find("> td."+i.classnames.td_edit+":visible").each(function(){var e,o,s=t(this),l=s.index(),r=a[l];r.locked&&(e=i.$tbody.find("> tr:eq("+n+")"),o=e.find("> td:eq("+l+")"),o.clone().insertAfter(o),o.show().insertAfter(s),s.remove())})})):(n&&n.length&&i.$lockThead&&i.$lockThead.find("> tr.datagrid-filter > th:visible").each(function(){var e=t(this),i=e.index(),a=n.eq(i);e.clone().insertAfter(e),e.hide().insertAfter(a),a.remove()}),o&&o.length&&o.filter("."+i.classnames.tr_edit).each(function(){var e,n,o=t(this),s=o.find("> td:eq("+a.lockIndex+")"),l=o.index();s.hasClass(i.classnames.td_edit)&&(e=i.$tbody.find("> tr:eq("+l+")"),n=e.find("> td:eq("+index+")"),s.clone().insertAfter(s),s.hide().insertAfter(n),n.remove())}))},i.prototype.doLock=function(){var e,i,a=this,n=(a.options,a.tools),o=a.columnModel,s=(a.$tableH.width(),0),l=0,r=a.$boxF&&!0,d=0;a.$lockBox&&a.$lockBox.length?(a.fixedLockItem(),a.$lockTableH.empty(),a.$lockTableB.empty(),a.$lockTableF&&a.$lockTableF.empty()):(a.$lockBox=t('<div class="datagrid-box-l"></div>'),a.$lockH=t('<div class="datagrid-box-h"></div>'),a.$lockB=t('<div class="datagrid-box-b"></div>'),a.$lockF=t('<div class="datagrid-box-f"></div>'),a.$lockTableH=t('<table class="table table-bordered"></table>'),a.$lockTableB=t("<table></table>").addClass(a.$tableB.attr("class")),a.$lockTableF=t('<table class="table table-bordered"></table>'),a.$lockH.append(a.$lockTableH),a.$lockB.append(a.$lockTableB),a.$lockF.append(a.$lockTableF),a.$lockBox.append(a.$lockH).append(a.$lockB).prependTo(a.$grid),r&&(a.$lockBox.append(a.$lockF),a.$lockF.css("margin-top",a.$boxB.outerHeight()-a.$boxB[0].clientHeight).height(a.$boxF.outerHeight()))),a.$boxT&&(d+=a.$boxT.outerHeight()),a.$toolbar&&(d+=a.$toolbar.outerHeight()),d&&a.$lockBox.css({top:d}),t.each(o,function(t,e){e.lockShow=!1,e.lockHide=!1,e.initLock?(e.hidden&&n.showhide(e,!0),e.lockHide=!0,e.locked=!0,e.lockIndex=l++,s+=e.width):(e.lockShow=!0,e.hidden?e.lockShow=!1:n.showhide(e,!1),e.locked&&(e.lockShow=!0),e.locked=!1)}),a.$lockThead=a.$thead.clone(!0),a.$lockTbody=a.$tbody.clone(),a.$lockColgroupH=a.$colgroupH.clone(),a.$lockColgroupB=a.$colgroupB.clone(),a.$lockTableH.append(a.$lockColgroupH).append(a.$lockThead).css("width",s),a.$lockTableB.append(a.$lockColgroupB).append(a.$lockTbody).css("width",s),r&&(a.$lockTfoot=a.$tableF.find("> thead").clone(),a.$lockColgroupF=a.$colgroupF.clone(),a.$lockTableF.append(a.$lockColgroupF).append(a.$lockTfoot).css("width",s)),t.each(a.columnModel,function(t,e){e.lockShow&&n.showhide(e,!0),e.lockHide&&n.showhide(e,!1)}),a.$boxH.find("> div").css("width",""),a.$boxB.find("> div").css("width",""),a.$boxF&&a.$boxF.find("> div").css("width",""),setTimeout(function(){var t=a.$boxB.find("> div").width();a.$boxB.find("> div").width(t),a.$boxH.find("> div").width(t),a.$boxF&&a.$boxF.find("> div").width(t)},50),0==a.col_lock_count?a.$lockBox.hide():a.$lockBox.show(),s>1&&(s-=1),a.$boxH.css("margin-left",s),a.$boxB.css("margin-left",s),r&&a.$boxF.css("margin-left",s),a.$lockB.height(a.$boxB[0].clientHeight),a.$lockB.prop("scrollTop",a.$boxB[0].scrollTop);var c=a.$lockTableH.height(),u=a.$thead.height(),h=a.$lockTableF&&a.$lockTableF.height(),p=a.$tableF&&a.$tableF.height();c!=u&&(u>c?a.$lockTableH.height(u):a.$tableH.height(c)),h&&p&&h!=p&&(p>h?a.$lockTableF.find("> thead > tr:first-child > th:visible:first").height(p):a.$tableF.find("> thead > tr:first-child > th:visible:first").height(h)),i=a.$lockTbody.find("> tr"),e=a.$tbody.find("> tr"),setTimeout(function(){var n=a.$lockTableB.height(),o=a.$tableB.height();n!=o&&(n>o?i.each(function(i){var a=t(this),n=a.find("> td:visible:first"),o=n.outerHeight();o>30&&(a.height(o),e.eq(i).height(o))}):e.each(function(e){var a=t(this),n=a.find("> td:visible:first"),o=n.outerHeight();o>30&&(a.height(o),i.eq(e).height(o))}))},20),a.fixedLockItem(1),i.find("> td:hidden").remove(),a.initLockEvents(i)},i.prototype.initLockEvents=function(e){if(this.$lockTbody){var i=this,a=i.options;e||(e=i.$lockTbody.find("> tr")),e.on("click.bjui.datagrid.tr",function(){var e=t(this).index();i.$tbody.find("> tr:eq("+e+")").trigger("click.bjui.datagrid.tr")}).on("bjui.datagrid.tr.delete",function(e,a){var n=t(this);i.linenumberColumn&&i.linenumberColumn.locked&&n.nextAll().each(function(){var e=t(this).find("> td:eq(0)"),i=parseInt(e.text());e.text(i-1)}),n.remove()}).find("> td."+i.classnames.td_checkbox+" input").on("ifChanged",function(){var e=t(this),a=e.closest("tr"),n=a.index();e.is(":checked")?(a.addClass(i.classnames.tr_selected),$trs.eq(n).addClass(i.classnames.tr_selected)):(a.removeClass(i.classnames.tr_selected),$trs.eq(n).removeClass(i.classnames.tr_selected))}),a.contextMenuB&&e.each(function(){i.tools.contextmenuB(t(this),!0)})}},i.prototype.filterInThead=function(){var e=this,i=(e.options,e.tools),a=e.regional,n=e.columnModel,o=t('<tr class="datagrid-filter"></tr>'),s=function(t,e,i){var a=e.type;"date"==a?t.on("afterchange.bjui.datepicker",function(i,a){l(e,t.val())}).change(function(){l(e,t.val())}):"lookup"==a?(i.on("customEvent.bjui.lookup",'[data-toggle="lookupbtn"]',function(i,a){for(var n in a)e.name==n&&(t.val(a[n]),l(e,a[n]))}),t.change(function(){l(e,t.val())})):t.change(function(){l(e,t.val())})},l=function(t,e){i.quickFilter(t,e?{operatorA:"like",valA:e}:null)};e.inputs&&e.inputs.length||i.initEditInputs(),t.each(n,function(i,n){var l=t(e.inputs[i]),r=t("<th></th>");"spinner"==n.type?l=t('<input type="text" name="'+n.name+'">'):"boolean"==n.type?l=t(BJUI.doRegional('<select name="'+n.name+'" data-toggle="selectpicker"><option value="">#all#</option><option value="true">#true#</option><option value="false">#false#</option></select>',a)):"select"==n.type&&l.find("> option:first-child").val()&&(l=t('<select name="'+n.name+'" data-toggle="selectpicker"></select>').append(BJUI.doRegional('<option value="">#all#</option>',a)).append(l.html())),r.append(l),n.hidden&&r.hide(),"boolean"==n.type&&r.attr("align","center"),r.appendTo(o),l.data("clearFilter",!1),s(l,n,r),l.on("bjui.datagrid.thead.clearfilter",function(){l.val(""),"boolean"!=n.type&&"select"!=n.type||l.selectpicker("refresh")}),n.quickfilter=l}),o.appendTo(e.$thead).initui()},i.prototype.showLinenumber=function(e){var i=this,a=i.options,n=i.columnModel,o=n[0];i.data;if(o==i.linenumberColumn)"string"!=typeof e||"lock"!=e&&"unlock"!=e?i.showhideColumn(o.th,!!e):i.colLock(o.th,"lock"==e);else if(e){var s,l=i.$thead.find("> tr"),r='<col style="width:30px;">',d=l.filter(".datagrid-filter"),c=l.length-d.length;o=i.linenumberColumn,n.unshift(o),i.$colgroupH.prepend(r),i.$colgroupB.prepend(r),i.$colgroupF&&i.$colgroupF.prepend(r),s=t('<th align="center" rowspan="'+c+'" class="'+i.classnames.td_linenumber+'">'+i.linenumberColumn.label+"</th>"),
l.first().prepend(s),d.length&&d.prepend("<th></th>"),o.th=s,o.index=0,o.width=30,i.$tbody.find("> tr").each(function(e){t(this).prepend('<td align="center" class="'+i.classnames.td_linenumber+'">'+(e+1)+"</td>")}),i.$tableF&&i.$tableF.find("> thead > tr").prepend("<th></th>"),t.each(n,function(t,e){e.index=t,e.th&&e.th.data("index",t)}),"lock"==e&&i.colLock(s,!0),i.$showhide&&(i.$showhide.remove(),i.colShowhide(a.columnShowhide))}},i.prototype.showCheckboxcol=function(e){var i,a=this,n=a.options,o=a.columnModel,s=o[0],l=a.data;if(o[0]==a.checkboxColumn&&(i=o[0]),o[1]==a.checkboxColumn&&(i=o[1]),i)"string"!=typeof e||"lock"!=e&&"unlock"!=e?a.showhideColumn(i.th,e):a.colLock(i.th,"lock"==e);else if(e){var r,d,c=a.$thead.find("> tr"),u='<col style="width:26px;">',h=c.filter(".datagrid-filter"),p=c.length-h.length;i=a.checkboxColumn,r=t('<th align="center" rowspan="'+p+'" class="'+a.classnames.td_checkbox+'"><div><input type="checkbox" data-toggle="icheck"></div></th>'),s==a.linenumberColumn?(o.splice(1,0,i),l&&l.splice(1,0,{name:i.name}),i.index=1,a.$colgroupH.find("> col:first").after(u),a.$colgroupB.find("> col:first").after(u),a.$colgroupF&&a.$colgroupF.find("> col:first").after(u),h.length&&h.find("> th:first").after("<th></th>"),c.first().find("> th:first").after(r),a.$tableF&&a.$tableF.find("> thead > tr > th:first").after("<th></th>")):(o.unshift(i),l&&l.unshift({name:i.name}),i.index=0,a.$colgroupH.prepend(u),a.$colgroupB.prepend(u),a.$colgroupF&&a.$colgroupF.prepend(u),h.length&&h.prepend("<th></th>"),c.first().prepend(r),a.$tableF&&a.$tableF.find("> thead > tr").prepend("<th></th>")),r.initui(),i.th=r,i.width=26,a.$tbody.find("> tr").each(function(e){d=t('<td align="center" class="'+a.classnames.td_checkbox+'"><input type="checkbox" data-toggle="icheck" name="datagrid.checkbox"></td>'),0==i.index?t(this).prepend(d):t(this).find("> td:first").after(d),d.initui()}),t.each(o,function(t,e){e.index=t,e.th&&e.th.data("index",t)}),"lock"==e&&a.colLock(r,!0),a.$showhide&&(a.$showhide.remove(),a.colShowhide(n.columnShowhide))}},i.prototype.showEditCol=function(e){var i=this,a=i.options,n=i.columnModel,o=n[n.length-1];i.data;if(o==i.editBtnsColumn)i.showhideColumn(o.th,!!e);else if(e){var s,l,r=i.$thead.find("> tr"),d='<col style="width:110px;">',c=r.filter(".datagrid-filter"),u=r.length-c.length;o=i.editBtnsColumn,n.push(o),i.$colgroupH.append(d),i.$colgroupB.append(d),i.$colgroupF&&i.$colgroupF.append(d),s=t('<th align="center" rowspan="'+u+'">Edit</th>'),r.first().append(s),c.length&&c.append("<th></th>"),s.initui().data("index",n.length-1),o.th=s,o.width=110,o.index=n.length-1,i.$tbody.find("> tr").each(function(e){l=t('<td align="center" class="'+i.classnames.s_edit+'">'+BJUI.doRegional(FRAG.gridEditBtn,i.regional)+"</td>"),t(this).append(l),l.initui()}),i.edit(i.$tbody.find("> tr")),i.$tableF&&i.$tableF.find("> thead > tr").append("<th></th>"),i.$showhide&&(i.$showhide.remove(),i.colShowhide(a.columnShowhide))}},i.prototype.colResize=function(){var e=this,i=e.tools,a=e.columnModel,n=e.$thead,o=e.$grid.find("> .resizeProxy");o.length||(o=t('<div class="resizeProxy" style="left:0; display:none;"></div>'),o.appendTo(e.$grid)),n.find("> tr > th").each(function(n){var s=t(this),l=s.find("> div > ."+e.classnames.th_cell+"> ."+e.classnames.th_resizemark);l.on("mousedown.bjui.datagrid.resize",function(n){var l,r,d=e.$boxH.scrollLeft(),c=parseInt(e.$boxH.css("marginLeft")||0),u=i.getRight(s)-d+c,h=s.data("index"),p=a[h],f=p.th.width(),g=e.$tbody.find("> tr"),m=e.$lockTbody&&e.$lockTbody.find("> tr"),b=e.$lockTableB&&e.$lockTableB.height(),v=e.$tableB.height();e.isResize=!0,p.locked&&(u=i.getRight4Lock(p.lockIndex),p.lockWidth&&(f=p.lockWidth)),o.show().css({left:u,bottom:e.$box_paging?e.$box_paging.outerHeight():0,cursor:"col-resize"}).basedrag({scop:!0,cellMinW:20,relObj:o,move:"horizontal",event:n,stop:function(){var i=o.position().left,a=i-u,n=a+f,s=e.$tableH.width()+a,d=e.$lockTableH&&e.$lockTableH.width()+a;if(5>n&&(n=20),p.minWidth&&n<p.minWidth&&(n=p.minWidth),n!=f+a&&(s=s-a+(n-f),d=d-a+(n-f)),p.width=n,p.locked){if(d<.75*e.$grid.width()){p.lockWidth=n,e.$lockColgroupH.find("> col:eq("+h+")").width(n),e.$lockColgroupB.find("> col:eq("+h+")").width(n),e.$lockColgroupF&&e.$lockColgroupF.find("> col:eq("+h+")").width(n),e.$lockTableH.width(d),e.$lockTableB.width(d),e.$lockTableF&&e.$lockTableF.width(d);var c=e.$lockBox.width();e.$boxH.css("margin-left",c-1),e.$boxB.css("margin-left",c-1),e.$boxF&&e.$boxF.css("margin-left",c-1),e.$colgroupH.find("> col:eq("+h+")").width(n),e.$colgroupB.find("> col:eq("+h+")").width(n),e.$colgroupF&&e.$colgroupF.find("> col:eq("+h+")").width(n)}}else setTimeout(function(){e.$colgroupH.find("> col:eq("+h+")").width(n),e.$colgroupB.find("> col:eq("+h+")").width(n),e.$colgroupF&&e.$colgroupF.find("> col:eq("+h+")").width(n)},1);setTimeout(function(){g.css("height",""),r=e.$tableB.height(),e.$lockTbody&&(m.css("height",""),l=e.$lockTableB.height(),l==b&&r==v||(l>r?m.each(function(e){var i=t(this),a=i.find("> td:eq("+p.lockIndex+")"),n=a.outerHeight();n>30&&(i.height(n),g.eq(e).height(n))}):g.each(function(e){var i=t(this),a=i.find("> td:eq("+h+")"),n=a.outerHeight();n>30&&(i.height(n),m.eq(e).height(n))})),e.$lockB.height(e.$boxB[0].clientHeight)),p.calc&&e.$tfoot&&e.$tfoot.trigger("bjui.datagrid.tfoot.resizeH"),e.isResize=!1},10),o.hide(),e.resizeFlag=!0}})})})},i.prototype.colMenu=function(){var e=this,i=e.options,a=e.tools,n=e.regional,o=e.$trsH.find("> th."+e.classnames.th_menu),s=e.$grid.find("> ."+e.classnames.s_menu);s.legnth||(s=t(BJUI.doRegional(FRAG.gridMenu,n)),s.hide().appendTo(e.$grid),e.$menu=s),e.colShowhide(i.columnShowhide),o.each(function(){var i,n=t(this),o=n.data("index"),l=e.columnModel[o],r=n.find("> div > ."+e.classnames.th_cell),d=r.find("> ."+e.classnames.btn_menu);d.length||(i=t('<button class="btn btn-default"><i class="fa fa-bars"></button>'),d=t('<div class="'+e.classnames.btn_menu+'"></div>').append(i),d.appendTo(r),i.click(function(){var o,r,d=(n.closest("tr"),parseInt(n.attr("rowspan")||1)),c=t(this).offset().left-e.$grid.offset().left-1,u=25*(e.$trsH.length-d)+13*d+11,h=s.find("> ul > li.datagrid-li-showhide"),p=s.data("bjui.datagrid.menu.btn");p&&p.length&&p.removeClass("active"),t(this).addClass("active"),h.length&&e.$showhide&&(e.$showhide.appendTo(h),r=e.$showhide.data("width")),s.css({position:"absolute",top:u,left:c}).show().data("bjui.datagrid.menu.btn",i).siblings("."+e.classnames.s_menu).hide(),o=s.outerWidth();var f=function(t){e.$boxH.width()-t<o?s.css({left:t-o+18}).addClass("position-right"):s.css({left:t}).removeClass("position-right")},g=function(t){e.$boxB.scroll(function(){var i=t.offset().left-e.$grid.offset().left-1;f(i)})};f(c),g(i),e.colFilter(n,!0),a.locking(n);var m=s.find("> ul > li."+e.classnames.li_asc),b=m.next();m.click(function(){l.sortAsc=!1,a.quickSort(l)}),b.click(function(){l.sortAsc=!0,a.quickSort(l)}),s.on("bjui.datagrid.th.sort",function(t,e){m.toggleClass("sort-active",e),b.toggleClass("sort-active",!e)})}))}),e.$grid.on("click.bjui.datagrid.filter",function(i){var a=t(i.target),n=e.$grid.find("."+e.classnames.s_menu+":visible");n.length&&!a.closest("."+e.classnames.btn_menu).length&&(a.closest("."+e.classnames.s_menu).length||n.hide().data("bjui.datagrid.menu.btn").removeClass("active"))})},i.prototype.colShowhide=function(t){var e=this,i=(e.options,e.tools),a=e.$menu,n=a.find("> ul"),o=n.find("> li."+e.classnames.li_showhide);t?e.$showhide||(i.createShowhide(),i.showSubMenu(o,a,e.$showhide)):o.hide()},i.prototype.showhideColumn=function(e,i){var a,n,o=this,s=o.tools;if("number"==t.type(e)){if(a=parseInt(e),0>a)return}else a=e.data("index");if(n=o.columnModel[a]){if(n.locked){if(i)return;o.colLock(n.th,i)}s.showhide(n,i)}},i.prototype.colFilter=function(e,i){var a=this,n=(a.options,a.tools),o=a.regional,s=e.data("bjui.datagrid.filter"),l=a.$menu,r=l.find("> ul > li."+a.classnames.li_filter);if(a.inputs&&a.inputs.length||n.initEditInputs(),i){if(r.find("."+a.classnames.s_filter).addClass("hide"),!s||!s.length){s=t(BJUI.doRegional(FRAG.gridFilter.replaceAll("#label#",e.text()),o)).hide().appendTo(a.$grid);var d,c,u=e.data("index"),h=a.columnModel[u],p=h.type||"string",f=h.operator||[],g=s.find("span.filter-a"),m=s.find("span.filter-b"),b=t('<select data-toggle="selectpicker" data-container="true"></select>'),v=t(a.inputs[u]);v.removeAttr("data-rule").attr("size",10).addClass("filter-input"),"string"==p||"lookup"==p?f.length||(f=["=","!=","like"]):"number"==p||"int"==p||"spinner"==p?("spinner"==p&&v.removeAttr("data-toggle"),f.length||(f=["=","!=",">","<",">=","<="])):"date"==p?f.length||(f=["=","!="]):"boolean"==p?(f.length||(f=["=","!="]),v=t(BJUI.doRegional('<select name="'+h.name+'" data-toggle="selectpicker"><option value="">#all#</option><option value="true">#true#</option><option value="false">#false#</option></select>',o))):"select"==p&&(f.length||(f=["=","!="]),v.attr("data-width","80"),v.find("> option:first-child").val()&&(v=t('<select name="'+h.name+'" data-toggle="selectpicker" data-width="80"></select>').append(BJUI.doRegional('<option value="">#all#</option>',o)).append(v.html())));for(var y=0;y<f.length;y++)b.append('<option value="'+f[y]+'">'+f[y]+"</option>");d=v,c=d.clone(),g.append(b).append(v),m.append(b.clone()).append(c),e.data("bjui.datagrid.filter",s),s.appendTo(r),s.data("width",s.outerWidth()).hide().initui(),s.on("customEvent.bjui.lookup",'[data-toggle="lookupbtn"]',function(t,e){for(var i in e)h.name==i&&v.val(e[i])});var k=s.find("button.ok"),x=s.find("button.clear"),C=s.find("select"),w=C.first(),$=C.last(),j=C.eq(1);k.click(function(){var i=w.val(),o=d.val().trim(),u=$.val(),h=c.val().trim(),p=j.val(),f={};o.length&&t.extend(f,{operatorA:i,valA:o}),h.length&&(o.length&&t.extend(f,{andor:p}),t.extend(f,{operatorB:u,valB:h})),t.isEmptyObject(f)||(n.quickFilter(a.columnModel[e.data("index")],f),a.$grid.trigger("click"),r.trigger("bjui.datagrid.th.submenu.hide",[l,s]))}),x.click(function(){var t=a.columnModel[e.data("index")];C.find("> option:first").prop("selected",!0),C.selectpicker("refresh"),d.val(""),c.val(""),t.isFiltered&&(n.quickFilter(t,null),a.$grid.trigger("click"),r.trigger("bjui.datagrid.th.submenu.hide",[l,s]))})}n.showSubMenu(r,l,s.removeClass("hide")),l.find('> ul > li:not(".'+a.classnames.li_filter+'")').on("mouseover",function(){r.hasClass("active")&&r.trigger("bjui.datagrid.th.submenu.hide",[l,s])})}else r.hide()},i.prototype.initPaging=function(){var e,i=this,a=i.tools,n=(i.options,i.paging),o=BJUI.regional.pagination,s=FRAG.gridPaging,l=[],r=n.pageCount,d=[];if(0!=n.total){e=a.getPageInterval(r,n.pageCurrent,n.showPagenum);for(var c=e.start;c<e.end;c++)l.push(FRAG.gridPageNum.replace("#num#",c).replace("#active#",n.pageCurrent==c?" active":""));s=BJUI.doRegional(s.replaceAll("#pageCurrent#",n.pageCurrent).replaceAll("#count#",n.total+"/"+parseInt(r||0)),o),i.$box_paging=t('<div class="datagrid-paging-box"></div>'),i.$pagingCon=t('<div class="paging-content"></div>').width(i.$boxB.width()),i.$refreshBtn=t('<button class="btn-default btn-refresh" title="'+o.refresh+'" data-icon="refresh"></button>'),i.$paging=t('<div class="datagrid-paging"></div>'),i.$btnpaging=t(s),i.$pagenum=t(l.join("")),i.$pagesize=t('<div class="datagrid-pagesize"><span></span></div>'),i.$selectpage=t('<select data-toggle="selectpicker"></select>'),i.$pagingCon.appendTo(i.$box_paging),i.$box_paging.appendTo(i.$grid),i.$pagesize.appendTo(i.$pagingCon),i.$refreshBtn.appendTo(i.$pagesize),i.$selectpage.appendTo(i.$pagesize),i.$paging.appendTo(i.$pagingCon),i.$btnpaging.appendTo(i.$paging),i.$pagenum.insertAfter(i.$btnpaging.find("> li.page-prev")),i.$box_paging.initui();var u=i.$btnpaging.find("> li.page-jumpto"),h=u.next(),p=h.next(),f=i.$btnpaging.find("> li.page-next"),g=f.next(),m=function(){h.addClass("disabled"),p.addClass("disabled")},b=function(){h.removeClass("disabled"),p.removeClass("disabled")},v=function(){f.addClass("disabled"),g.addClass("disabled")},y=function(){f.removeClass("disabled"),g.removeClass("disabled")},k=function(){m(),y()},x=function(){b(),v()},C=function(e){i.$selectpage.empty(),e||(e=i.paging.pageSize),d=n.selectPageSize.split(","),d.push(String(e)),t.unique(d).sort(function(t,e){return t-e}),t.each(d,function(e,a){var s=t('<option value="'+a+'">'+a+"/"+o.page+"</option>");a==n.pageSize&&s.prop("selected",!0),i.$selectpage.append(s)}),i.$selectpage.selectpicker("refresh")};1==n.pageCurrent&&k(),n.pageCurrent==n.pageCount&&(x(),1==n.pageCurrent&&m()),C(),i.$paging.on("click",".page-num",function(e){var a=t(this);a.hasClass("active")||i.jumpPage(a.text()),e.preventDefault()}).on("bjui.datagrid.paging.jump",function(e){for(var o=i.paging.pageCurrent,s=a.getPageInterval(i.paging.pageCount,o,n.showPagenum),l=[],r=s.start;r<s.end;r++)l.push(FRAG.gridPageNum.replace("#num#",r).replace("#active#",o==r?" active":""));i.$pagenum.empty(),i.$pagenum=t(l.join("")),i.$pagenum.insertAfter(p),1==o?(k(),o==i.paging.pageCount&&v()):o==i.paging.pageCount?x():(b(),y()),u.find("input").val(o),i.$btnpaging.find("> li.page-total > span").html(i.paging.total+"/"+i.paging.pageCount)}),i.$selectpage.on("bjui.datagrid.paging.pageSize",function(t,e){C(e)}),u.find("input").on("keyup",function(e){if(e.which==BJUI.keyCode.ENTER){var a=t(this).val();a&&i.jumpPage(a)}}),h.on("click",function(){i.paging.pageCurrent>1&&i.jumpPage(1)}),p.on("click",function(){i.paging.pageCurrent>1&&i.jumpPage(i.paging.pageCurrent-1)}),f.on("click",function(){i.paging.pageCurrent<i.paging.pageCount&&i.jumpPage(i.paging.pageCurrent+1)}),g.on("click",function(){i.paging.pageCurrent<i.paging.pageCount&&i.jumpPage(i.paging.pageCount)}),i.$refreshBtn.on("click",function(){i.refresh()}),i.$selectpage.on("change",function(){var e=t(this).val();i.jumpPage(null,e)})}},i.prototype.jumpPage=function(t,e){var i=this,a=i.paging,n=a.pageCount;t&&isNaN(t)||e&&isNaN(e)||t&&(t=parseInt(t),1>t&&(t=1),t>n&&(t=n),t==a.pageCurrent)||e&&(e=parseInt(e),e>a.total)||i.tools.jumpPage(t,e)},i.prototype.add=function(e){if(this.tools.beforeEdit()){if(!this.options.editUrl)return void BJUI.debug("Datagrid Plugin: Edit url is not set!");if(this.options.editMode){this.options.inlineEditMult||this.doCancelEditRow(this.$tbody.find("> tr."+this.classnames.tr_edit));var i,a,n=this,o=n.options,s=(n.tools,n.paging),l={},r=(s.pageCurrent-1)*s.pageSize,d=function(e){var i=t("<tr></tr>").addClass(n.classnames.tr_add),a=i.clone();return t.each(n.columnModel,function(e,o){var s=t("<td></td>");o.gridNumber?s.addClass(n.classnames.td_linenumber).text(0):o.gridCheckbox?s.addClass(n.classnames.td_checkbox).html('<div><input type="checkbox" data-toggle="icheck" name="datagrid.checkbox" value="true"></div>'):o.gridEdit?s.addClass(n.classnames.s_edit).data("isAdd",!0).html(BJUI.doRegional(FRAG.gridEditBtn,n.regional)):s.text(""),o.hidden&&s.css("display","none"),o.align&&s.attr("align",o.align),l[o.name]="",o.locked?(s.clone().show().appendTo(a),s.hide().appendTo(i)):s.appendTo(i)}),l=t.extend({},n.attach,l),n.emptyData||(n.emptyData=l),{tr:i,lockTr:a.find("> td").length?a:null}};e||(e=o.addLocation||"first"),n.$lastSelect||("prev"==e?e="first":"next"==e&&(e="last")),"first"==e?(a=0,i=d(a),i.tr.prependTo(n.$tbody),i.lockTr&&i.lockTr.prependTo(n.$lockTbody)):"last"==e?(a=n.data?n.data.length:0,i=d(a),i.tr.appendTo(n.$tbody),i.lockTr&&i.lockTr.appendTo(n.$lockTbody)):"prev"==e?(a=n.$lastSelect.index(),i=d(a),i.tr.insertBefore(n.$lastSelect),i.lockTr&&i.lockTr.insertBefore(n.$lockTbody.find("> tr:eq("+n.$lastSelect.index()+")"))):"next"==e&&(a=n.$lastSelect.index()+1,i=d(a),i.tr.insertAfter(n.$lastSelect),i.lockTr&&i.lockTr.insertAfter(n.$lockTbody.find("> tr:eq("+n.$lastSelect.index()+")")));var c=t.extend({},n.emptyData,{addFlag:!0});n.data||(n.data=[]),n.allData||(n.allData=[]),n.allData.length?n.allData.splice(a+r,0,c):n.allData.push(c),n.data.length?n.data.splice(a,0,c):n.data.push(c),t.each(n.data,function(e,i){var a=o.linenumberAll?r+(e+1):e+1;t.extend(i,{gridNumber:a,gridIndex:e})}),i.tr.initui(),setTimeout(function(){n.initEvents(i.tr)},20),i.lockTr&&n.initLockEvents(i.lockTr),n.edit(i.tr),"dialog"!=o.editMode?n.doEditRow(i.tr,"inline",!0):n.dialogEdit(i.tr,!0)}}},i.prototype.edit=function(e){var i,a=this,n=a.options,o=a.tools,s=n.editMode;a.columnModel;"dialog"!=s&&(s="inline"),e||(e=a.$tbody.find("> tr")),i=e.find("> td."+a.classnames.s_edit),i.each(function(){var e=t(this),i=e.find("button"),n=i.first(),l=n.next(),r=l.next(),d=r.next(),c=d.next();n.on("click",function(n,c){var u=t(this),h=u.closest("tr"),p=e.data("isAdd");return c||(c=a.isDom?h.data("initData")||o.setDomData(h):a.data[h.index()]),o.beforeEdit(h,c)?("dialog"!=s?(a.inlineEdit(h,p),i.hide(),l.show(),d.show(),p&&(l.hide(),r.show())):a.dialogEdit(h,p),void n.stopPropagation()):!1}),r.on("click",function(e){var i=t(this),n=i.closest("tr");a.updateEdit(n,i),e.stopPropagation()}).on("bjui.datagrid.update.tr",function(){i.hide(),n.show(),c.show()}),l.on("click",function(e){var i=t(this),n=i.closest("tr");a.updateEdit(n,i),e.stopPropagation()}).on("bjui.datagrid.update.tr",function(){i.hide(),n.show(),c.show()}),d.on("click",function(e){var o=t(this),s=o.closest("tr");a.cancelEdit(s),i.hide(),n.show(),c.show(),e.stopPropagation()}),c.on("click",function(e){var i=t(this),n=i.closest("tr");a.delRows(n),e.stopPropagation()})})},i.prototype.doEditRow=function(e,i,a){var n,o,s=this,l=[];if(i=i||s.options.editMode,"object"==typeof e)n=e;else if(isNaN(e)){var r,d=s.$tbody.find("> tr"),e=e.split(",");e=e.unique(),e.sort(function(t,e){return t.trim()-e.trim()}),t.each(e,function(t,e){var i=d.eq(parseInt(e.trim()));i&&i.length&&(r=r?r.add(i):i)}),n=r}else isNaN(e)||(n=s.$tbody.find("> tr").eq(e));return n.length&&(n.each(function(){var e,i=t(this),a=i.index();e=s.isDom?i.data("initData")||tools.setDomData(i):s.data[a],l.push(e)}),s.tools.beforeEdit(n,l))?s.options.editUrl?void n.each(function(e){var n=t(this);o=n.find("> td."+s.classnames.s_edit+" > button.edit"),"dialog"!=i?o.length?o.trigger("click",[l[e]]):s.inlineEdit(n,a,l[e]):s.dialogEdit(n,a,l[e])}):void BJUI.debug("Datagrid Plugin: Edit url is not set!"):void 0},i.prototype.doCancelEditRow=function(e){var i,a=this;i="number"==t.type(e)?this.$tbody.find("> tr").eq(e):e,i.each(function(){var e=t(this),i=e.find("> td."+a.classnames.s_edit+" > button.cancel");i.length?i.trigger("click"):a.cancelEdit(e)})},i.prototype.doSaveEditRow=function(e){var i,a=this,n=a.options;i="number"==t.type(e)?this.$tbody.find("> tr").eq(e):e?e:a.$tbody.find("> tr."+a.classnames.tr_edit),i.length||a.$grid.alertmsg("info",BJUI.getRegional("datagrid.saveMsg")),1==i.length?i.hasClass(a.classnames.tr_edit)&&this.updateEdit(i):n.saveAll?a.saveAll(i):i.each(function(){a.updateEdit(t(this))})},i.prototype.delRows=function(e){var i,a=this,n=a.options,o=n.beforeDelete,s=n.delConfirm;if(!o||("string"==typeof o&&(o=o.toFunc()),"function"!=typeof o||o.call(this))){if("object"==typeof e)i=e;else if(isNaN(e)){var l,r=a.$tbody.find("> tr"),e=e.split(",");e=e.unique(),e.sort(function(t,e){return t.trim()-e.trim()}),t.each(e,function(t,e){var i=r.eq(parseInt(e.trim()));i&&i.length&&(l=l?l.add(i):i)}),i=l}else isNaN(e)||(i=this.$tbody.find("> tr").eq(e));if(i&&i.length){var d=function(){i.each(function(){t(this).trigger("bjui.datagrid.tr.delete")}),a.tools.afterDelete()},c=function(){var e=i.filter("."+a.classnames.tr_add);if(!e.length||(e.remove(),e.length!=i.length))if(n.delUrl){var o=[],s=n.delCallback;i.each(function(){var e,i,s=t(this),l=s.index();e=a.isDom?s.data("initData")||tools.setDomData(s):a.data[l],n.delPK?o.push(e[n.delPK]):(n.jsonPrefix?(i={},t.each(e,function(t,e){return"gridCheckbox"==t||"gridEdit"==t?!0:void(i[n.jsonPrefix+"."+t]=e)})):(i=t.extend({},e),delete i.gridCheckbox,delete i.gridEdit),o.push(i))}),"string"==typeof s&&(s=s.toFunc()),a.$grid.bjuiajax("doAjax",{url:n.delUrl,data:n.delPK?[{name:n.delPK,value:o.join(",")}]:{json:JSON.stringify(o)},type:n.delType,callback:s||function(t){t[BJUI.keys.statusCode]==BJUI.statusCode.ok?d():a.$grid.bjuiajax("ajaxDone",t)}})}else d()};s?("string"!=typeof s&&(s=1==i.length?BJUI.getRegional("datagrid.delMsg"):BJUI.getRegional("datagrid.delMsgM")),a.$grid.alertmsg("confirm",s,{okCall:function(){c()}})):c()}}},i.prototype.inlineEdit=function(e,i,a){if(!this.tools.beforeEdit(e,a))return!1;var n=this,o=n.options,s=n.tools,l=n.columnModel,r=e.find("> td"),d=r.length,c=e.index();return a||(a=n.isDom?e.data("initData")||s.setDomData(e):n.data[c]),e.hasClass(n.classnames.tr_edit)?!1:(n.inputs&&n.inputs.length||s.initEditInputs(),e.addClass(n.classnames.tr_edit).data(n.datanames.changeData,{}),e.data("validator")&&e.validator("destroy"),o.inlineEditMult||n.doCancelEditRow(e.siblings("."+n.classnames.tr_edit)),n.$lastEditTr=e,void r.each(function(o){var s,r=t(this),u=l[o],h=u&&u.name&&a[u.name],p=r.html(),f=n.inputs[o],g=function(i,o,s){var l=e.data(n.datanames.changeData);switch(u.type){case"date":i.on("afterchange.bjui.datepicker",function(t,e){o.addClass(n.classnames.td_changed),i.val()==s&&o.removeClass(n.classnames.td_changed),l[u.name]=i.val()}).change(function(){o.addClass(n.classnames.td_changed),i.val()==s&&o.removeClass(n.classnames.td_changed),l[u.name]=i.val()});break;case"select":i.change(function(){o.addClass(n.classnames.td_changed),i.val()==String(s)&&o.removeClass(n.classnames.td_changed),l[u.name]=i.val()});break;case"boolean":i.on("ifChanged",function(){o.toggleClass(n.classnames.td_changed);var e=!!t(this).is(":checked");e==s&&o.removeClass(n.classnames.td_changed),l[u.name]=e});break;case"lookup":o.on("customEvent.bjui.lookup",'[data-toggle="lookupbtn"]',function(t,e){o.toggleClass(n.classnames.td_changed);for(var s in e)"undefined"!=typeof a[s]&&(l[s]=e[s]),u.name==s&&(i.val()==e[s]?o.removeClass(n.classnames.td_changed):i.val(e[s]))}),i.change(function(){o.addClass(n.classnames.td_changed),i.val()==s&&o.removeClass(n.classnames.td_changed),l[u.name]=i.val()});break;case"spinner":i.on("afterchange.bjui.spinner",function(t,e){o.addClass(n.classnames.td_changed),i.val()==s&&o.removeClass(n.classnames.td_changed),l[u.name]=i.val()}).change(function(){o.addClass(n.classnames.td_changed),i.val()==s&&o.removeClass(n.classnames.td_changed),l[u.name]=i.val()});break;default:i.change(function(){o.addClass(n.classnames.td_changed),i.val()==s&&o.removeClass(n.classnames.td_changed),l[u.name]=i.val()})}};if(r.data(n.datanames.td_html,p),i?u.add||(f=""):u.edit||(f=""),f&&(s=t(f),"boolean"==u.type?s.prop("checked",h):(h&&"null"!=h||(h=""),s.val(String(h))),i?u.addAttrs&&"object"==typeof u.addAttrs&&t.each(u.addAttrs,function(t,e){s.attr(t,e)}):u.editAttrs&&"object"==typeof u.editAttrs&&t.each(u.editAttrs,function(t,e){s.attr(t,e)}),r.empty().append(s).addClass(n.classnames.td_edit),g(s,r,h),u.locked)){var m=n.$lockTbody.find("tr:eq("+c+")"),b=m.find("> td:eq("+u.lockIndex+")");r.clone().html(p).insertAfter(r),r.show().insertAfter(b).initui(),b.remove()}--d||e.initui().validator({msgClass:"n-bottom",theme:"red_bottom_effect_grid"})}))},i.prototype.saveAll=function(e){var i,a,n,o,s=this,l=s.options,r=l.editCallback,d=[],c=e&&e.length;e&&!e.length||(e=s.$tbody.find("> tr."+s.classnames.tr_edit),c=e.length),e.each(function(){i=t(this),a=s.isDom?i.data("initData"):s.data[i.index()],i.isValid(function(e){return e?(n=i.data(s.datanames.changeData),t.extend(a,n),l.jsonPrefix?(o={},t.each(a,function(t,e){return"gridCheckbox"==t||"gridEdit"==t?!0:void(o[l.jsonPrefix+"."+t]=e)})):(o=t.extend({},a),delete o.gridCheckbox,delete o.gridEdit),c--,d.push(o),void 0):(d=[],!1)})}),c||(r=r?r.toFunc():function(i){var a=!1,n=[];"array"==t.type(i)?(a=!0,n=i):"object"==t.type(i)&&(i[BJUI.keys.statusCode]?i[BJUI.keys.statusCode]==BJUI.statusCode.ok?a=!0:s.$grid.bjuiajax("ajaxDone",i):(a=!0,n.push(i))),a&&(e.each(function(e){var i=t(this),a=s.isDom?i.data("initData"):s.data[i.index()];t.extend(a,"object"==typeof n[e]&&n[e]),s.inlineEditComplete(i,a)}),s.tools.afterSave(e,d))},s.$grid.bjuiajax("doAjax",{url:l.editUrl,data:{json:JSON.stringify(d)},type:"POST",callback:r}))},i.prototype.updateEdit=function(e,i){var a,n,o,s=this,l=s.options,r=l.editCallback,d=[];a=s.isDom?e.data("initData"):s.data[e.index()],e.hasClass(s.classnames.tr_edit)&&e.isValid(function(c){c&&(n=e.data(s.datanames.changeData),t.extend(a,n),l.jsonPrefix?(o={},t.each(a,function(t,e){return"gridCheckbox"==t||"gridEdit"==t?!0:void(o[l.jsonPrefix+"."+t]=e)})):(o=t.extend({},a),delete o.gridCheckbox,delete o.gridEdit),r=r?r.toFunc():function(n){var o,l=!1;"array"==t.type(n)?(l=!0,o=n[0]):"object"==t.type(n)&&(n[BJUI.keys.statusCode]?n[BJUI.keys.statusCode]==BJUI.statusCode.ok?l=!0:s.$grid.bjuiajax("ajaxDone",n):(l=!0,o=n)),l&&(t.extend(a,"object"==typeof o&&o),s.inlineEditComplete(e,a,i),s.tools.afterSave(e,a))},e.bjuiajax("doAjax",{url:l.editUrl,data:{json:JSON.stringify(d.push(o)&&d)},type:"POST",callback:r}))})},i.prototype.cancelEdit=function(e){var i=this,a=i.columnModel;e.each(function(){var e=t(this),n=e.index();if(e.hasClass(i.classnames.tr_edit)&&e.removeClass(i.classnames.tr_edit).find("> td."+i.classnames.td_edit).each(function(){var e=t(this),o=e.index(),s=a[o],l=e.data(i.datanames.td_html);if(e.removeClass(i.classnames.td_edit).removeClass(i.classnames.td_changed).html(l),s.locked){var r=i.$lockTbody.find("tr:eq("+n+")"),d=r.find("> td:eq("+s.lockIndex+")");l=d.data(i.datanames.td_html),r.removeClass(i.classnames.tr_edit),d.removeClass(i.classnames.td_edit).removeClass(i.classnames.td_changed).html(l)}}),e.hasClass(i.classnames.tr_add)){var o=!1,s=e.data(i.datanames.changeData);if(t.isEmptyObject(s))o=!0;else{for(var l in s)s[l]||delete s[l];t.isEmptyObject(s)&&(o=!0)}if(o){var r=e.index();i.data=i.data.remove(r),i.$lockTbody&&i.$lockTbody.find("> tr:eq("+r+")").remove(),e.remove()}}})},i.prototype.inlineEditComplete=function(e,a,n){var o=this,s=o.columnModel,l=e.index(),r=e.find("> td"),d=!1,c=o.$tbody.find("> tr"),u=c.filter("."+o.classnames.tr_add);t.each(s,function(t,e){if(e.gridNumber&&(d=!0),e.name&&!(e.gridNumber||e.gridCheckbox||e.gridEdit)){var n,s=a[e.name],c=r.eq(e.index);if("undefined"==typeof s&&(s=""),c.text(s).removeClass(o.classnames.td_edit).removeClass(o.classnames.td_changed),e.render&&"function"==typeof e.render?e.items?(n=e.render.call(o,s,e.items),c.html(n)):(n=e.render.call(o,s),c.html(n)):e.items&&(n=i.renderItem.call(o,s,e.items),c.html(n)),e.locked){var u=o.$lockTbody.find("> tr:eq("+l+")"),h=u.find("> td:eq("+e.lockIndex+")");h.removeClass(o.classnames.td_changed).html(c.html())}}}),e.removeClass(o.classnames.tr_edit),n||(n=r.filter("."+o.classnames.s_edit).find("button.update")),n&&n.length&&n.trigger("bjui.datagrid.update.tr"),d&&u.length&&(u.removeClass(o.classnames.tr_add),c.each(function(e){t(this).find("> td."+o.classnames.td_linenumber).text(e+1),o.$lockTbody&&o.$lockTbody.find("> tr:eq("+e+")").find("> td."+o.classnames.td_linenumber).text(e+1)}))},i.prototype.dialogEdit=function(e,i,a){if(!this.tools.beforeEdit(e,a))return!1;var n,o,s,l=this,r=l.options,d=l.tools,c=l.columnModel,u=e.index();a||(a=l.isDom?e.data("initData")||d.setDomData(e):l.data[u]),l.inputs&&l.inputs.length||d.initEditInputs(),s=r.gridTitle||"datagrid",s+=i?" - "+BJUI.getRegional("datagrid.add"):" - "+BJUI.getRegional("datagrid.edit"),n=t('<div><div class="bjui-pageContent"></div><div class="bjui-pageFooter"></div></div>'),o=t('<form class="datagrid-dialog-edit-form"></form>');var h=function(e,i,n,o){var s=e.data(l.datanames.changeData);switch(o.type){case"date":n.on("afterchange.bjui.datepicker",function(t,e){s[o.name]=n.val()}).change(function(){s[o.name]=n.val()});break;case"select":n.change(function(){s[o.name]=n.val()});break;case"boolean":n.on("ifChanged",function(){var e=!!t(this).is(":checked");s[o.name]=e});break;case"lookup":i.on("customEvent.bjui.lookup",'[data-toggle="lookupbtn"]',function(t,e){for(var i in e)"undefined"!=typeof a[i]&&(s[i]=e[i]),o.name==i&&n.val(e[i])}),n.change(function(){s[o.name]=n.val()});break;case"spinner":n.on("afterchange.bjui.spinner",function(t,e){s[o.name]=n.val()}).change(function(){s[o.name]=n.val()});break;default:n.change(function(){s[o.name]=n.val()})}},p=function(i){var n=i.find("form.datagrid-dialog-edit-form"),o=i.find("div.bjui-pageFooter button"),s=o.first(),u=o.eq(1),p=o.eq(2),f=o.last(),g=function(e,i,a){i.empty(),a.data(l.datanames.changeData)||a.data(l.datanames.changeData,{}),i.data("validator")&&i.validator("destroy"),t.each(c,function(n,o){if(o==l.linenumberColumn||o==l.checkboxColumn||o==l.editBtnsColumn)return!0;var s=t(l.inputs[n]),r=t("<p></p>"),d="datagrid-dialog-edit-column-"+n;s.isTag("select")?s.attr("data-width","auto"):s.isTag("checkbox")||s.attr("size",30),"boolean"==o.type?s.attr("checked",e[o.name]):"textarea"==o.type?s.html(e[o.name]):s.attr("value",e[o.name]),r.append('<label class="control-label x120" for="'+d+'">'+o.label+"：</label>").append(t('<span class="datagrid-dialog-column-span"></span>').append(s.attr("id",d))).appendTo(i),h(a,i,s,o)}),i.initui().validator({msgClass:"n-bottom",theme:"red_bottom_effect_grid"})};n.is(":empty")&&g(a,n,e),0==e.index()&&s.addClass("disabled"),e.index()==l.data.length-1&&u.addClass("disabled"),s.click(function(){var t,i=e.prev();i.length?(t=l.isDom?i.data("initData")||d.setDomData(i):l.data[i.index()],e=i,g(t,n,e),u.removeClass("disabled"),i.prev().length||s.addClass("disabled")):s.addClass("disabled")}),u.click(function(){var t,i=e.next();i.length?(t=l.isDom?i.data("initData")||d.setDomData(i):l.data[i.index()],e=i,g(t,n,e),n.initui(),s.removeClass("disabled"),i.next().length||u.addClass("disabled")):u.addClass("disabled")}),f.click(function(){var i,a,o,s=r.editCallback;a=l.isDom?e.data("initData"):l.data[e.index()],n.isValid(function(n){n&&(i=e.data(l.datanames.changeData),t.extend(a,i),r.jsonPrefix?(o={},t.each(a,function(t,e){return"gridCheckbox"==t||"gridEdit"==t?!0:void(o[r.jsonPrefix+"."+t]=e)})):(o=t.extend({},a),delete o.gridCheckbox,delete o.gridEdit),s=s?s.toFunc():function(i){var n,o=!1;"array"==t.type(i)?(o=!0,n=i[0]):"object"==t.type(i)&&(i[BJUI.keys.statusCode]?i[BJUI.keys.statusCode]==BJUI.statusCode.ok?o=!0:l.$grid.bjuiajax("ajaxDone",i):(o=!0,n=i)),o&&(t.extend(a,"object"==typeof n&&n),l.dialogEditComplete(e,a),l.$grid.dialog("close","datagrid-dialog-edit"),l.tools.afterSave(e,a))},e.bjuiajax("doAjax",{url:r.editUrl,data:{json:JSON.stringify(o)},type:"POST",callback:s}))})}),p.click(function(){l.$grid.dialog("close","datagrid-dialog-edit")})},f=function(){l.$tbody.find("> tr."+l.classnames.tr_add).each(function(){var e=!1,i=t(this),a=i.data(l.datanames.changeData);if(t.isEmptyObject(a))e=!0;else{for(var n in a)a[n]||delete a[n];t.isEmptyObject(a)&&(e=!0)}if(e){var o=i.index();l.data=l.data.remove(o),l.$lockTbody&&l.$lockTbody.find("> tr:eq("+o+")").remove(),i.remove()}})};n.find("> div:first").append(o).next().append(BJUI.doRegional(FRAG.gridDialogEditBtns,l.regional));var g=t.extend({},{id:"datagrid-dialog-edit",fresh:!0,target:n[0],width:520,height:400,mask:!0,title:s,onLoad:p,onClose:f},"object"==typeof r.editDialogOp&&r.editDialogOp);l.$grid.dialog(g)},i.prototype.dialogEditComplete=function(e,a){var n=this,o=n.columnModel,s=e.index(),l=e.find("> td"),r=!1,d=n.$tbody.find("> tr"),c=d.filter("."+n.classnames.tr_add);t.each(o,function(t,e){if(e.gridNumber&&(r=!0),e.name&&!(e.gridNumber||e.gridCheckbox||e.gridEdit)){var o,d=a[e.name],c=l.eq(e.index);if("undefined"==typeof d&&(d=""),c.text(d).removeClass(n.classnames.td_edit).removeClass(n.classnames.td_changed),e.render&&"function"==typeof e.render?e.items?(o=e.render.call(n,d,e.items),c.html(o)):(o=e.render.call(n,d),c.html(o)):e.items&&(o=i.renderItem.call(n,d,e.items),c.html(o)),e.locked){var u=n.$lockTbody.find("> tr:eq("+s+")"),h=u.find("> td:eq("+e.lockIndex+")");h.removeClass(n.classnames.td_edit).removeClass(n.classnames.td_changed).html(c.html()),u.removeClass(n.classnames.tr_edit)}}}),r&&c.length&&(c.removeClass(n.classnames.tr_add),d.each(function(e){t(this).find("> td."+n.classnames.td_linenumber).text(e+1),
n.$lockTbody&&n.$lockTbody.find("> tr:eq("+e+")").find("> td."+n.classnames.td_linenumber).text(e+1)}))},i.prototype.resizeGrid=function(){var e,i,a=this,n=a.$grid.getPageTarget(),o=function(){a.initFixedW&&String(a.options.width).endsWith("%")&&(e=a.$grid.parent().width(),n.is(":hidden")&&n.hasClass("navtabPage")?a.$grid.data("need.fixedW",!0):a.fixedWidth()),String(a.options.height).endsWith("%")&&(i=a.$grid.parent().height(),n.is(":hidden")&&n.hasClass("navtabPage")?n.hasClass("navtabPage")&&a.$grid.data("need.fixedH",!0):i&&i!=a.parentH&&a.tools.fixedH(i))};n.on("bjui.navtab.switch",t.proxy(function(){a.$grid.data("need.fixedH")&&(i=a.$grid.parent().height(),i&&a.tools.fixedH(i),a.$grid.removeData("need.fixedH")),a.$grid.data("need.fixedW")&&(a.fixedWidth(),a.$grid.removeData("need.fixedW"))},a)),t(window).on(BJUI.eventType.resizeGrid,t.proxy(o,a))};var a=t.fn.datagrid;t.fn.datagrid=e,t.datagrid=i,t.fn.datagrid.noConflict=function(){return t.fn.datagrid=a,this},t(document).on(BJUI.eventType.initUI,function(i){var a=t(i.target).find('table[data-toggle="datagrid"]');a.length&&e.call(a)})}(jQuery),+function(t){"use strict";function e(e){var i=arguments,n=e;return this.each(function(){var o=t(this),s=t.extend({},a.DEFAULTS,o.data(),"object"==typeof e&&e),l=o.data("bjui.tablefixed");l||o.data("bjui.tablefixed",l=new a(this,s)),"string"==typeof n&&t.isFunction(l[n])?([].shift.apply(i),i?l[n].apply(l,i):l[n]()):l.init()})}var i,a=function(e,i){this.$element=t(e),this.options=i,this.tools=this.TOOLS()};a.SCROLLW=18,a.DEFAULTS={width:"100%"},a.prototype.TOOLS=function(){var e={getLeft:function(e){var i=0;return e.prevAll().each(function(){i+=t(this).outerWidth()}),i},getRight:function(e){var i=0;return e.prevAll().andSelf().each(function(){i+=t(this).outerWidth()}),i-1},getCellNum:function(t){return t.prevAll().andSelf().size()},getColspan:function(t){return t.attr("colspan")||1},getStart:function(e){var i=1;return e.prevAll().each(function(){i+=parseInt(t(this).attr("colspan")||1)}),i},getPageCoord:function(t){for(var e={x:0,y:0};t;)e.x+=t.offsetLeft,e.y+=t.offsetTop,t=t.offsetParent;return e},getOffset:function(e,i){var a,n,o,s,l,r;return t.support.leadingWhitespace?(s=i.target,void 0==s.offsetLeft&&(s=s.parentNode),l=this.getPageCoord(s),r={x:window.pageXOffset+i.clientX,y:window.pageYOffset+i.clientY},o={offsetX:r.x-l.x,offsetY:r.y-l.y}):(a=e.offset(),n={offsetX:i.pageX||i.screenX,offsetY:i.pageY||i.screenY},o={offsetX:n.offsetX-a.left,offsetY:n.offsetY-a.top})}};return e},a.prototype.resetWidth=function(){var e,i=this.$element,n=i.width(),o=i.find("table"),s=o&&o.width(),l=o.eq(0)&&o.eq(0).find("tr:first-child > th"),r=o.eq(1)&&o.eq(1).find("tr:first-child > td");o&&n-s<a.SCROLLW&&(e=parseInt((n-s)/l.length),o.width(n-a.SCROLLW),l.each(function(i){var a=parseInt(t(this).css("width"));t(this).width(a+e),r.eq(i)&&r.eq(i).width(a+e)}))},a.prototype.init=function(){var t,e;this.$element.isTag("table")&&(this.$container=this.$element.parent().addClass("bjui-resizeGrid"),this.$fixed=void 0,t=this.$container.width(),e=this.options.height,this.$container.hasClass("tab-pane")&&(t=this.$container.parent().width()-20),this.options.newWidth="string"==typeof this.options.width&&this.options.width.indexOf("%")?t*(this.options.width.replace("%","")/100):parseInt(this.options.width),this.options.styles=[],this.$element.wrap('<div class="bjui-tablefixed clearfix"></div>'),this.$fixed=this.$element.parent(),this.initHead(),this.initBody(),this.resizeCol(),this.resizeGrid(),e&&!this.$fixed.closest(".tab-content").length&&this.$fixed.height(e).addClass("fixedH"))},a.prototype.initHead=function(){var e,i,n,o,s,l,r,d,c,u=this.options.styles=[],h=this.$element.find("thead > tr"),p=h.eq(0).find("> th");this.$element,e=0,i=[],n=[],o=-1,p.each(function(e){var a,s=t(this),l=parseInt(s.attr("colspan")||1),r=s.attr("width"),d=s.attr("align"),c="";for(a=0;l>a;a++)1==l&&r&&(c=' width="'+r+'"'),d&&s.removeAttr("align").addClass(d),i.push("<th"+c+"></th>");s.attr("colsNum",o+=l),n[e]=l}),s=i.length,l=t('<tr class="resize-head">'+i.join("")+"</tr>"),h.length>1&&(o=0,r=h.eq(1).find("> th"),t.each(n,function(t,e){var i,a,n,s,d,c,u;if(e=parseInt(e),e>1)for(i=parseInt(p.eq(t).attr("colsnum")),a=e-1;a>=0;a--)n=r.eq(o++),s=i-a,d=n.attr("width"),c=n.attr("align"),u=l.find("> th").eq(s),n&&n.length&&n.attr("colsnum",s),d&&u.attr("width",d),c&&n.addClass(c).removeAttr("align")})),this.$fixed.html(this.$element.html()),d=this.$fixed.find("thead"),d.prepend(l),l.find("> th").each(function(){var i=t(this),a=[],n=i.innerWidth();a[0]=parseInt(n),e+=a[0],u[u.length]=a}),e=parseInt((this.options.newWidth-a.SCROLLW-e)/s),c=d.find("> tr:eq(0) > th"),this.options.$ths=c,c.each(function(i){var a=t(this),n=u[i],o=a.attr("width");a.removeAttr("align").width(n[0]+e),n[0]=n[0]+e,o&&(n[0]=parseInt(o),a.width(o).removeAttr("width"))}),d.find("> tr:gt(0) > th").each(function(){var e=t(this);e.html('<div class="fixedtableCol">'+e.html()+"</div>")}),d.wrap('<div class="fixedtableHeader" style="width:'+(this.options.newWidth-a.SCROLLW)+'px;overflow:hidden;"><div class="fixedtableThead"><table class="table table-bordered" style="width:'+(this.options.newWidth-a.SCROLLW)+"px; max-width:"+(this.options.newWidth-a.SCROLLW)+'px;"></table></div></div>'),this.$fixed.append('<div class="resizeMarker" style="display:none; height:300px; left:57px;"></div><div class="resizeProxy" style="left:377px; display:none; height:300px;"></div>')},a.prototype.initBody=function(){var e,i,n,o=this,s=this.$fixed.find("> tbody");this.options.styles,this.options.height?i=this.options.height-this.$fixed.find(".fixedtableHeader").height()+"px":(i="100%",n=function(){var t=o.$fixed.parent().height();o.$fixed.parent().css("overflow","hidden"),o.$fixed.height(t).find(".fixedtableScroller").height(t-o.$fixed.find(".fixedtableHeader").height())},t(document).one(BJUI.eventType.afterInitUI,function(){n()})),e='style="height:'+i+'; overflow-y:auto;"',s.wrap('<div class="fixedtableScroller"'+e+' style="width:'+this.options.newWidth+'px;"><div class="fixedtableTbody"><table style="width:'+(this.options.newWidth-a.SCROLLW)+"px; max-width:"+(this.options.newWidth-a.SCROLLW)+'px;"></table></div></div>'),this.$element.attr("class")?s.parent().addClass(this.$element.attr("class")):s.parent().addClass("table table-striped table-bordered table-hover"),"undefined"!=typeof this.$element.attr("data-selected-multi")&&s.parent().attr("data-selected-multi",this.$element.attr("data-selected-multi")),s.before('<thead><tr class="resize-head">'+this.$fixed.find("thead > tr").html()+"</tr></thead>"),this.options.$tds=s.prev().find("> tr:first-child > th"),this.options.nowrap&&s.parent().addClass("nowrap"),s.closest(".fixedtableScroller").scroll(function(){var e=t(this),i=e.scrollLeft(),a=e.prev().find("> .fixedtableThead");return a.css({position:"relative",left:-i}),!1})},a.prototype.resizeCol=function(){var e=this,i=this.$fixed,n=this.options.$ths,o=this.options.$tds,s=this.tools;i.find("thead > tr:gt(0) > th").each(function(){var l=t(this);l.mouseover(function(t){var r=parseInt(i.find(".fixedtableThead").css("left"))||0,d=s.getOffset(l,t).offsetX,c=n.eq(l.attr("colsnum"));return l.outerWidth()-d<5?l.css("cursor","col-resize").off("mousedown.bjui.tablefixed.resize").on("mousedown.bjui.tablefixed.resize",function(t){i.find("> .resizeProxy").show().css({left:s.getRight(c)+r+i.position().left,top:i.position().top,height:i.height(),cursor:"col-resize"}).basedrag({scop:!0,cellMinW:20,relObj:i.find(".resizeMarker"),move:"horizontal",event:t,stop:function(){var t=i.find(".resizeProxy").position().left,n=i.find(".resizeMarker").position().left,l=t-n-c.outerWidth()-9,r=s.getCellNum(c),d=(c.width(),c.width()+l),u=o.eq(r-1),h=i.find("> .fixedtableHeader .table").width();c.width(d),u.width(d),i.find(".table").width(h+l),i.find(".resizeMarker, .resizeProxy").hide(),h+l+a.SCROLLW<e.options.newWidth?i.find(".fixedtableScroller").width(h+l+a.SCROLLW):(d=i.closest(".bjui-resizeGrid").innerWidth(),h+l+a.SCROLLW<d&&(d=h+l+a.SCROLLW),i.find(".fixedtableHeader").width(d-a.SCROLLW),i.find(".fixedtableScroller").width(d),i.width(d)),i.data("resizeGrid",!0)}}),i.find("> .resizeMarker").show().css({left:s.getLeft(c)+r+i.position().left,top:i.position().top,height:i.height()})}):l.css("cursor","default").off("mousedown.bjui.tablefixed.resize"),!1})})},a.prototype.setOrderBy=function(e){var i=this.$element,a=i.find(".fixedtableCol"),n=t(FRAG.orderby.replace("#asc#",BJUI.regional.orderby.asc).replace("#desc#",BJUI.regional.orderby.desc));e=e||this.options,i.addClass("orderby"),e.orderDirection&&(BJUI.ui.clientPaging||i.addClass(e.orderDirection),i.pagination("setClientOrder",{orderField:e.orderField,orderDirection:e.orderDirection})),a.length||(a=t('<div class="fixedtableCol">'+i.html()+"</div>").appendTo(i.empty())),n.data("orderField",e.orderField).appendTo(a).pagination("orderBy")},a.prototype.resizeGrid=function(){var e=this,i=function(){t("div.bjui-resizeGrid").each(function(){var i,n=t(this),o=n.closest(".navtabPage"),s=n.width(),l=n.height(),r=n.find(".bjui-tablefixed"),d=r.find(".fixedtableThead").height(),c=e.options.newWidth;n.length&&n.is(":hidden")&&(n.hasClass("tab-pane")||(o.show(),s=n.innerWidth(),l=n.height(),d=r.find(".fixedtableHeader").height(),o.hide())),s&&n.find(".bjui-tablefixed").each(function(){var e=t(this);i=e.data("resizeGrid")?c:s,e.width(i),e.find(".table").width(i-a.SCROLLW),e.find(".fixedtableHeader").width(i-a.SCROLLW),e.find(".fixedtableScroller").width(i)}),n.css("overflow","hidden"),r.height(l).find(".fixedtableScroller").height(l-d)})};t(window).on(BJUI.eventType.resizeGrid,i)},i=t.fn.tablefixed,t.fn.tablefixed=e,t.fn.tablefixed.Constructor=a,t.fn.tablefixed.noConflict=function(){return t.fn.tablefixed=i,this},t(document).on(BJUI.eventType.initUI,function(i){var a=t(i.target).find('table[data-toggle="tablefixed"]');a.length&&e.call(a)}),t(document).on(BJUI.eventType.afterInitUI,function(i){var a=t(i.target).find("th[data-order-field]");a.length&&e.call(a,"setOrderBy")}),t(document).on("click.bjui.tr.data-api","tr[data-id]",function(){var e=t(this),i=e.closest("table"),a=i.data("selectedMulti"),n=e.attr("data-id"),o="selected",s=i.closest(".unitBox").find("#bjui-selected");e.toggleClass(o),a?(n=[],e.siblings("."+o).add(e.hasClass(o)?e:"").each(function(){n.push(t(this).attr("data-id"))}),n=n.join(",")):(e.siblings().removeClass(o),e.hasClass(o)||(n="")),s&&s.length?s.val(n):(s=t('<input type="hidden" id="bjui-selected" value="'+n+'">'),s.appendTo(i.closest(".unitBox")))})}(jQuery),+function(t){"use strict";function e(e){var i=arguments,n=e;return this.each(function(){var o=t(this),s=t.extend({},a.DEFAULTS,o.data(),"object"==typeof e&&e),l=o.data("bjui.tabledit");l||o.data("bjui.tabledit",l=new a(this,s)),"string"==typeof n&&t.isFunction(l[n])?([].shift.apply(i),i?l[n].apply(l,i):l[n]()):l.init()})}var i,a=function(e,i){this.$element=t(e),this.options=i,this.tools=this.TOOLS(),this.$tbody=this.$element.find("> tbody"),this.$tbody.length||(this.$tbody=t("<tbody></tbody>"),this.$element.append(this.$tbody)),this.$numAdd=this.$btnAdd=null};a.DEFAULTS={singleNoindex:!0},a.EVENTS={afterDelete:"afterdelete.bjui.tabledit"},a.prototype.TOOLS=function(){var e=this,i={initSuffix:function(e){var i=e.find("> tr");i.each(function(e){var i=t(this);i.find(":input, :file, a, label, div").each(function(){var i,a=t(this),n=a.attr("name"),o=a.val(),s=a.attr("for"),l=a.attr("id"),r=a.attr("href"),d=a.attr("data-group"),c=a.attr("data-suffix");n&&a.attr("name",n.replaceSuffix(e)),s&&a.attr("for",s.replaceSuffix(e)),l&&a.attr("id",l.replaceSuffix(e).replaceSuffix2(e)),r&&a.attr("href",r.replaceSuffix(e)),d&&a.attr("data-group",d.replaceSuffix(e)),c&&a.attr("data-suffix",c.replaceSuffix(e)),o&&o.indexOf("#index#")>=0&&a.val(o.replace("#index#",e+1)),a.hasClass("no")&&(i=a.data("prefix")?a.data("prefix"):"",a.val(i+(e+1)))})})},initEnter:function(e){var i=e.find(":text");i.each(function(e){t(this).bind("keydown",function(t){if(t.which==BJUI.keyCode.ENTER){var a=e+1;i.eq(a)&&i.eq(a).focus(),t.preventDefault()}})}),this.initInput(e)},initInput:function(e){e.find("> tr > td").each(function(){var e=t(this).find(".input-hold");e.length||(e=t('<span class="input-hold" style="display:block; padding:0 4px; height:0px; font-size:12px; visibility:hidden;"></span>'),t(this).append(e)),t.support.leadingWhitespace?t(this).on("input",":text",function(){e.text(t(this).val())}):t(this).on("propertychange",":text",function(){e.text(t(this).val())})})},initTbody:function(){function i(e){e.removeClass("readonly").find("> td *").each(function(){var e=t(this),i=e.closest("td"),a=i.data("val"),n=e.attr("data-toggle-old"),o=i.data("readonly");if("undefined"==typeof a&&(a=i.html()),i.data("notread"))return!0;if(e.isTag("select")&&e.val(i.attr("data-val")).selectpicker("refresh").nextAll(".bootstrap-select").removeClass("readonly").find("button").removeClass("disabled"),e.is(":checkbox")&&(e.closest(".icheckbox_minimal-purple").removeClass("disabled"),e.closest(".icheckbox_minimal-purple").find("ins").removeClass("readonly")),e.is(":radio")&&(e.closest(".iradio_minimal-purple").removeClass("disabled"),e.closest(".iradio_minimal-purple").find("ins").removeClass("readonly")),n){if("dosave"==n)return!0;e.removeAttr("data-toggle-old").attr("data-toggle",n),"spinner"==n&&e.spinner("destroy").spinner(),"kindeditor"==n&&i.initui()}(e.is(":text")||e.is("textarea"))&&(e.off("keydown.readonly"),o&&e.prop("readonly",!0)),e.find(".bjui-lookup, .bjui-spinner, .bjui-upload").show()}),e.find('[data-toggle="doedit"]').attr("data-toggle","dosave").text("完成")}function a(e){e.addClass("readonly").find("> td *").each(function(){var e=t(this),i=e.closest("td"),a=e.attr("data-toggle");if(i.data("notread"))return!0;if(e.isTag("select")&&e.nextAll(".bootstrap-select").addClass("readonly").find("button").addClass("disabled"),e.is(":checkbox")&&(e.closest(".icheckbox_minimal-purple").addClass("disabled"),e.closest(".icheckbox_minimal-purple").find("ins").addClass("readonly")),e.is(":radio")&&(e.closest(".iradio_minimal-purple").addClass("disabled"),e.closest(".iradio_minimal-purple").find("ins").addClass("readonly")),a){if("doedit"==a||"dosave"==a)return!0;e.removeAttr("data-toggle").attr("data-toggle-old",a),"kindeditor"==a&&KindEditor.remove(e)}(e.is(":text")||e.is("textarea"))&&e.on("keydown.readonly",function(t){t.preventDefault()}),e.find(".bjui-lookup, .bjui-spinner, .bjui-upload").hide()}),e.find('[data-toggle="dosave"]').attr("data-toggle","doedit").text("编辑")}var n=e.$element,o=e.$tbody;o.find("> tr").each(function(){var s=t(this),l=s.find("> td"),r=n.data("bjui.tabledit.tr").clone().find("> th");s.data("bjui.tabledit.oldTds",s.html()),r.each(function(e){var i=l.eq(e),a=i.data("val"),n=t(this),o=n.children(),s=n.find(".pic-box");"undefined"==typeof a&&(a=i.html()),i.data("noedit")||o.length&&(o.is("input:checkbox")||o.is("input:radio")?o.filter('[value="'+a+'"]').attr("checked","checked"):o.isTag("select")?o.find('option[value="'+i.data("val")+'"]').attr("selected","selected"):s.length?(i.data("val")&&n.find(".pic-name").val(i.data("val")),s.html(i.html())):o.hasClass("wrap_bjui_btn_box")?o.find("input[data-toggle]").attr("value",a+""):o.is("textarea")?(o.html(a),"kindeditor"==o.attr("data-toggle")&&o.attr("data-toggle-old","kindeditor").removeAttr("data-toggle")):o.attr("value",a+""),i.html(n.html()))}),s.on("dblclick",t.proxy(function(){i(s)},e)).initui(),e.tools.initSuffix(o),a(s)}),o.on("click.bjui.tabledit.readonly",'[data-toggle="doedit"]',function(){i(t(this).closest("tr"))}).on("click.bjui.tabledit.readonly",'[data-toggle="dosave"]',function(){var i,o,s=t(this).closest("tr"),l=s.index(),r=e.options.callback;e.options.action?(s.wrap('<form action="" method="POST"></form>'),s.attr("data-id")&&(i=n.find("> thead > tr:eq(0)").data("idname")||"id",s.before('<input type="hidden" name="'+i.replaceSuffix(l)+'" value="'+s.attr("data-id")+'">')),o=s.parent().serializeArray(),e.options.singleNoindex&&t.each(o,function(e,i){t.extend(i,{name:i.name.replaceSuffix(0)})}),s.prev("input").remove(),s.unwrap().isValid(function(t){t&&(r=r?r.toFunc():function(t){t[BJUI.keys.statusCode]==BJUI.statusCode.ok?a(s):s.bjuiajax("ajaxDone",t)},s.bjuiajax("doAjax",{url:e.options.action,data:o,type:e.options.type||"POST",callback:r}))})):a(s)}),e.tools.initEnter(o)},doAdd:function(){var t=e.$element;e.$numAdd&&e.$btnAdd&&t.on("keydown.bjui.tabledit.add","thead .num-add",function(t){t.which==BJUI.keyCode.ENTER&&(e.$btnAdd.trigger("click.bjui.tabledit.add"),t.preventDefault())}).on("click.bjui.tabledit.add","thead .row-add",function(i){var a=1;isNaN(e.$numAdd.val())||(a=parseInt(e.$numAdd.val())),e.add(t,a),i.preventDefault()})},doDel:function(e){var i=this,a="click.bjui.tabledit.del";e.off(a).on(a,".row-del",function(e){var a=t(this);a.data("confirmMsg")?a.alertmsg("confirm",a.data("confirmMsg"),{okCall:function(){i.delData(a)}}):i.delData(a),e.preventDefault()})},delData:function(t){var i=this,a=t.closest("tbody"),n=t.data(),o=function(o){t.closest("tr").remove(),i.initSuffix(a),i.afterDelete(a),n.callback&&n.callback.toFunc().apply(e,[o])};t.is("[href^=javascript:]")||t.is('[href^="#"]')?o():t.bjuiajax("doAjax",{url:t.attr("href"),data:n.data,callback:o})},afterDelete:function(i){var n=t.Event(a.EVENTS.afterDelete,{relatedTarget:i[0]});e.$element.trigger(n),n.isDefaultPrevented()}};return i},a.prototype.init=function(){var e=this,i=this.tools,a=this.$element.addClass("bjui-tabledit"),n=a.find("> thead > tr:first"),o=this.$tbody,s=a.find("> thead > tr:first").html();n.find("> th").each(function(){var i,a=t(this),n=a.attr("title"),o=a.data("addtool");n&&a.html(n),o&&(i=t('<span style="position:relative;"></span>'),a.empty(),e.$numAdd=t('<input type="text" value="1" class="form-control num-add" size="2" title="待添加的行数">'),e.$btnAdd=t('<a href="javascript:;" class="row-add" title="添加行"><i class="fa fa-plus-square"></i></a>'),i.append(e.$numAdd).append(e.$btnAdd).appendTo(a))}),a.data("bjui.tabledit.tr",t("<tr>"+s+"</tr>")),i.initTbody(),i.doAdd(),i.doDel(o)},a.prototype.add=function(e,i){var a,n,o,s,l=this.tools,r=e.find("> tbody"),d=e.data("bjui.tabledit.tr");for(n=0;i>n;n++)d.find("> th").each(function(){t(this).replaceWith("<td>"+t(this).html()+"</td>")}),o=d.clone(),0==n&&(a=o),o.hide().appendTo(r),l.initSuffix(r),l.initEnter(r),o.show().css("display","").initui();a&&a.length&&(s=a.find(":text"),s.each(function(){var e=t(this);return e.prop("readonly")?void 0:(e.focus(),!1)}))},i=t.fn.tabledit,t.fn.tabledit=e,t.fn.tabledit.Constructor=a,t.fn.tabledit.noConflict=function(){return t.fn.tabledit=i,this},t(document).on(BJUI.eventType.initUI,function(i){var a=t(i.target).find('table[data-toggle="tabledit"]');a.length&&e.call(a)}),t(document).on(BJUI.eventType.afterInitUI,function(i){var a=t(i.target).find('table[data-toggle="tabledit"]');a.each(function(){if(t(this).is("[data-initnum]")){var i=t(this).data("initnum");i>0&&e.call(t(this),"add",t(this),i)}})}),t(document).on("click.bjui.tabledit.data-api",'[data-toggle="tableditadd"]',function(i){var a=t(this),n=a.data("num")||1,o=a.data("target");o&&t(o).length&&t(o).isTag("table")&&(e.call(a,"add",t(o),n),i.preventDefault())})}(jQuery),+function(t){"use strict";function e(e){var i=arguments,n=e;return this.each(function(){var o=t(this),s=t.extend({},a.DEFAULTS,o.data(),"object"==typeof e&&e),l=o.data("bjui.spinner");l||o.data("bjui.spinner",l=new a(this,s)),"string"==typeof n&&t.isFunction(l[n])?([].shift.apply(i),i?l[n].apply(l,i):l[n]()):l.init()})}var i,a=function(e,i){this.$element=t(e),this.options=i,this.tools=this.TOOLS(),this.$spinner=null,this.height=this.$element.addClass("form-control").innerHeight(),this.ivalue=Number(this.$element.val())||0};a.DEFAULTS={min:0,max:100,step:1,decimalPlace:0},a.EVENTS={afterChange:"afterchange.bjui.spinner"},a.prototype.TOOLS=function(){var t=this,e={changeVal:function(e){var i=t.$element,n=Number(i.val())||Number(t.ivalue),o=e.data("add")||-1,s=t.options.min,l=t.options.max,r=t.options.step;1==o?l-r>=n&&(n+=r):-1==o?n>=s+r&&(n-=r):n>l?n=l:s>n&&(n=s),t.options.decimalPlace&&(n=new String(n.toFixed(t.options.decimalPlace))),t.ivalue=n,i.val(n).trigger(a.EVENTS.afterChange,{value:n})}};return e},a.prototype.init=function(){return this.$element,this.options,isNaN(this.options.min)||isNaN(this.options.max)||isNaN(this.options.step)?void BJUI.debug("Spinner Plugin: Parameter is non-numeric type!"):void this.addBtn()},a.prototype.addBtn=function(){var e,i,a=this,n=a.$element;this.$lookBtn||n.parent().hasClass("wrap_bjui_btn_box")||(this.$spinner=t(FRAG.spinnerBtn),n.css({paddingRight:"13px"}).wrap('<span class="wrap_bjui_btn_box"></span>'),e=n.parent(),e.css("position","relative"),this.$spinner.css({height:this.height}).appendTo(e),this.$spinner.on("selectstart",function(){return!1}),i=null,a.$spinner.find("li").on("click",function(){a.tools.changeVal(t(this))}).on("mousedown",function(){var e=t(this);i=setInterval(function(){a.tools.changeVal(e)},150)}).on("mouseup",function(){clearTimeout(i)}))},a.prototype.destroy=function(){this.$element.parent().hasClass("wrap_bjui_btn_box")&&(this.$element.parent().find(".bjui-spinner").remove(),this.$element.unwrap())},i=t.fn.spinner,t.fn.spinner=e,t.fn.spinner.Constructor=a,t.fn.spinner.noConflict=function(){return t.fn.spinner=i,this},t(document).on(BJUI.eventType.initUI,function(i){var a=t(i.target).find('input[data-toggle="spinner"]');a.length&&e.call(a)})}(jQuery),+function(t){"use strict";function e(e){var i=arguments,a=e;return this.each(function(){var n=t(this),o=t.extend({},s.DEFAULTS,n.data(),"object"==typeof e&&e),l=n.data("bjui.lookup");l?n.data("newurl")&&(l.options.url=n.data("newurl"),n.data("bjui.dialog",null)):n.data("bjui.lookup",l=new s(this,o)),"string"==typeof a&&t.isFunction(l[a])?([].shift.apply(i),i?l[a].apply(l,i):l[a]()):l.init()})}var i,a,n,o,s=function(e,i){this.$element=t(e),this.options=i,this.$lookBtn=null};s.DEFAULTS={url:null,id:null,mask:!0,width:600,height:400,title:"Lookup",maxable:!0,resizable:!0},s.EVENTS={afterChange:"afterchange.bjui.lookup"},s.prototype.init=function(){var t=this,e=this.options;return this.tools,e.url?(e.url=decodeURI(e.url).replacePlh(t.$element.closest(".unitBox")),e.url.isFinishedTm()?(e.url=encodeURI(e.url),i=this.options.group||null,a=this.options.suffix||null,n=this.$element,a&&(a=a.trim()),void this.open(t.$element)):(t.$element.alertmsg("error",e.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),BJUI.debug("Lookup Plugin: The lookup's url is incorrect, url:"+e.url),!1)):(BJUI.debug("Lookup Plugin: Error trying open a lookup dialog, url is undefined!"),!1)},s.prototype.addBtn=function(){var e,i,a=this,n=a.$element;this.$lookBtn||n.parent().hasClass("wrap_bjui_btn_box")||(this.$lookBtn=t(FRAG.lookupBtn),this.$element.css({paddingRight:"15px"}).wrap('<span class="wrap_bjui_btn_box"></span>'),e=this.$element.parent(),i=this.$element.addClass("form-control").innerHeight(),e.css({position:"relative",display:"inline-block"}),t.each(a.options,function(t,e){"toggle"!=t&&a.$lookBtn.data(t,e)}),this.$lookBtn.css({height:i,lineHeight:i+"px"}).appendTo(e),this.$lookBtn.on("selectstart",function(){return!1}))},s.prototype.open=function(t){var e=this.options;t.dialog({id:e.id||"lookup_dialog",url:e.url,title:e.title,width:e.width,height:e.height,mask:e.mask,maxable:e.maxable,resizable:e.resizable})},s.prototype.getField=function(t){return(i?i+".":"")+t+(a?a:"")},s.prototype.setSingle=function(t,e){"string"==typeof t&&(t=new Function("return "+t)()),this.setVal(t,e)},s.prototype.setMult=function(e,i){var a={},n=this.$element.closest(".unitBox");return n.find('[name="'+e+'"]').filter(":checked").each(function(){var e,i,n=new Function("return "+t(this).val())();for(e in n)i=a[e]?a[e]+",":"",a[e]=i+n[e]}),t.isEmptyObject(a)?void this.$element.alertmsg("error",this.$element.data("warn")||FRAG.alertSelectMsg):void this.setVal(a,i)},s.prototype.setVal=function(e,i){var a,o=this,l=n.closest(".unitBox");n.data("customEvent")?n.trigger("customEvent.bjui.lookup",[e]):l.find(":input").each(function(){var n,l,r=t(this),d=r.attr("name");for(n in e)if(l=o.getField(n),l==d){a=1==i&&r.val()?r.val()+","+e[n]:e[n],r.val(a).trigger(s.EVENTS.afterChange,{value:e[n]});break}}),this.$element.dialog("closeCurrent")},o=t.fn.lookup,t.fn.lookup=e,t.fn.lookup.Constructor=s,t.fn.lookup.noConflict=function(){return t.fn.lookup=o,this},t(document).on(BJUI.eventType.initUI,function(i){var a=t(i.target).find('[data-toggle="lookup"]');a.length&&e.call(a,"addBtn")}),t(document).on("click.bjui.lookup.data-api",'[data-toggle="lookupbtn"]',function(i){var a=t(this);a.attr("href")&&!a.data("url")&&a.attr("data-url",a.attr("href")),a.data("title")||a.attr("data-title",a.text()),e.call(a),i.preventDefault()}),t(document).on("click.bjui.lookupback.data-api",'[data-toggle="lookupback"]',function(i){var a=t(this),n=a.data("args"),o=a.data("lookupid"),s=t('input[name="lookupType"]:checked').val();n?e.call(a,"setSingle",n,s):o&&e.call(a,"setMult",o,s),i.preventDefault()})}(jQuery),+function(t){"use strict";function e(e){var i=arguments,n=e;return this.each(function(){var o=t(this),s=t.extend({},a.DEFAULTS,o.data(),"object"==typeof e&&e),l=o.data("bjui.tags");l||o.data("bjui.tags",l=new a(this,s)),"string"==typeof n&&t.isFunction(l[n])?([].shift.apply(i),i?l[n].apply(l,i):l[n]()):l.init()})}var i,a=function(e,i){this.$element=t(e).addClass("tag-input"),this.options=i,this.tools=this.TOOLS(),this.$box=t(this.$element.wrap('<div class="bjui-tags"></div>')).parent(),this.timeout=null,this.$tagsArr={},this.tags=[]};a.DEFAULTS={width:300,url:"",global:!1,type:"GET",tagname:"tag",max:0,clear:!1,lightCls:"tags-highlight"},a.EVENTS={afterCreated:"aftercreated.bjui.tags"},a.prototype.TOOLS=function(){var e=this,i=this.options,n={keyDown:function(t){return 13==t.which?!1:void 0},keyUp:function(a){var n,o,s,l,r,d,c,u,h,p;switch(a.which){case BJUI.keyCode.BACKSPACE:if(0==t.trim(e.$element.val()).length)return e.tools.removeMenu(),!1;break;case BJUI.keyCode.ESC:e.tools.removeMenu();break;case BJUI.keyCode.DOWN:if(!e.$menu||!e.$menu.length)return;return n=e.$menu.find("> ."+i.lightCls),o=e.$menu.find("> li:first-child"),n.length?(s=n.removeClass(i.lightCls).next(),s.length?s.addClass(i.lightCls):o.addClass(i.lightCls)):o.addClass(i.lightCls),!1;case BJUI.keyCode.UP:if(!e.$menu||!e.$menu.length)return;return n=e.$menu.find("> ."+i.lightCls),l=e.$menu.find("> li:last-child"),n.length?(r=n.removeClass(i.lightCls).prev(),r.length?r.addClass(i.lightCls):l.addClass(i.lightCls)):l.addClass(i.lightCls),!1;case BJUI.keyCode.ENTER:if(i.max>0&&e.$tagsArr.length>=i.max)return!1;if(d=!1,c=!1,u=null,h=e.$menu&&e.$menu.find("> ."+i.lightCls),h&&h.length)d=h.text(),u=h.data("item"),c=u.value;else{if(d=t.trim(e.$element.val()),!d.length)return!1;if(i.clear&&-1==t.inArray(d,e.tags))return e.$element.val(""),!1;c=d}if(!d)return;return p=!1,e.$tagsArr.length&&e.$tagsArr.each(function(){return t(this).val()==c?void(p=!0):void 0}),p?(e.$element.val(""),!1):(e.tools.createTag(d,c),e.tools.removeMenu(),e.$element.val(""),t.proxy(e.tools.onAfterCreated(u,c),e),!1)}},query:function(){e.timeout&&clearTimeout(e.timeout),e.timeout=setTimeout(e.tools.doQuery,300)},doQuery:function(){var a,n,o,s,l;i.max>0&&e.$tagsArr.length>=i.max||(a=e.$element.val(),n=e.$box.find("> .tags-menu"),o=[],s=null,l=e.$element.closest(".navtab-panel").length?t.CurrentNavtab:t.CurrentDialog,e.$element.closest(".bjui-layout").length&&(l=e.$element.closest(".bjui-layout")),0!=a.length&&(e.$element.one("ajaxStart",function(){l.trigger("bjui.ajaxStart")}).one("ajaxStop",function(){l.trigger("bjui.ajaxStop")}),t.ajax({url:i.url,global:i.global,type:i.type,data:{term:a},dataType:"json",success:function(a){if(0!=a.length){n.length||(n=t('<ul class="tags-menu"></ul>')),n.empty().hide().appendTo(e.$box);for(var l=0;l<a.length;l++)s=t('<li class="tags-item">'+a[l].label+"</li>").data("item",a[l]),s.appendTo(n),o.push(a[l].label);e.tags=o,n.css({top:e.$element.position().top+e.$element.outerHeight(),left:e.$element.position().left}).fadeIn().find("> li").hover(function(){t(this).addClass(i.lightCls).siblings().removeClass(i.lightCls)},function(){t(this).removeClass(i.lightCls)}).click(function(){var i=t(this).text(),a=t(this).data("item"),o=a.value,s=!1;return e.$box.find("input:hidden").each(function(){return t(this).val()==o?void(s=!0):void 0}),s?(e.$element.val(""),void n.remove()):(t.proxy(e.tools.createTag(i,o),e),n.remove(),e.$element.val(""),void t.proxy(e.tools.onAfterCreated(a,o),e))}),e.$menu=n}}})))},createTag:function(i,a){var n,o=t('<span class="label label-tag" data-value="'+a+'" style="margin-left: 1px; margin-top: 1px;"><i class="fa fa-tag"></i> '+i+'&nbsp;&nbsp;<a href="#" class="close">&times;</a></span>');o.insertBefore(e.$element).find("a.close").click(function(){var i=o.data("value");e.$box.find("input:hidden").each(function(){t(this).val()==i&&t(this).remove()}),o.remove(),e.$tagsArr=e.$box.find('input[name="'+e.options.tagname+'"]')}),n=t('<input type="hidden" name="'+e.options.tagname+'">').val(a),n.appendTo(e.$box),e.$tagsArr=e.$box.find('input[name="'+e.options.tagname+'"]')},removeMenu:function(){e.$menu&&e.$menu.remove()},onAfterCreated:function(i,n){var o=[];e.$tagsArr.length&&e.$tagsArr.each(function(){o.push(t(this).val())}),e.$element.trigger(a.EVENTS.afterCreated,{item:i,value:n,tags:o.join(",")})}};return n},a.prototype.init=function(){var e=this,i=this.$element,a=this.options;return a.url?(a.url=decodeURI(a.url).replacePlh(i.closest(".unitBox")),a.url.isFinishedTm()?(a.url=encodeURI(a.url),isNaN(this.options.max)?void BJUI.debug("Tags Plugin: Parameter 'max' is non-numeric type!"):(e.$box.width(a.width).on("click",function(){i.focus()}),i.on("keydown",t.proxy(this.tools.keyDown,this)).on("keyup",t.proxy(this.tools.keyUp,this)),t.support.leadingWhitespace?i.on("input",t.proxy(this.tools.query,this)):i.on("propertychange",t.proxy(this.tools.query,this)),void t(document).on("click.bjui.tags",t.proxy(function(e){t(e.target).closest(this.$box).length||this.tools.removeMenu()},this)))):(i.alertmsg("error",a.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("Tags Plugin: The query tags url is incorrect, url: "+a.url))):void BJUI.debug("Tags Plugin: Do query tags, url is undefined!")},a.prototype.destroy=function(){this.$tags&&(this.$element.upwrap(),$tags.remove())},i=t.fn.tags,t.fn.tags=e,t.fn.tags.Constructor=a,t.fn.tags.noConflict=function(){return t.fn.tags=i,this},t(document).on(BJUI.eventType.initUI,function(i){var a=t(i.target).find('input[data-toggle="tags"]');a.length&&e.call(a)})}(jQuery),+function(t){"use strict";function e(e){var i=arguments,n=e;return window.FileReader?this.each(function(){var o=t(this),s=t.extend({},a.DEFAULTS,o.data(),"object"==typeof e&&e),l=o.data("bjui.upload");l||o.data("bjui.upload",l=new a(this,s)),"string"==typeof n&&t.isFunction(l[n])?([].shift.apply(i),i?l[n].apply(l,i):l[n]()):l.init()}):void this.each(function(){var e,i,a,n,o;if(t.fn.uploadify){if(e={swf:BJUI.PLUGINPATH+"uploadify/scripts/uploadify.swf",fileTypeExts:"*.jpg;*.png",id:"fileInput",fileObjName:"file",fileSizeLimit:204800,buttonText:"选择上传文件",auto:!1,multi:!1,height:24},i=t(this),a=i.data(),a.id||(a.id=i.attr("id")),t.extend(e,a),!e.uploader)return void BJUI.debug("Upload Plugin: The options uploader is undefined!");if(e.uploader=decodeURI(e.uploader).replacePlh(i.closest(".unitBox")),!e.uploader.isFinishedTm())return i.alertmsg("error",e.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("Upload Plugin: The options uploader is incorrect: "+e.uploader);e.uploader=encodeURI(e.uploader),"fileInput"==e.id&&(e.id=e.id+(new Date).getTime()),n=t('<input type="file" name="'+e.name+'" id="'+e.id+'">'),e.onInit&&"string"==typeof e.onInit&&(e.onInit=e.onInit.toFunc()),e.onCancel&&"string"==typeof e.onCancel&&(e.onCancel=e.onCancel.toFunc()),
e.onSelect&&"string"==typeof e.onSelect&&(e.onSelect=e.onSelect.toFunc()),e.onUploadSuccess&&"string"==typeof e.onUploadSuccess&&(e.onUploadSuccess=e.onUploadSuccess.toFunc()),e.onUploadComplete&&"string"==typeof e.onUploadComplete&&(e.onUploadComplete=e.onUploadComplete.toFunc()),e.onUploadError&&"string"==typeof e.onUploadError&&(e.onUploadError=e.onUploadError.toFunc()),n.appendTo(i),e.auto||(o=t('<button class="btn btn-orange" data-icon="cloud-upload">开始上传</button>'),o.hide().insertAfter(i).click(function(){n.uploadify("upload","*"),t(this).hide()}),e.onSelect=function(){o.show()}),n.uploadify(e)}})}var i,a=function(e,i){this.$element=t(e),this.options=i,this.tools=this.TOOLS()};a.DEFAULTS={fileTypeExts:"*.jpg;*.png",uploader:"",auto:!1,method:"POST",multi:!1,formData:{},fileObjName:"file",fileSizeLimit:204800,previewImg:!0,previewLoadimg:null,dragDrop:!1,showUploadedPercent:!0,showUploadedSize:!0,buttonText:"选择上传文件",removeTimeout:1e3,itemTemplate:FRAG.uploadTemp,breakPoints:!1,fileSplitSize:1048576,onUploadStart:null,onUploadSuccess:null,onUploadComplete:null,onUploadError:null,onInit:null,onCancel:null,onSelect:null},a.MIMETYPES={zip:["application/x-zip-compressed"],jpg:["image/jpeg"],png:["image/png"],gif:["image/gif"],swf:["application/x-shockwave-flash"],doc:["application/msword"],xls:["application/vnd.ms-excel"],docx:["application/vnd.openxmlformats-officedocument.wordprocessingml.document"],xlsx:["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],ppt:["application/vnd.ms-powerpoint"],pptx:["application/vnd.openxmlformats-officedocument.presentationml.presentation"],mp3:["audio/mpeg"],mp4:["video/mp4"],pdf:["application/pdf"],txt:["text/plain"],xml:["text/xml"]},a.prototype.TOOLS=function(){var e=this,i=this.options,n={formatFileSize:function(t,e){return t=t>1048576&&!e?(Math.round(100*t/1048576)/100).toString()+"MB":(Math.round(100*t/1024)/100).toString()+"KB"},getFile:function(t,e){for(var i=0;i<e.length;i++)if(e[i].index==t)return e[i];return!1},getFileTypes:function(t){var e,i=[],a=t.split(";");for(e=0;e<a.length;e++)i.push(a[e].split(".").pop());return i},getMimetype:function(t){return a.MIMETYPES[t]},getAcceptString:function(t){var e,i,a=this.getFileTypes(t),n=[];for(e=0;e<a.length;e++)i=this.getMimetype(a[e]),i?n.push(i):n.push("."+a[e]);return n.join(",")},filter:function(a){var n,o,s=[],l=this.getFileTypes(i.fileTypeExts);if(l.length>0)for(n=0;n<a.length;n++)o=a[n],parseInt(this.formatFileSize(o.size,!0))>i.fileSizeLimit?e.$element.alertmsg("error",'文件"'+o.name+'"大小超出限制！'):t.inArray(o.name.split(".").pop().toLowerCase(),l)>=0?s.push(o):e.$element.alertmsg("error",'文件"'+o.name+'"类型不允许！');return s},getFiles:function(t){var i,a=t.target.files||t.dataTransfer.files;for(a=this.filter(a),i=0;i<a.length;i++)a[i].id=a[i].lastModifiedDate.getTime()+"_"+a[i].size+"_"+(a[i].type||"").replace(/\W/g,""),this.renderQueueItem(a[i]),e.queueData.files++;return a},renderQueueItem:function(a){var n,o,s=0,l=t(i.itemTemplate.replace("{fileId}",a.id).replace("{fileName}",a.name).replace("#upConfirm#",BJUI.regional.upload.upConfirm).replace("#upPause#",BJUI.regional.upload.upPause).replace("#upCancel#",BJUI.regional.upload.upCancel).replace("{percent}","0.00%").replace("{uploadedSize}","0KB").replace("{fileSize}",this.formatFileSize(a.size)));i.auto&&l.find("> .info > .up_confirm").remove(),l.data("upfile",a),e.$uploadFileList.append(l),i.breakPoints&&(s=this.getUploadedSize(a.id),s>a.size&&(s=a.size)),this.showProgress(a.id,s,a.size),i.previewImg&&-1!=a.type.indexOf("image")?(n=l.find("> .preview > .img"),i.previewLoadimg&&n.html('<img src="'+i.previewLoadimg+'" height="114">'),this.previewImg(a,n)):l.find("> .preview").remove(),i.showUploadedSize?(o=l.find("> .filesize"),o.find("> .uploadedsize").html(this.formatFileSize(s)),o.find("> .filesize").html(this.formatFileSize(a.size))):l.find("> .filesize").remove(),i.showUploadedPercent?l.find("> .percent").html((100*(s/a.size)).toFixed(2)+"%"):l.find("> .percent").remove(),i.onSelect&&i.onSelect(files),i.auto&&e.fileUpload(a,s),l.on("click.bjui.upload.confirm",".up_confirm",function(){var i=t(this),a=i.closest(".item");i.hide().next().show(),e.fileUpload(a.data("upfile"),s)}),l.on("click.bjui.upload.cancel",".up_cancel",this.removeQueueItem)},successQueueItem:function(a,o){n.showProgress(a.id,a.size,a.size),i.onUploadSuccess&&i.onUploadSuccess.toFunc().call(e,a,o.responseText,e.$element),setTimeout(function(){e.$element.find("#"+a.id).fadeOut("normal",function(){t(this).remove();var i=e.$element.find("> .queue > .item:visible").length;0==i&&(e.$element.find("> .queue").hide(),e.$file.val(""))})},i.removeTimeout)},removeQueueItem:function(i,a){a&&a.abort(),t(this).closest(".item").fadeOut("normal",function(){t(this).remove();var i=e.$element.find("> .queue > .item:visible").length;0==i&&e.$element.find("> .queue").hide()}),i.preventDefault()},previewImg:function(t,e){if(t&&e.length){var i=new FileReader;i.onload=function(t){e.html('<img src="'+t.target.result+'">')},i.readAsDataURL(t)}},showProgress:function(t,i,a){var n=100*(i/a)+"%";e.tools.formatFileSize(i),(100*(i/a)).toFixed(2)+"%",e.$element.find("#"+t+" > .progress > .bar").css("width",n)},getUploadedSize:function(t){return 1*localStorage.getItem(t)},saveUploadedSize:function(t,e){localStorage.setItem(t,e)},sendBlob:function(t,e,a,n){var o,s=new FormData;if(e.open(i.method,t,!0),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.append(i.fileObjName,a),n)for(o in n)s.append(o,n[o]);e.send(s)}};return n},a.prototype.init=function(){var e,i=this,a=this.$element,n=this.options;return n.uploader?(n.uploader=decodeURI(n.uploader).replacePlh(a.closest(".unitBox")),n.uploader.isFinishedTm()?(n.uploader=encodeURI(n.uploader),void(a.hasClass("bjui-upload")||(e=t(FRAG.uploadFrag.replaceAll("#multi#",n.multi?"multiple":"").replaceAll("#accept#",i.tools.getAcceptString(n.fileTypeExts)).replaceAll("#btnTxt#",(n.icon?'<i class="fa fa-'+n.icon+'">&nbsp;&nbsp;':"")+n.buttonText)),a.addClass("bjui-upload").append(e),this.$file=a.find("> .bjui-upload-select-file"),this.$uploadFileList=a.find("> .queue"),this.queueData={files:0,success:0,error:0},a.on("change.bjui.upload",".bjui-upload-select-file",function(t){i.fileSelect(t)}).on("click.bjui.upload",".bjui-upload-select",function(){i.$file.trigger("click")}),n.onInit&&n.onInit(),n.dragDrop&&(a[0].ondragover=function(t){return t.preventDefault(),!0},a[0].ondrop=function(t){i.fileSelect(t),t.stopPropagation(),t.preventDefault()})))):(a.alertmsg("error",n.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("Upload Plugin: The options uploader is incorrect: "+n.uploader))):void BJUI.debug("Upload Plugin: The options uploader is undefined!")},a.prototype.fileSelect=function(t){this.$uploadFileList.show(),this.tools.getFiles(t)},a.prototype.fileUpload=function(e,i){var a=this,n=a.$element,o=a.options,s=a.tools,l=!1,r=e;l=new XMLHttpRequest,o.breakPoints&&(e=r.slice(i,i+o.fileSplitSize)),l.upload&&(l.upload.onprogress=function(t){a.onProgress(e,t.loaded,r.size)},l.onreadystatechange=function(){if(4==l.readyState&&200==l.status){var t=(JSON.parse(l.responseText),!1);o.breakPoints?(i+=o.fileSplitSize,s.saveUploadedSize(r.id,i),i<r.size?(e=r.slice(i,i+o.fileSplitSize),s.sendBlob(o.uploader,l,e,o.formData)):t=!0):t=!0,t&&(a.queueData.success++,s.successQueueItem(r,l),o.onUploadComplete&&o.onUploadComplete(r,l.responseText))}else a.queueData.error++,o.onUploadError&&o.onUploadError(r,l.responseText);o.onQueueComplete&&(a.queueData.files=a.queueData.success+a.queueData.error)&&option.onQueueComplete(a.queueData)},o.onUploadStart&&o.onUploadStart(),o.formData.fileName=r.name,o.formData.lastModifiedDate=r.lastModifiedDate.getTime(),s.sendBlob(o.uploader,l,e,o.formData)),n.find("#"+r.id+" > .info > .up_pause").on("click.bjui.upload.pause",function(){l.abort(),t(this).hide().prev().show()}),n.find("#"+r.id+" > .info > .up_cancel").off("click.bjui.upload.cancel").on("click.bjui.upload.cancel",t.proxy(function(t){this.tools.removeQueueItem(t,l)},this))},a.prototype.onProgress=function(t,e,i){var a,n,o,s,l=this,r=l.options,d=l.$element.find("#"+t.id+" .progress"),c=e,u=d.attr("lastLoaded")||0;e-=parseInt(u),e>t.size&&(e=t.size),l.$progressBar=d.children(".bar"),a=r.breakPoints?parseFloat(l.$progressBar.get(0).style.width||0):0,n=(100*(e/i)+a).toFixed(2),o=n>100?"100%":n+"%",r.showUploadedSize&&(s=d.nextAll(".filesize"),s.find("> .uploadedsize").text(l.tools.formatFileSize(e))),r.showUploadedPercent&&d.nextAll(".up_percent").text(o),l.$progressBar.css("width",o),c<r.fileSplitSize?d.attr("lastLoaded",c):d.removeAttr("lastLoaded")},a.prototype.destroy=function(){},i=t.fn.upload,t.fn.upload=e,t.fn.upload.Constructor=a,t.fn.upload.noConflict=function(){return t.fn.upload=i,this},t(document).on(BJUI.eventType.initUI,function(i){var a=t(i.target).find('[data-toggle="upload"]');a.length&&e.call(a)})}(jQuery),+function(t){"use strict";function e(e){var i=arguments,a=e;return this.each(function(){var o=t(this),s=t.extend({},n.DEFAULTS,o.data(),"object"==typeof e&&e),l=o.data("bjui.theme");l||o.data("bjui.theme",l=new n(this,s)),"string"==typeof a&&t.isFunction(l[a])?([].shift.apply(i),i?l[a].apply(l,i):l[a]()):l.init()})}var i,a,n,o;t(function(){var e=function(){var e,n;i=t("#bjui-link-theme"),a=t("#bjui-themes"),t.cookie&&(e=t.cookie("bjui_theme")||"blue",n=a.find("a.theme_"+e),n.theme({}))};e()}),n=function(e,i){this.$element=t(e),this.options=i},n.DEFAULTS={theme:"purple"},n.prototype.init=function(){var t,e,n;i.length&&(t=i.attr("href"),t=t.substring(0,t.lastIndexOf("/")),t=t.substring(0,t.lastIndexOf("/")),t+="/"+this.options.theme+"/core.css",i.attr("href",t),e=this.$element.closest("ul").prev(),n=e.attr("class"),n=n.replace(/(theme[\s][a-z]*)/g,""),e.removeClass().addClass(n).addClass("theme").addClass(this.options.theme),a.find("li").removeClass("active"),this.$element.parent().addClass("active"),this.cookie())},n.prototype.setTheme=function(t){a.find("a.theme_"+t).trigger("click")},n.prototype.cookie=function(){var e=this.options.theme;t.cookie&&t.cookie("bjui_theme",e,{path:"/",expires:30})},o=t.fn.theme,t.fn.theme=e,t.fn.theme.Constructor=n,t.fn.theme.noConflict=function(){return t.fn.theme=o,this},t(document).on("click.bjui.theme.data-api",'[data-toggle="theme"]',function(i){e.call(t(this)),i.preventDefault()})}(jQuery),+function(t){"use strict";function e(e){var i=arguments,a=e;return this.each(function(){var n=t(this),s=t.extend({},o.DEFAULTS,n.data(),"object"==typeof e&&e),l=n.data("bjui.initui");l||n.data("bjui.initui",l=new o(this,s)),"string"==typeof a&&t.isFunction(l[a])?([].shift.apply(i),i?l[a].apply(l,i):l[a]()):l.init()})}var i,a,n,o=function(e,i){this.$element=t(e),this.options=i};o.DEFAULTS={},o.prototype.init=function(){var e=this,i=e.$element;t.when(e.initUI()).done(function(){i.trigger(BJUI.eventType.afterInitUI)})},o.prototype.initUI=function(){var e=this.$element;t.when(e.trigger(BJUI.eventType.beforeInitUI)).done(function(){e.trigger(BJUI.eventType.initUI)})},i=t.fn.initui,t.fn.initui=e,t.fn.initui.Constructor=o,t.fn.initui.noConflict=function(){return t.fn.initui=i,this},t(document).on("click.bjui.initui.data-api",'[data-toggle="initui"]',function(t){e.call($this,$this.data()),t.preventDefault()}),t(document).on(BJUI.eventType.beforeInitUI,function(e){var i=t(e.target),a=[],n=i.find("[data-noinit]");i.find("> .bjui-maskProgress").find(".progress").stop().animate({width:"85%"},"fast"),n.each(function(){var e=t(this),i={};i.$target=e,i.$next=e.next(),i.$prev=e.prev(),i.$parent=e.parent(),i.visible=!!e.is(":visible"),a.push(i),e.remove()}),i.data("bjui.noinit",a)}),t(document).on(BJUI.eventType.initUI,function(e){var i=t(e.target);i.find("> .bjui-maskProgress").find(".progress").stop().animate({width:"95%"},"fast")}),t(document).on(BJUI.eventType.afterInitUI,function(e){var i=t(e.target),a=i.data("bjui.noinit"),n=i.find("> .bjui-pageContent").find("form");a&&t.each(a,function(t,e){e.$next.length?e.$next.before(e.$target):e.$prev.length?e.$prev.after(e.$target):e.$parent.length&&e.$parent.append(e.$target),e.visible&&e.$target.show(),i.removeData("bjui.noinit")}),i.resizePageH(),n.length&&i.find("> .bjui-pageFooter").find(":submit").on("click.bjui.submit",function(t){t.preventDefault(),n.submit()}),i.find(".bjui-maskProgress").find(".progress").stop().animate({width:"100%"},"fast",function(){i.find(".bjui-ajax-mask").fadeOut("normal",function(){t(this).remove()})})}),t(document).one(BJUI.eventType.afterInitUI,function(){var e=t("#bjui-hnav-navbar"),i=e.find("> li.active");i.length&&i.find("> .items").length&&i.find("> a").trigger("click")}),a=function(e){var i,a,n,o=e,s=o,l=o.css("position");return"static"==l&&(s=o.offsetParent()),i=parseInt(s.css("zIndex"))||0,a=o.find("> .bjui-maskBackground"),n=o.find("> .bjui-maskProgress"),a.length||(a=t(FRAG.maskBackground),n=t(FRAG.maskProgress.replace("#msg#",BJUI.regional.progressmsg)),o.prepend(a).prepend(n)),parseInt(a.css("zIndex"))||0,parseInt(n.css("zIndex"))||0,a.css("zIndex",i+1),n.css("zIndex",i+2),{$bg:a,$pr:n}},t(document).on("bjui.ajaxStart",function(e,i,n){var o=a(t(e.target));o.$bg.fadeIn(),o.$pr.fadeIn(),o.$pr.find(".progress").animate({width:"80%"},i||500),n&&setTimeout(function(){n.toFunc().call(this)},25)}).on("bjui.ajaxStop",function(e){var i=a(t(e.target));i.$pr.find(".progress").animate({width:"100%"},"fast",function(){i.$bg.remove(),i.$pr.remove()})}).on("bjui.ajaxError",function(e){var i=a(t(e.target));i.$bg.remove(),i.$pr.remove()}),t(document).on(BJUI.eventType.ajaxStatus,function(e){var i=t(e.target),n=a(i);i.one("ajaxStart",function(){n.$bg.fadeIn(),n.$pr.fadeIn(),n.$pr.find(".progress").animate({width:"10%"},"fast")}).one("ajaxStop",function(){}).one("ajaxError",function(){n.$bg.remove(),n.$pr.remove()})}),n=function(t){t.find('select[data-toggle="selectpicker"]').selectpicker("destroyMenu"),t.find('[data-toggle="selectztree"]').trigger("destroy.bjui.selectztree")},t(document).on(BJUI.eventType.beforeLoadDialog,function(){}).on(BJUI.eventType.beforeAjaxLoad,function(e){n(t(e.target))}).on(BJUI.eventType.beforeCloseNavtab,function(e){n(t(e.target))}).on(BJUI.eventType.beforeCloseDialog,function(e){n(t(e.target))}),t(function(){t(document).on("keydown keyup",function(t){t.which===BJUI.keyCode.CTRL&&(BJUI.KeyPressed.ctrl="keydown"==t.type),t.which===BJUI.keyCode.SHIFT&&(BJUI.KeyPressed.shift="keydown"==t.type)})})}(jQuery),+function(t){"use strict";t(document).on(BJUI.eventType.initUI,function(e){var i,a,n,o,s,l=t(e.target),r=l.find('[data-toggle="icheck"]');r.each(function(){var e=t(this),i=e.attr("id"),a=e.attr("name"),n=e.data("label");n&&e.after('<label for="'+i+'" class="ilabel">'+n+"</label>"),e.on("ifCreated",function(){var e=t(this).closest("div"),n=e.next('[for="'+i+'"]');e.attr("data-icheck",a),n.attr("data-icheck",a)}).iCheck({checkboxClass:"icheckbox_minimal-purple",radioClass:"iradio_minimal-purple",increaseArea:"20%"}).on("ifChanged",function(){t(this).trigger("validate")}),e.prop("disabled")&&e.iCheck("disable")}),r.filter(".checkboxCtrl").on("ifChanged",function(e){var i=1==e.target.checked?"check":"uncheck",a=t(this).data("group");l.find(':checkbox[name="'+a+'"]').iCheck(i)}),l.find(":text, :password, textarea, :button, a.btn").each(function(){var e,i,a,n,o,s,l=t(this),r=l.closest("table.bjui-tabledit");if((l.is(":text")||l.is(":password")||l.isTag("textarea"))&&!l.hasClass("form-control")&&l.addClass("form-control"),l.is(":button")&&(e=l.data("icon"),l.data("large"),i=l.attr("class"),l.hasClass("btn")||l.removeClass().addClass("btn").addClass(i),e&&(a="fa-"+e.replace("fa-",""),l.data("bjui.icon")||l.html('<i class="fa '+a+'"></i> '+l.html()).data("bjui.icon",!0))),l.isTag("a")&&(e=l.data("icon"),l.data("large"),e&&(a="fa-"+e.replace("fa-",""),l.data("bjui.icon")||l.html('<i class="fa '+a+'"></i> '+l.html()).data("bjui.icon",!0))),l.isTag("textarea")&&(n=l.data("toggle"),n&&"autoheight"==n&&t.fn.autosize&&l.addClass("autosize").autosize()),!r.length){if(o=l.attr("size")||l.attr("cols"),s=10*o,!o)return;s&&l.css("width",s)}}),l.find('form[data-toggle="validate"]').each(function(){var e=t(this),i="undefined"==typeof e.data("alertmsg")?!0:e.data("alertmsg");t(this).validator({valid:function(e){t(e).bjuiajax("ajaxForm",t(e).data())},validClass:"ok",theme:"red_right_effect"}).on("invalid.form",function(e,a,n){i&&t(a).alertmsg("error",FRAG.validateErrorMsg.replace("#validatemsg#",BJUI.regional.validatemsg).replaceMsg(n.length))})}),l.find('[data-toggle="moresearch"]').each(function(){var e=t(this),i=e.closest(".bjui-pageHeader"),a=i&&i.find(".bjui-moreSearch"),n=e.data("name");e.attr("title")||e.attr("title","更多查询条件"),e.click(function(o){return a.length?(a.css("top",i.outerHeight()-1),a.is(":visible")?(e.html('<i class="fa fa-angle-double-down"></i>'),n&&t("body").data("moresearch."+n,!1)):(e.html('<i class="fa fa-angle-double-up"></i>'),n&&t("body").data("moresearch."+n,!0)),a.fadeToggle("slow","linear"),void o.preventDefault()):void BJUI.debug("Not created 'moresearch' box[class=\"bjui-moreSearch\"]!")}),n&&t("body").data("moresearch."+n)&&(a.css("top",i.outerHeight()-1).fadeIn(),e.html('<i class="fa fa-angle-double-up"></i>'))}),i=l.find('select[data-toggle="selectpicker"]'),a=function(e,i){var a,n,o=e.data("refurl"),s=function(e){var i,a=t(e.data("nextselect"));a&&a.length&&(i=a.data("emptytxt")||"&nbsp;",a.html("<option>"+i+"</option>").selectpicker("refresh"),s(a))};i&&i.length&&o&&(a=e.data("val"),n=i.data("val"),"undefined"==typeof a&&(a=e.val()),t.ajax({type:"POST",dataType:"json",url:o.replace("{value}",encodeURIComponent(a)),cache:!1,data:{},success:function(a){if(a){var o="",l="";t.each(a,function(t){var e,i;a[t]&&a[t].length?(e=a[t][0],i=a[t][1]):(e=a[t].value,i=a[t].label),"undefined"!=typeof n&&(l=e==n?" selected":""),o+='<option value="'+e+'"'+l+">"+i+"</option>"}),e.removeAttr("data-val").removeData("val"),i.removeAttr("data-val").removeData("val"),o||(o=i.data("emptytxt")||"&nbsp;",o="<option>"+o+"</option>"),i.html(o).selectpicker("refresh"),s(i)}},error:BJUI.ajaxError}))},i.each(function(){var e=t(this),i=e.data(),n=t(i.nextselect);e.addClass("show-tick"),i.style||e.data("style","btn-default"),i.width||e.data("width","auto"),i.container?1==i.container&&e.attr("data-container","false").data("container",!1):e.data("container","body"),e.selectpicker(),n&&n.length&&"undefined"!=typeof n.data("val")&&a(e,n)}),i.change(function(){var e=t(this),i=t(e.data("nextselect"));a(e,i),e.attr("aria-required")&&e.trigger("validate")}),l.find('[data-toggle="ztree"]').each(function(){function e(e,i,a){if(a.faicon){var n=t("#"+a.tId+"_a");n.data("faicon")||n.data("faicon",!0).addClass("faicon").find("> span.button").append('<i class="fa fa-'+a.faicon+'"></i>')}p.onNodeCreated&&p.onNodeCreated.toFunc().call(this,e,i,a)}function i(e,i,a){a.faiconClose&&t("#"+a.tId+"_ico").find("> i").attr("class","fa fa-"+a.faiconClose),console.log("11"),p.onCollapse&&p.onCollapse.toFunc().call(this,e,i,a)}function a(e,i,a){a.faicon&&a.faiconClose&&t("#"+a.tId+"_ico").find("> i").attr("class","fa fa-"+a.faicon),p.onExpand&&p.onExpand.toFunc().call(this,e,i,a)}function n(e,i){var a=i.level,n=t("#"+i.tId+c),o=t("#diyBtn_add_"+i.id),s=t("#diyBtn_del_"+i.id);o.length||a<p.maxAddLevel&&(o=t('<span class="tree_add" id="diyBtn_add_'+i.id+'" title="添加"></span>'),o.appendTo(n),o.on("click",function(){u.addNodes(i,{name:"新增Item"})})),s.length||(s=t('<span class="tree_del" id="diyBtn_del_'+i.id+'" title="删除"></span>'),s.appendTo(n).on("click",function(t){var a,n,o=function(){s.alertmsg("confirm","确认要删除 "+i.name+" 吗？",{okCall:function(){if(u.removeNode(i),p.onRemove){var a=p.onRemove.toFunc();a&&a.call(this,t,e,i)}},cancelCall:function(){}})};p.beforeRemove?(a=p.beforeRemove.toFunc(),a&&(n=a.call(a,e,i),n&&1==n&&o())):o()}))}function o(e,i){var a=t("#diyBtn_add_"+i.id),n=t("#diyBtn_del_"+i.id);a&&a.length&&a.off("click").remove(),n&&n.length&&n.off("click").remove()}function s(t,e){for(var i=0;i<e.length;i++)if(e[i].drag===!1)return!1;return!0}function l(t,e,i){return i?i.drop!==!1:!0}var r,d,c,u,h=t(this),p=h.data(),f=p.options;f&&"string"==typeof f&&(f=f.toObj()),f&&t.extend(p,"object"==typeof f&&f),r=p.setting,p.nodes?("string"==typeof p.nodes&&(p.nodes=p.nodes.trim().startsWith("[")||p.nodes.trim().startsWith("{")?p.nodes.toObj():p.nodes.toFunc()),"function"==typeof p.nodes&&(p.nodes=p.nodes.call(this)),h.removeAttr("data-nodes")):(p.nodes=[],h.find("> li").each(function(){var e=t(this),i=e.data();i.pid&&(i.pId=i.pid),i.name=e.html(),p.nodes.push(i)}),h.empty()),p.showRemoveBtn||(p.showRemoveBtn=!1),p.showRenameBtn||(p.showRenameBtn=!1),p.addHoverDom&&"function"!=typeof p.addHoverDom&&(p.addHoverDom="edit"==p.addHoverDom?n:p.addHoverDom.toFunc()),p.removeHoverDom&&"function"!=typeof p.removeHoverDom&&(p.removeHoverDom="edit"==p.removeHoverDom?o:p.removeHoverDom.toFunc()),p.maxAddLevel||(p.maxAddLevel=2),d={view:{addHoverDom:p.addHoverDom||null,removeHoverDom:p.removeHoverDom||null,addDiyDom:p.addDiyDom?p.addDiyDom.toFunc():null},edit:{enable:p.editEnable,showRemoveBtn:p.showRemoveBtn,showRenameBtn:p.showRenameBtn},check:{enable:p.checkEnable,chkStyle:p.chkStyle,radioType:p.radioType},callback:{onClick:p.onClick?p.onClick.toFunc():null,beforeDrag:p.beforeDrag?p.beforeDrag.toFunc():s,beforeDrop:p.beforeDrop?p.beforeDrop.toFunc():l,onDrop:p.onDrop?p.onDrop.toFunc():null,onCheck:p.onCheck?p.onCheck.toFunc():null,beforeRemove:p.beforeRemove?p.beforeRemove.toFunc():null,onRemove:p.onRemove?p.onRemove.toFunc():null,onNodeCreated:e,onCollapse:i,onExpand:a},data:{simpleData:{enable:p.simpleData||!0},key:{title:p.title||""}}},r&&"string"==typeof r&&(r=r.toObj()),r&&t.extend(!0,d,"object"==typeof r&&r),t.fn.zTree.init(h,d,p.nodes),c="_a",u=t.fn.zTree.getZTreeObj(h.attr("id")),p.expandAll&&u.expandAll(!0)}),n=l.find('[data-toggle="selectztree"]'),n.each(function(){var e,i,a,n,o=t(this),s=o.data(),l=t(s.tree),r=(parseFloat(o.css("width")),o.outerHeight());s.width=s.width||o.outerWidth(),s.height=s.height||"auto",l&&l.length&&(e=l.attr("id"),i=t("#"+e+"_select_box"),a=function(e){var i,a,n=o.offset().top,d=o.offset().left,c=l.clone().appendTo(t("body")),u=c.outerHeight();c.remove(),i=t(window).height()-u-n-r,a=t(window).height()-n-r,"auto"==s.height&&0>i&&(a+=i),e.css({top:n+r,left:d,"max-height":a})},o.click(function(){var n,r;return i&&i.length?(a(i),void i.show()):(n=2,r=t.CurrentDialog,r&&r.length&&(n=r.css("zIndex")+1),i=t('<div id="'+e+'_select_box" class="tree-box"></div>').css({position:"absolute",zIndex:n,"min-width":s.width,height:s.height,overflow:"auto",background:"#FAFAFA",border:"1px #EEE solid"}).hide().appendTo(t("body")),l.appendTo(i).css("width","100%").data("fromObj",o).removeClass("hide").show(),a(i),void i.show())}),t("body").on("mousedown",function(e){var a=t(e.target);o[0]==e.target||i&&i.length>0&&a.closest(".tree-box").length>0||i.hide()}),n=o.closest(".bjui-pageContent"),n&&n.length&&n.scroll(function(){i&&i.length&&a(i)}),o.on("destroy.bjui.selectztree",function(){i.remove()}))}),l.find('[data-toggle="accordion"]').each(function(){var e=t(this),i=e.data("heightbox"),a=e.data("height"),n=function(i,a){var n=e.data("offsety")||0,a=a||t(i).outerHeight()-1*n,o=e.find(".panel-heading"),s=o.outerHeight();s=(s+1)*o.length,e.css("height",a),a-=s,e.find(".panel-collapse").find(".panel-body").css("height",a)};e.find("> .panel").length&&(i||a)&&(n(i,a),t(window).resize(function(){n(i,a)}),e.on("hidden.bs.collapse",function(){var e=t(this).find("> .panel:last"),i=e.find("> .panel-heading > h4 > a");i.hasClass("collapsed")&&e.css("border-bottom","1px #ddd solid")}))}),l.find('[data-toggle="kindeditor"]').each(function(){var e,i=t(this),a=i.data();a.items&&"string"==typeof a.items&&(a.items=a.items.replaceAll("'","").replaceAll(" ","").split(",")),a.afterUpload&&(a.afterUpload=a.afterUpload.toFunc()),a.afterSelectFile&&(a.afterSelectFile=a.afterSelectFile.toFunc()),a.confirmSelect&&(a.confirmSelect=a.confirmSelect.toFunc()),e={font:[],span:[".color",".background-color",".font-size",".font-family"],div:[".margin",".padding",".text-align"],table:["align","width"],"td,th":["align","valign","width","height","colspan","rowspan"],a:["href","target","name"],embed:["src","width","height","type","loop","autostart","quality",".width",".height","align","allowscriptaccess"],img:["src","width","height","border","alt","title","align",".width",".height",".border"],"p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6":["class","align",".text-align",".color",".font-weight",".font-style",".text-decoration",".vertical-align",".text-indent",".margin-left"],pre:["class"],hr:["class",".page-break-after"],"br,tbody,tr,strong,b,sub,sup,em,i,u,strike,s,del":[]},KindEditor.create(i,{pasteType:a.pasteType,minHeight:a.minHeight||260,autoHeightMode:a.autoHeight||!1,items:a.items||KindEditor.options.items,uploadJson:a.uploadJson,fileManagerJson:a.fileManagerJson,allowFileManager:a.allowFileManager||!0,fillDescAfterUploadImage:a.fillDescAfterUploadImage||!0,afterUpload:a.afterUpload,afterSelectFile:a.afterSelectFile,X_afterSelect:a.confirmSelect,htmlTags:e,cssPath:[BJUI.PLUGINPATH+"kindeditor_4.1.10/editor-content.css",BJUI.PLUGINPATH+"kindeditor_4.1.10/plugins/code/prettify.css"],afterBlur:function(){this.sync()}})}),l.find('[data-toggle="colorpicker"]').each(function(){var e=t(this),i=e.data("bgcolor");e.colorpicker(),i&&e.on("changeColor",function(t){e.css("background-color",t.color.toHex())})}),l.find('[data-toggle="clearcolor"]').each(function(){var e=t(this),i=e.data("target")?t(e.data("target")):null;i&&i.length&&e.click(function(){i.val(""),i.data("bgcolor")&&i.css("background-color","")})}),l.find('[data-toggle="tooltip"]').each(function(){t(this).tooltip()}),l.find('[data-toggle="dropdown"]').parent().on("show.bs.dropdown",function(){var e=t(this),i=e.outerWidth(),a=e.find("> .dropdown-menu"),n=a.outerWidth();i>n&&a.css("min-width",i)}),l.find('form[data-toggle="ajaxform"]').each(function(){t(this).validator({ignore:":input"}),t(this).validator("destroy")}),o=l.find('[data-toggle="highcharts"]'),o.each(function(){var e=t(this),i=e.data();t.get(i.url,function(t){e.highcharts(t)},"json")}),s=l.find('[data-toggle="echarts"]'),s.each(function(){var e=t(this),i=e.data(),a=i.theme?i.theme:"default",n=i.type.split(",");require.config({paths:{echarts:BJUI.PLUGINPATH+"echarts"}}),require(["echarts","echarts/theme/"+a,"echarts/chart/"+n[0],n[1]?"echarts/chart/"+n[1]:"echarts"],function(a,n){var o=a.init(e[0],n);t.get(i.url,function(t){o.setOption(t)},"json")})})})}(jQuery);